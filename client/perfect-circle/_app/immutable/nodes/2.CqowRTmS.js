var qe=Object.defineProperty;var Ve=(d,l,o)=>l in d?qe(d,l,{enumerable:!0,configurable:!0,writable:!0,value:o}):d[l]=o;var Te=(d,l,o)=>(Ve(d,typeof l!="symbol"?l+"":l,o),o),he=(d,l,o)=>{if(!l.has(d))throw TypeError("Cannot "+o)};var pt=(d,l,o)=>(he(d,l,"read from private field"),o?o.call(d):l.get(d)),le=(d,l,o)=>{if(l.has(d))throw TypeError("Cannot add the same private member more than once");l instanceof WeakSet?l.add(d):l.set(d,o)},qt=(d,l,o,i)=>(he(d,l,"write to private field"),i?i.call(d,o):l.set(d,o),o);var ue=(d,l,o)=>(he(d,l,"access private method"),o);import{s as Xe,n as Pe,r as Ge,o as He,e as Ye}from"../chunks/scheduler.BvLojk_z.js";import{S as ze,i as We,e as zt,s as ce,c as Wt,d as _e,g as mt,h as fe,o as It,j as bt,y as de,z as Je,b as Qe,f as Ke,k as $e,l as Ze}from"../chunks/index.DXL13Q8W.js";const ti=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global,ei=!1,ii=!1,as=Object.freeze(Object.defineProperty({__proto__:null,prerender:ei,ssr:ii},Symbol.toStringTag,{value:"Module"}));var Et=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ce(d){if(d.__esModule)return d;var l=d.default;if(typeof l=="function"){var o=function i(){return this instanceof i?Reflect.construct(l,arguments,this.constructor):l.apply(this,arguments)};o.prototype=l.prototype}else o={};return Object.defineProperty(o,"__esModule",{value:!0}),Object.keys(d).forEach(function(i){var e=Object.getOwnPropertyDescriptor(d,i);Object.defineProperty(o,i,e.get?e:{enumerable:!0,get:function(){return d[i]}})}),o}var $={};const si=Object.prototype.toString;function jt(d){const l=si.call(d);return l.endsWith("Array]")&&!l.includes("Big")}const ni=Object.freeze(Object.defineProperty({__proto__:null,isAnyArray:jt},Symbol.toStringTag,{value:"Module"})),ri=Ce(ni);function oi(d){var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!jt(d))throw new TypeError("input must be an array");if(d.length===0)throw new TypeError("input must not be empty");var o=l.fromIndex,i=o===void 0?0:o,e=l.toIndex,t=e===void 0?d.length:e;if(i<0||i>=d.length||!Number.isInteger(i))throw new Error("fromIndex must be a positive integer smaller than length");if(t<=i||t>d.length||!Number.isInteger(t))throw new Error("toIndex must be an integer greater than fromIndex and at most equal to length");for(var r=d[i],n=i+1;n<t;n++)d[n]>r&&(r=d[n]);return r}function ai(d){var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!jt(d))throw new TypeError("input must be an array");if(d.length===0)throw new TypeError("input must not be empty");var o=l.fromIndex,i=o===void 0?0:o,e=l.toIndex,t=e===void 0?d.length:e;if(i<0||i>=d.length||!Number.isInteger(i))throw new Error("fromIndex must be a positive integer smaller than length");if(t<=i||t>d.length||!Number.isInteger(t))throw new Error("toIndex must be an integer greater than fromIndex and at most equal to length");for(var r=d[i],n=i+1;n<t;n++)d[n]<r&&(r=d[n]);return r}function hi(d){var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(jt(d)){if(d.length===0)throw new TypeError("input must not be empty")}else throw new TypeError("input must be an array");var o;if(l.output!==void 0){if(!jt(l.output))throw new TypeError("output option must be an array if specified");o=l.output}else o=new Array(d.length);var i=ai(d),e=oi(d);if(i===e)throw new RangeError("minimum and maximum input values are equal. Cannot rescale a constant array");var t=l.min,r=t===void 0?l.autoMinMax?i:0:t,n=l.max,a=n===void 0?l.autoMinMax?e:1:n;if(r>=a)throw new RangeError("min option must be smaller than max option");for(var h=(a-r)/(e-i),u=0;u<d.length;u++)o[u]=(d[u]-i)*h+r;return o}const li=Object.freeze(Object.defineProperty({__proto__:null,default:hi},Symbol.toStringTag,{value:"Module"})),ui=Ce(li);Object.defineProperty($,"__esModule",{value:!0});var lt=ri,Le=ui;const Vt=" ".repeat(2),De=" ".repeat(4);function ci(){return Oe(this)}function Oe(d,l={}){const{maxRows:o=15,maxColumns:i=10,maxNumSize:e=8,padMinus:t="auto"}=l;return`${d.constructor.name} {
${Vt}[
${De}${fi(d,o,i,e,t)}
${Vt}]
${Vt}rows: ${d.rows}
${Vt}columns: ${d.columns}
}`}function fi(d,l,o,i,e){const{rows:t,columns:r}=d,n=Math.min(t,l),a=Math.min(r,o),h=[];if(e==="auto"){e=!1;t:for(let u=0;u<n;u++)for(let c=0;c<a;c++)if(d.get(u,c)<0){e=!0;break t}}for(let u=0;u<n;u++){let c=[];for(let f=0;f<a;f++)c.push(di(d.get(u,f),i,e));h.push(`${c.join(" ")}`)}return a!==r&&(h[h.length-1]+=` ... ${r-o} more columns`),n!==t&&h.push(`... ${t-l} more rows`),h.join(`
${De}`)}function di(d,l,o){return(d>=0&&o?` ${Me(d,l-1)}`:Me(d,l)).padEnd(l)}function Me(d,l){let o=d.toString();if(o.length<=l)return o;let i=d.toFixed(l);if(i.length>l&&(i=d.toFixed(Math.max(0,l-(i.length-l)))),i.length<=l&&!i.startsWith("0.000")&&!i.startsWith("-0.000"))return i;let e=d.toExponential(l);return e.length>l&&(e=d.toExponential(Math.max(0,l-(e.length-l)))),e.slice(0)}function pi(d,l){d.prototype.add=function(i){return typeof i=="number"?this.addS(i):this.addM(i)},d.prototype.addS=function(i){for(let e=0;e<this.rows;e++)for(let t=0;t<this.columns;t++)this.set(e,t,this.get(e,t)+i);return this},d.prototype.addM=function(i){if(i=l.checkMatrix(i),this.rows!==i.rows||this.columns!==i.columns)throw new RangeError("Matrices dimensions must be equal");for(let e=0;e<this.rows;e++)for(let t=0;t<this.columns;t++)this.set(e,t,this.get(e,t)+i.get(e,t));return this},d.add=function(i,e){return new l(i).add(e)},d.prototype.sub=function(i){return typeof i=="number"?this.subS(i):this.subM(i)},d.prototype.subS=function(i){for(let e=0;e<this.rows;e++)for(let t=0;t<this.columns;t++)this.set(e,t,this.get(e,t)-i);return this},d.prototype.subM=function(i){if(i=l.checkMatrix(i),this.rows!==i.rows||this.columns!==i.columns)throw new RangeError("Matrices dimensions must be equal");for(let e=0;e<this.rows;e++)for(let t=0;t<this.columns;t++)this.set(e,t,this.get(e,t)-i.get(e,t));return this},d.sub=function(i,e){return new l(i).sub(e)},d.prototype.subtract=d.prototype.sub,d.prototype.subtractS=d.prototype.subS,d.prototype.subtractM=d.prototype.subM,d.subtract=d.sub,d.prototype.mul=function(i){return typeof i=="number"?this.mulS(i):this.mulM(i)},d.prototype.mulS=function(i){for(let e=0;e<this.rows;e++)for(let t=0;t<this.columns;t++)this.set(e,t,this.get(e,t)*i);return this},d.prototype.mulM=function(i){if(i=l.checkMatrix(i),this.rows!==i.rows||this.columns!==i.columns)throw new RangeError("Matrices dimensions must be equal");for(let e=0;e<this.rows;e++)for(let t=0;t<this.columns;t++)this.set(e,t,this.get(e,t)*i.get(e,t));return this},d.mul=function(i,e){return new l(i).mul(e)},d.prototype.multiply=d.prototype.mul,d.prototype.multiplyS=d.prototype.mulS,d.prototype.multiplyM=d.prototype.mulM,d.multiply=d.mul,d.prototype.div=function(i){return typeof i=="number"?this.divS(i):this.divM(i)},d.prototype.divS=function(i){for(let e=0;e<this.rows;e++)for(let t=0;t<this.columns;t++)this.set(e,t,this.get(e,t)/i);return this},d.prototype.divM=function(i){if(i=l.checkMatrix(i),this.rows!==i.rows||this.columns!==i.columns)throw new RangeError("Matrices dimensions must be equal");for(let e=0;e<this.rows;e++)for(let t=0;t<this.columns;t++)this.set(e,t,this.get(e,t)/i.get(e,t));return this},d.div=function(i,e){return new l(i).div(e)},d.prototype.divide=d.prototype.div,d.prototype.divideS=d.prototype.divS,d.prototype.divideM=d.prototype.divM,d.divide=d.div,d.prototype.mod=function(i){return typeof i=="number"?this.modS(i):this.modM(i)},d.prototype.modS=function(i){for(let e=0;e<this.rows;e++)for(let t=0;t<this.columns;t++)this.set(e,t,this.get(e,t)%i);return this},d.prototype.modM=function(i){if(i=l.checkMatrix(i),this.rows!==i.rows||this.columns!==i.columns)throw new RangeError("Matrices dimensions must be equal");for(let e=0;e<this.rows;e++)for(let t=0;t<this.columns;t++)this.set(e,t,this.get(e,t)%i.get(e,t));return this},d.mod=function(i,e){return new l(i).mod(e)},d.prototype.modulus=d.prototype.mod,d.prototype.modulusS=d.prototype.modS,d.prototype.modulusM=d.prototype.modM,d.modulus=d.mod,d.prototype.and=function(i){return typeof i=="number"?this.andS(i):this.andM(i)},d.prototype.andS=function(i){for(let e=0;e<this.rows;e++)for(let t=0;t<this.columns;t++)this.set(e,t,this.get(e,t)&i);return this},d.prototype.andM=function(i){if(i=l.checkMatrix(i),this.rows!==i.rows||this.columns!==i.columns)throw new RangeError("Matrices dimensions must be equal");for(let e=0;e<this.rows;e++)for(let t=0;t<this.columns;t++)this.set(e,t,this.get(e,t)&i.get(e,t));return this},d.and=function(i,e){return new l(i).and(e)},d.prototype.or=function(i){return typeof i=="number"?this.orS(i):this.orM(i)},d.prototype.orS=function(i){for(let e=0;e<this.rows;e++)for(let t=0;t<this.columns;t++)this.set(e,t,this.get(e,t)|i);return this},d.prototype.orM=function(i){if(i=l.checkMatrix(i),this.rows!==i.rows||this.columns!==i.columns)throw new RangeError("Matrices dimensions must be equal");for(let e=0;e<this.rows;e++)for(let t=0;t<this.columns;t++)this.set(e,t,this.get(e,t)|i.get(e,t));return this},d.or=function(i,e){return new l(i).or(e)},d.prototype.xor=function(i){return typeof i=="number"?this.xorS(i):this.xorM(i)},d.prototype.xorS=function(i){for(let e=0;e<this.rows;e++)for(let t=0;t<this.columns;t++)this.set(e,t,this.get(e,t)^i);return this},d.prototype.xorM=function(i){if(i=l.checkMatrix(i),this.rows!==i.rows||this.columns!==i.columns)throw new RangeError("Matrices dimensions must be equal");for(let e=0;e<this.rows;e++)for(let t=0;t<this.columns;t++)this.set(e,t,this.get(e,t)^i.get(e,t));return this},d.xor=function(i,e){return new l(i).xor(e)},d.prototype.leftShift=function(i){return typeof i=="number"?this.leftShiftS(i):this.leftShiftM(i)},d.prototype.leftShiftS=function(i){for(let e=0;e<this.rows;e++)for(let t=0;t<this.columns;t++)this.set(e,t,this.get(e,t)<<i);return this},d.prototype.leftShiftM=function(i){if(i=l.checkMatrix(i),this.rows!==i.rows||this.columns!==i.columns)throw new RangeError("Matrices dimensions must be equal");for(let e=0;e<this.rows;e++)for(let t=0;t<this.columns;t++)this.set(e,t,this.get(e,t)<<i.get(e,t));return this},d.leftShift=function(i,e){return new l(i).leftShift(e)},d.prototype.signPropagatingRightShift=function(i){return typeof i=="number"?this.signPropagatingRightShiftS(i):this.signPropagatingRightShiftM(i)},d.prototype.signPropagatingRightShiftS=function(i){for(let e=0;e<this.rows;e++)for(let t=0;t<this.columns;t++)this.set(e,t,this.get(e,t)>>i);return this},d.prototype.signPropagatingRightShiftM=function(i){if(i=l.checkMatrix(i),this.rows!==i.rows||this.columns!==i.columns)throw new RangeError("Matrices dimensions must be equal");for(let e=0;e<this.rows;e++)for(let t=0;t<this.columns;t++)this.set(e,t,this.get(e,t)>>i.get(e,t));return this},d.signPropagatingRightShift=function(i,e){return new l(i).signPropagatingRightShift(e)},d.prototype.rightShift=function(i){return typeof i=="number"?this.rightShiftS(i):this.rightShiftM(i)},d.prototype.rightShiftS=function(i){for(let e=0;e<this.rows;e++)for(let t=0;t<this.columns;t++)this.set(e,t,this.get(e,t)>>>i);return this},d.prototype.rightShiftM=function(i){if(i=l.checkMatrix(i),this.rows!==i.rows||this.columns!==i.columns)throw new RangeError("Matrices dimensions must be equal");for(let e=0;e<this.rows;e++)for(let t=0;t<this.columns;t++)this.set(e,t,this.get(e,t)>>>i.get(e,t));return this},d.rightShift=function(i,e){return new l(i).rightShift(e)},d.prototype.zeroFillRightShift=d.prototype.rightShift,d.prototype.zeroFillRightShiftS=d.prototype.rightShiftS,d.prototype.zeroFillRightShiftM=d.prototype.rightShiftM,d.zeroFillRightShift=d.rightShift,d.prototype.not=function(){for(let i=0;i<this.rows;i++)for(let e=0;e<this.columns;e++)this.set(i,e,~this.get(i,e));return this},d.not=function(i){return new l(i).not()},d.prototype.abs=function(){for(let i=0;i<this.rows;i++)for(let e=0;e<this.columns;e++)this.set(i,e,Math.abs(this.get(i,e)));return this},d.abs=function(i){return new l(i).abs()},d.prototype.acos=function(){for(let i=0;i<this.rows;i++)for(let e=0;e<this.columns;e++)this.set(i,e,Math.acos(this.get(i,e)));return this},d.acos=function(i){return new l(i).acos()},d.prototype.acosh=function(){for(let i=0;i<this.rows;i++)for(let e=0;e<this.columns;e++)this.set(i,e,Math.acosh(this.get(i,e)));return this},d.acosh=function(i){return new l(i).acosh()},d.prototype.asin=function(){for(let i=0;i<this.rows;i++)for(let e=0;e<this.columns;e++)this.set(i,e,Math.asin(this.get(i,e)));return this},d.asin=function(i){return new l(i).asin()},d.prototype.asinh=function(){for(let i=0;i<this.rows;i++)for(let e=0;e<this.columns;e++)this.set(i,e,Math.asinh(this.get(i,e)));return this},d.asinh=function(i){return new l(i).asinh()},d.prototype.atan=function(){for(let i=0;i<this.rows;i++)for(let e=0;e<this.columns;e++)this.set(i,e,Math.atan(this.get(i,e)));return this},d.atan=function(i){return new l(i).atan()},d.prototype.atanh=function(){for(let i=0;i<this.rows;i++)for(let e=0;e<this.columns;e++)this.set(i,e,Math.atanh(this.get(i,e)));return this},d.atanh=function(i){return new l(i).atanh()},d.prototype.cbrt=function(){for(let i=0;i<this.rows;i++)for(let e=0;e<this.columns;e++)this.set(i,e,Math.cbrt(this.get(i,e)));return this},d.cbrt=function(i){return new l(i).cbrt()},d.prototype.ceil=function(){for(let i=0;i<this.rows;i++)for(let e=0;e<this.columns;e++)this.set(i,e,Math.ceil(this.get(i,e)));return this},d.ceil=function(i){return new l(i).ceil()},d.prototype.clz32=function(){for(let i=0;i<this.rows;i++)for(let e=0;e<this.columns;e++)this.set(i,e,Math.clz32(this.get(i,e)));return this},d.clz32=function(i){return new l(i).clz32()},d.prototype.cos=function(){for(let i=0;i<this.rows;i++)for(let e=0;e<this.columns;e++)this.set(i,e,Math.cos(this.get(i,e)));return this},d.cos=function(i){return new l(i).cos()},d.prototype.cosh=function(){for(let i=0;i<this.rows;i++)for(let e=0;e<this.columns;e++)this.set(i,e,Math.cosh(this.get(i,e)));return this},d.cosh=function(i){return new l(i).cosh()},d.prototype.exp=function(){for(let i=0;i<this.rows;i++)for(let e=0;e<this.columns;e++)this.set(i,e,Math.exp(this.get(i,e)));return this},d.exp=function(i){return new l(i).exp()},d.prototype.expm1=function(){for(let i=0;i<this.rows;i++)for(let e=0;e<this.columns;e++)this.set(i,e,Math.expm1(this.get(i,e)));return this},d.expm1=function(i){return new l(i).expm1()},d.prototype.floor=function(){for(let i=0;i<this.rows;i++)for(let e=0;e<this.columns;e++)this.set(i,e,Math.floor(this.get(i,e)));return this},d.floor=function(i){return new l(i).floor()},d.prototype.fround=function(){for(let i=0;i<this.rows;i++)for(let e=0;e<this.columns;e++)this.set(i,e,Math.fround(this.get(i,e)));return this},d.fround=function(i){return new l(i).fround()},d.prototype.log=function(){for(let i=0;i<this.rows;i++)for(let e=0;e<this.columns;e++)this.set(i,e,Math.log(this.get(i,e)));return this},d.log=function(i){return new l(i).log()},d.prototype.log1p=function(){for(let i=0;i<this.rows;i++)for(let e=0;e<this.columns;e++)this.set(i,e,Math.log1p(this.get(i,e)));return this},d.log1p=function(i){return new l(i).log1p()},d.prototype.log10=function(){for(let i=0;i<this.rows;i++)for(let e=0;e<this.columns;e++)this.set(i,e,Math.log10(this.get(i,e)));return this},d.log10=function(i){return new l(i).log10()},d.prototype.log2=function(){for(let i=0;i<this.rows;i++)for(let e=0;e<this.columns;e++)this.set(i,e,Math.log2(this.get(i,e)));return this},d.log2=function(i){return new l(i).log2()},d.prototype.round=function(){for(let i=0;i<this.rows;i++)for(let e=0;e<this.columns;e++)this.set(i,e,Math.round(this.get(i,e)));return this},d.round=function(i){return new l(i).round()},d.prototype.sign=function(){for(let i=0;i<this.rows;i++)for(let e=0;e<this.columns;e++)this.set(i,e,Math.sign(this.get(i,e)));return this},d.sign=function(i){return new l(i).sign()},d.prototype.sin=function(){for(let i=0;i<this.rows;i++)for(let e=0;e<this.columns;e++)this.set(i,e,Math.sin(this.get(i,e)));return this},d.sin=function(i){return new l(i).sin()},d.prototype.sinh=function(){for(let i=0;i<this.rows;i++)for(let e=0;e<this.columns;e++)this.set(i,e,Math.sinh(this.get(i,e)));return this},d.sinh=function(i){return new l(i).sinh()},d.prototype.sqrt=function(){for(let i=0;i<this.rows;i++)for(let e=0;e<this.columns;e++)this.set(i,e,Math.sqrt(this.get(i,e)));return this},d.sqrt=function(i){return new l(i).sqrt()},d.prototype.tan=function(){for(let i=0;i<this.rows;i++)for(let e=0;e<this.columns;e++)this.set(i,e,Math.tan(this.get(i,e)));return this},d.tan=function(i){return new l(i).tan()},d.prototype.tanh=function(){for(let i=0;i<this.rows;i++)for(let e=0;e<this.columns;e++)this.set(i,e,Math.tanh(this.get(i,e)));return this},d.tanh=function(i){return new l(i).tanh()},d.prototype.trunc=function(){for(let i=0;i<this.rows;i++)for(let e=0;e<this.columns;e++)this.set(i,e,Math.trunc(this.get(i,e)));return this},d.trunc=function(i){return new l(i).trunc()},d.pow=function(i,e){return new l(i).pow(e)},d.prototype.pow=function(i){return typeof i=="number"?this.powS(i):this.powM(i)},d.prototype.powS=function(i){for(let e=0;e<this.rows;e++)for(let t=0;t<this.columns;t++)this.set(e,t,Math.pow(this.get(e,t),i));return this},d.prototype.powM=function(i){if(i=l.checkMatrix(i),this.rows!==i.rows||this.columns!==i.columns)throw new RangeError("Matrices dimensions must be equal");for(let e=0;e<this.rows;e++)for(let t=0;t<this.columns;t++)this.set(e,t,Math.pow(this.get(e,t),i.get(e,t)));return this}}function ft(d,l,o){let i=o?d.rows:d.rows-1;if(l<0||l>i)throw new RangeError("Row index out of range")}function dt(d,l,o){let i=o?d.columns:d.columns-1;if(l<0||l>i)throw new RangeError("Column index out of range")}function Rt(d,l){if(l.to1DArray&&(l=l.to1DArray()),l.length!==d.columns)throw new RangeError("vector size must be the same as the number of columns");return l}function At(d,l){if(l.to1DArray&&(l=l.to1DArray()),l.length!==d.rows)throw new RangeError("vector size must be the same as the number of rows");return l}function ve(d,l){if(!lt.isAnyArray(l))throw new TypeError("row indices must be an array");for(let o=0;o<l.length;o++)if(l[o]<0||l[o]>=d.rows)throw new RangeError("row indices are out of range")}function we(d,l){if(!lt.isAnyArray(l))throw new TypeError("column indices must be an array");for(let o=0;o<l.length;o++)if(l[o]<0||l[o]>=d.columns)throw new RangeError("column indices are out of range")}function ge(d,l,o,i,e){if(arguments.length!==5)throw new RangeError("expected 4 arguments");if(Xt("startRow",l),Xt("endRow",o),Xt("startColumn",i),Xt("endColumn",e),l>o||i>e||l<0||l>=d.rows||o<0||o>=d.rows||i<0||i>=d.columns||e<0||e>=d.columns)throw new RangeError("Submatrix indices are out of range")}function Kt(d,l=0){let o=[];for(let i=0;i<d;i++)o.push(l);return o}function Xt(d,l){if(typeof l!="number")throw new TypeError(`${d} must be a number`)}function Mt(d){if(d.isEmpty())throw new Error("Empty matrix has no elements to index")}function _i(d){let l=Kt(d.rows);for(let o=0;o<d.rows;++o)for(let i=0;i<d.columns;++i)l[o]+=d.get(o,i);return l}function gi(d){let l=Kt(d.columns);for(let o=0;o<d.rows;++o)for(let i=0;i<d.columns;++i)l[i]+=d.get(o,i);return l}function mi(d){let l=0;for(let o=0;o<d.rows;o++)for(let i=0;i<d.columns;i++)l+=d.get(o,i);return l}function vi(d){let l=Kt(d.rows,1);for(let o=0;o<d.rows;++o)for(let i=0;i<d.columns;++i)l[o]*=d.get(o,i);return l}function wi(d){let l=Kt(d.columns,1);for(let o=0;o<d.rows;++o)for(let i=0;i<d.columns;++i)l[i]*=d.get(o,i);return l}function yi(d){let l=1;for(let o=0;o<d.rows;o++)for(let i=0;i<d.columns;i++)l*=d.get(o,i);return l}function Ei(d,l,o){const i=d.rows,e=d.columns,t=[];for(let r=0;r<i;r++){let n=0,a=0,h=0;for(let u=0;u<e;u++)h=d.get(r,u)-o[r],n+=h,a+=h*h;l?t.push((a-n*n/e)/(e-1)):t.push((a-n*n/e)/e)}return t}function Si(d,l,o){const i=d.rows,e=d.columns,t=[];for(let r=0;r<e;r++){let n=0,a=0,h=0;for(let u=0;u<i;u++)h=d.get(u,r)-o[r],n+=h,a+=h*h;l?t.push((a-n*n/i)/(i-1)):t.push((a-n*n/i)/i)}return t}function bi(d,l,o){const i=d.rows,e=d.columns,t=i*e;let r=0,n=0,a=0;for(let h=0;h<i;h++)for(let u=0;u<e;u++)a=d.get(h,u)-o,r+=a,n+=a*a;return l?(n-r*r/t)/(t-1):(n-r*r/t)/t}function Ti(d,l){for(let o=0;o<d.rows;o++)for(let i=0;i<d.columns;i++)d.set(o,i,d.get(o,i)-l[o])}function Pi(d,l){for(let o=0;o<d.rows;o++)for(let i=0;i<d.columns;i++)d.set(o,i,d.get(o,i)-l[i])}function Li(d,l){for(let o=0;o<d.rows;o++)for(let i=0;i<d.columns;i++)d.set(o,i,d.get(o,i)-l)}function Mi(d){const l=[];for(let o=0;o<d.rows;o++){let i=0;for(let e=0;e<d.columns;e++)i+=Math.pow(d.get(o,e),2)/(d.columns-1);l.push(Math.sqrt(i))}return l}function Ri(d,l){for(let o=0;o<d.rows;o++)for(let i=0;i<d.columns;i++)d.set(o,i,d.get(o,i)/l[o])}function Ai(d){const l=[];for(let o=0;o<d.columns;o++){let i=0;for(let e=0;e<d.rows;e++)i+=Math.pow(d.get(e,o),2)/(d.rows-1);l.push(Math.sqrt(i))}return l}function Ii(d,l){for(let o=0;o<d.rows;o++)for(let i=0;i<d.columns;i++)d.set(o,i,d.get(o,i)/l[i])}function xi(d){const l=d.size-1;let o=0;for(let i=0;i<d.columns;i++)for(let e=0;e<d.rows;e++)o+=Math.pow(d.get(e,i),2)/l;return Math.sqrt(o)}function Ci(d,l){for(let o=0;o<d.rows;o++)for(let i=0;i<d.columns;i++)d.set(o,i,d.get(o,i)/l)}class z{static from1DArray(l,o,i){if(l*o!==i.length)throw new RangeError("data length does not match given dimensions");let t=new C(l,o);for(let r=0;r<l;r++)for(let n=0;n<o;n++)t.set(r,n,i[r*o+n]);return t}static rowVector(l){let o=new C(1,l.length);for(let i=0;i<l.length;i++)o.set(0,i,l[i]);return o}static columnVector(l){let o=new C(l.length,1);for(let i=0;i<l.length;i++)o.set(i,0,l[i]);return o}static zeros(l,o){return new C(l,o)}static ones(l,o){return new C(l,o).fill(1)}static rand(l,o,i={}){if(typeof i!="object")throw new TypeError("options must be an object");const{random:e=Math.random}=i;let t=new C(l,o);for(let r=0;r<l;r++)for(let n=0;n<o;n++)t.set(r,n,e());return t}static randInt(l,o,i={}){if(typeof i!="object")throw new TypeError("options must be an object");const{min:e=0,max:t=1e3,random:r=Math.random}=i;if(!Number.isInteger(e))throw new TypeError("min must be an integer");if(!Number.isInteger(t))throw new TypeError("max must be an integer");if(e>=t)throw new RangeError("min must be smaller than max");let n=t-e,a=new C(l,o);for(let h=0;h<l;h++)for(let u=0;u<o;u++){let c=e+Math.round(r()*n);a.set(h,u,c)}return a}static eye(l,o,i){o===void 0&&(o=l),i===void 0&&(i=1);let e=Math.min(l,o),t=this.zeros(l,o);for(let r=0;r<e;r++)t.set(r,r,i);return t}static diag(l,o,i){let e=l.length;o===void 0&&(o=e),i===void 0&&(i=o);let t=Math.min(e,o,i),r=this.zeros(o,i);for(let n=0;n<t;n++)r.set(n,n,l[n]);return r}static min(l,o){l=this.checkMatrix(l),o=this.checkMatrix(o);let i=l.rows,e=l.columns,t=new C(i,e);for(let r=0;r<i;r++)for(let n=0;n<e;n++)t.set(r,n,Math.min(l.get(r,n),o.get(r,n)));return t}static max(l,o){l=this.checkMatrix(l),o=this.checkMatrix(o);let i=l.rows,e=l.columns,t=new this(i,e);for(let r=0;r<i;r++)for(let n=0;n<e;n++)t.set(r,n,Math.max(l.get(r,n),o.get(r,n)));return t}static checkMatrix(l){return z.isMatrix(l)?l:new C(l)}static isMatrix(l){return l!=null&&l.klass==="Matrix"}get size(){return this.rows*this.columns}apply(l){if(typeof l!="function")throw new TypeError("callback must be a function");for(let o=0;o<this.rows;o++)for(let i=0;i<this.columns;i++)l.call(this,o,i);return this}to1DArray(){let l=[];for(let o=0;o<this.rows;o++)for(let i=0;i<this.columns;i++)l.push(this.get(o,i));return l}to2DArray(){let l=[];for(let o=0;o<this.rows;o++){l.push([]);for(let i=0;i<this.columns;i++)l[o].push(this.get(o,i))}return l}toJSON(){return this.to2DArray()}isRowVector(){return this.rows===1}isColumnVector(){return this.columns===1}isVector(){return this.rows===1||this.columns===1}isSquare(){return this.rows===this.columns}isEmpty(){return this.rows===0||this.columns===0}isSymmetric(){if(this.isSquare()){for(let l=0;l<this.rows;l++)for(let o=0;o<=l;o++)if(this.get(l,o)!==this.get(o,l))return!1;return!0}return!1}isDistance(){if(!this.isSymmetric())return!1;for(let l=0;l<this.rows;l++)if(this.get(l,l)!==0)return!1;return!0}isEchelonForm(){let l=0,o=0,i=-1,e=!0,t=!1;for(;l<this.rows&&e;){for(o=0,t=!1;o<this.columns&&t===!1;)this.get(l,o)===0?o++:this.get(l,o)===1&&o>i?(t=!0,i=o):(e=!1,t=!0);l++}return e}isReducedEchelonForm(){let l=0,o=0,i=-1,e=!0,t=!1;for(;l<this.rows&&e;){for(o=0,t=!1;o<this.columns&&t===!1;)this.get(l,o)===0?o++:this.get(l,o)===1&&o>i?(t=!0,i=o):(e=!1,t=!0);for(let r=o+1;r<this.rows;r++)this.get(l,r)!==0&&(e=!1);l++}return e}echelonForm(){let l=this.clone(),o=0,i=0;for(;o<l.rows&&i<l.columns;){let e=o;for(let t=o;t<l.rows;t++)l.get(t,i)>l.get(e,i)&&(e=t);if(l.get(e,i)===0)i++;else{l.swapRows(o,e);let t=l.get(o,i);for(let r=i;r<l.columns;r++)l.set(o,r,l.get(o,r)/t);for(let r=o+1;r<l.rows;r++){let n=l.get(r,i)/l.get(o,i);l.set(r,i,0);for(let a=i+1;a<l.columns;a++)l.set(r,a,l.get(r,a)-l.get(o,a)*n)}o++,i++}}return l}reducedEchelonForm(){let l=this.echelonForm(),o=l.columns,i=l.rows,e=i-1;for(;e>=0;)if(l.maxRow(e)===0)e--;else{let t=0,r=!1;for(;t<i&&r===!1;)l.get(e,t)===1?r=!0:t++;for(let n=0;n<e;n++){let a=l.get(n,t);for(let h=t;h<o;h++){let u=l.get(n,h)-a*l.get(e,h);l.set(n,h,u)}}e--}return l}set(){throw new Error("set method is unimplemented")}get(){throw new Error("get method is unimplemented")}repeat(l={}){if(typeof l!="object")throw new TypeError("options must be an object");const{rows:o=1,columns:i=1}=l;if(!Number.isInteger(o)||o<=0)throw new TypeError("rows must be a positive integer");if(!Number.isInteger(i)||i<=0)throw new TypeError("columns must be a positive integer");let e=new C(this.rows*o,this.columns*i);for(let t=0;t<o;t++)for(let r=0;r<i;r++)e.setSubMatrix(this,this.rows*t,this.columns*r);return e}fill(l){for(let o=0;o<this.rows;o++)for(let i=0;i<this.columns;i++)this.set(o,i,l);return this}neg(){return this.mulS(-1)}getRow(l){ft(this,l);let o=[];for(let i=0;i<this.columns;i++)o.push(this.get(l,i));return o}getRowVector(l){return C.rowVector(this.getRow(l))}setRow(l,o){ft(this,l),o=Rt(this,o);for(let i=0;i<this.columns;i++)this.set(l,i,o[i]);return this}swapRows(l,o){ft(this,l),ft(this,o);for(let i=0;i<this.columns;i++){let e=this.get(l,i);this.set(l,i,this.get(o,i)),this.set(o,i,e)}return this}getColumn(l){dt(this,l);let o=[];for(let i=0;i<this.rows;i++)o.push(this.get(i,l));return o}getColumnVector(l){return C.columnVector(this.getColumn(l))}setColumn(l,o){dt(this,l),o=At(this,o);for(let i=0;i<this.rows;i++)this.set(i,l,o[i]);return this}swapColumns(l,o){dt(this,l),dt(this,o);for(let i=0;i<this.rows;i++){let e=this.get(i,l);this.set(i,l,this.get(i,o)),this.set(i,o,e)}return this}addRowVector(l){l=Rt(this,l);for(let o=0;o<this.rows;o++)for(let i=0;i<this.columns;i++)this.set(o,i,this.get(o,i)+l[i]);return this}subRowVector(l){l=Rt(this,l);for(let o=0;o<this.rows;o++)for(let i=0;i<this.columns;i++)this.set(o,i,this.get(o,i)-l[i]);return this}mulRowVector(l){l=Rt(this,l);for(let o=0;o<this.rows;o++)for(let i=0;i<this.columns;i++)this.set(o,i,this.get(o,i)*l[i]);return this}divRowVector(l){l=Rt(this,l);for(let o=0;o<this.rows;o++)for(let i=0;i<this.columns;i++)this.set(o,i,this.get(o,i)/l[i]);return this}addColumnVector(l){l=At(this,l);for(let o=0;o<this.rows;o++)for(let i=0;i<this.columns;i++)this.set(o,i,this.get(o,i)+l[o]);return this}subColumnVector(l){l=At(this,l);for(let o=0;o<this.rows;o++)for(let i=0;i<this.columns;i++)this.set(o,i,this.get(o,i)-l[o]);return this}mulColumnVector(l){l=At(this,l);for(let o=0;o<this.rows;o++)for(let i=0;i<this.columns;i++)this.set(o,i,this.get(o,i)*l[o]);return this}divColumnVector(l){l=At(this,l);for(let o=0;o<this.rows;o++)for(let i=0;i<this.columns;i++)this.set(o,i,this.get(o,i)/l[o]);return this}mulRow(l,o){ft(this,l);for(let i=0;i<this.columns;i++)this.set(l,i,this.get(l,i)*o);return this}mulColumn(l,o){dt(this,l);for(let i=0;i<this.rows;i++)this.set(i,l,this.get(i,l)*o);return this}max(l){if(this.isEmpty())return NaN;switch(l){case"row":{const o=new Array(this.rows).fill(Number.NEGATIVE_INFINITY);for(let i=0;i<this.rows;i++)for(let e=0;e<this.columns;e++)this.get(i,e)>o[i]&&(o[i]=this.get(i,e));return o}case"column":{const o=new Array(this.columns).fill(Number.NEGATIVE_INFINITY);for(let i=0;i<this.rows;i++)for(let e=0;e<this.columns;e++)this.get(i,e)>o[e]&&(o[e]=this.get(i,e));return o}case void 0:{let o=this.get(0,0);for(let i=0;i<this.rows;i++)for(let e=0;e<this.columns;e++)this.get(i,e)>o&&(o=this.get(i,e));return o}default:throw new Error(`invalid option: ${l}`)}}maxIndex(){Mt(this);let l=this.get(0,0),o=[0,0];for(let i=0;i<this.rows;i++)for(let e=0;e<this.columns;e++)this.get(i,e)>l&&(l=this.get(i,e),o[0]=i,o[1]=e);return o}min(l){if(this.isEmpty())return NaN;switch(l){case"row":{const o=new Array(this.rows).fill(Number.POSITIVE_INFINITY);for(let i=0;i<this.rows;i++)for(let e=0;e<this.columns;e++)this.get(i,e)<o[i]&&(o[i]=this.get(i,e));return o}case"column":{const o=new Array(this.columns).fill(Number.POSITIVE_INFINITY);for(let i=0;i<this.rows;i++)for(let e=0;e<this.columns;e++)this.get(i,e)<o[e]&&(o[e]=this.get(i,e));return o}case void 0:{let o=this.get(0,0);for(let i=0;i<this.rows;i++)for(let e=0;e<this.columns;e++)this.get(i,e)<o&&(o=this.get(i,e));return o}default:throw new Error(`invalid option: ${l}`)}}minIndex(){Mt(this);let l=this.get(0,0),o=[0,0];for(let i=0;i<this.rows;i++)for(let e=0;e<this.columns;e++)this.get(i,e)<l&&(l=this.get(i,e),o[0]=i,o[1]=e);return o}maxRow(l){if(ft(this,l),this.isEmpty())return NaN;let o=this.get(l,0);for(let i=1;i<this.columns;i++)this.get(l,i)>o&&(o=this.get(l,i));return o}maxRowIndex(l){ft(this,l),Mt(this);let o=this.get(l,0),i=[l,0];for(let e=1;e<this.columns;e++)this.get(l,e)>o&&(o=this.get(l,e),i[1]=e);return i}minRow(l){if(ft(this,l),this.isEmpty())return NaN;let o=this.get(l,0);for(let i=1;i<this.columns;i++)this.get(l,i)<o&&(o=this.get(l,i));return o}minRowIndex(l){ft(this,l),Mt(this);let o=this.get(l,0),i=[l,0];for(let e=1;e<this.columns;e++)this.get(l,e)<o&&(o=this.get(l,e),i[1]=e);return i}maxColumn(l){if(dt(this,l),this.isEmpty())return NaN;let o=this.get(0,l);for(let i=1;i<this.rows;i++)this.get(i,l)>o&&(o=this.get(i,l));return o}maxColumnIndex(l){dt(this,l),Mt(this);let o=this.get(0,l),i=[0,l];for(let e=1;e<this.rows;e++)this.get(e,l)>o&&(o=this.get(e,l),i[0]=e);return i}minColumn(l){if(dt(this,l),this.isEmpty())return NaN;let o=this.get(0,l);for(let i=1;i<this.rows;i++)this.get(i,l)<o&&(o=this.get(i,l));return o}minColumnIndex(l){dt(this,l),Mt(this);let o=this.get(0,l),i=[0,l];for(let e=1;e<this.rows;e++)this.get(e,l)<o&&(o=this.get(e,l),i[0]=e);return i}diag(){let l=Math.min(this.rows,this.columns),o=[];for(let i=0;i<l;i++)o.push(this.get(i,i));return o}norm(l="frobenius"){switch(l){case"max":return this.max();case"frobenius":return Math.sqrt(this.dot(this));default:throw new RangeError(`unknown norm type: ${l}`)}}cumulativeSum(){let l=0;for(let o=0;o<this.rows;o++)for(let i=0;i<this.columns;i++)l+=this.get(o,i),this.set(o,i,l);return this}dot(l){z.isMatrix(l)&&(l=l.to1DArray());let o=this.to1DArray();if(o.length!==l.length)throw new RangeError("vectors do not have the same size");let i=0;for(let e=0;e<o.length;e++)i+=o[e]*l[e];return i}mmul(l){l=C.checkMatrix(l);let o=this.rows,i=this.columns,e=l.columns,t=new C(o,e),r=new Float64Array(i);for(let n=0;n<e;n++){for(let a=0;a<i;a++)r[a]=l.get(a,n);for(let a=0;a<o;a++){let h=0;for(let u=0;u<i;u++)h+=this.get(a,u)*r[u];t.set(a,n,h)}}return t}strassen2x2(l){l=C.checkMatrix(l);let o=new C(2,2);const i=this.get(0,0),e=l.get(0,0),t=this.get(0,1),r=l.get(0,1),n=this.get(1,0),a=l.get(1,0),h=this.get(1,1),u=l.get(1,1),c=(i+h)*(e+u),f=(n+h)*e,p=i*(r-u),_=h*(a-e),m=(i+t)*u,w=(n-i)*(e+r),g=(t-h)*(a+u),y=c+_-m+g,E=p+m,P=f+_,M=c-f+p+w;return o.set(0,0,y),o.set(0,1,E),o.set(1,0,P),o.set(1,1,M),o}strassen3x3(l){l=C.checkMatrix(l);let o=new C(3,3);const i=this.get(0,0),e=this.get(0,1),t=this.get(0,2),r=this.get(1,0),n=this.get(1,1),a=this.get(1,2),h=this.get(2,0),u=this.get(2,1),c=this.get(2,2),f=l.get(0,0),p=l.get(0,1),_=l.get(0,2),m=l.get(1,0),w=l.get(1,1),g=l.get(1,2),y=l.get(2,0),E=l.get(2,1),P=l.get(2,2),M=(i+e+t-r-n-u-c)*w,x=(i-r)*(-p+w),T=n*(-f+p+m-w-g-y+P),R=(-i+r+n)*(f-p+w),k=(r+n)*(-f+p),v=i*f,S=(-i+h+u)*(f-_+g),L=(-i+h)*(_-g),b=(h+u)*(-f+_),G=(i+e+t-n-a-h-u)*g,H=u*(-f+_+m-w-g-y+E),Y=(-t+u+c)*(w+y-E),V=(t-c)*(w-E),W=t*y,it=(u+c)*(-y+E),X=(-t+n+a)*(g+y-P),j=(t-a)*(g-P),at=(n+a)*(-y+P),U=e*m,tt=a*E,st=r*_,J=h*p,K=c*P,Pt=v+W+U,St=M+R+k+v+Y+W+it,Dt=v+S+b+G+W+X+at,Ot=x+T+R+v+W+X+j,B=x+R+k+v+tt,Lt=W+X+j+at+st,nt=v+S+L+H+Y+V+W,gt=Y+V+W+it+J,kt=v+S+L+b+K;return o.set(0,0,Pt),o.set(0,1,St),o.set(0,2,Dt),o.set(1,0,Ot),o.set(1,1,B),o.set(1,2,Lt),o.set(2,0,nt),o.set(2,1,gt),o.set(2,2,kt),o}mmulStrassen(l){l=C.checkMatrix(l);let o=this.clone(),i=o.rows,e=o.columns,t=l.rows,r=l.columns;e!==t&&console.warn(`Multiplying ${i} x ${e} and ${t} x ${r} matrix: dimensions do not match.`);function n(c,f,p){let _=c.rows,m=c.columns;if(_===f&&m===p)return c;{let w=z.zeros(f,p);return w=w.setSubMatrix(c,0,0),w}}let a=Math.max(i,t),h=Math.max(e,r);o=n(o,a,h),l=n(l,a,h);function u(c,f,p,_){if(p<=512||_<=512)return c.mmul(f);p%2===1&&_%2===1?(c=n(c,p+1,_+1),f=n(f,p+1,_+1)):p%2===1?(c=n(c,p+1,_),f=n(f,p+1,_)):_%2===1&&(c=n(c,p,_+1),f=n(f,p,_+1));let m=parseInt(c.rows/2,10),w=parseInt(c.columns/2,10),g=c.subMatrix(0,m-1,0,w-1),y=f.subMatrix(0,m-1,0,w-1),E=c.subMatrix(0,m-1,w,c.columns-1),P=f.subMatrix(0,m-1,w,f.columns-1),M=c.subMatrix(m,c.rows-1,0,w-1),x=f.subMatrix(m,f.rows-1,0,w-1),T=c.subMatrix(m,c.rows-1,w,c.columns-1),R=f.subMatrix(m,f.rows-1,w,f.columns-1),k=u(z.add(g,T),z.add(y,R),m,w),v=u(z.add(M,T),y,m,w),S=u(g,z.sub(P,R),m,w),L=u(T,z.sub(x,y),m,w),b=u(z.add(g,E),R,m,w),G=u(z.sub(M,g),z.add(y,P),m,w),H=u(z.sub(E,T),z.add(x,R),m,w),Y=z.add(k,L);Y.sub(b),Y.add(H);let V=z.add(S,b),W=z.add(v,L),it=z.sub(k,v);it.add(S),it.add(G);let X=z.zeros(2*Y.rows,2*Y.columns);return X=X.setSubMatrix(Y,0,0),X=X.setSubMatrix(V,Y.rows,0),X=X.setSubMatrix(W,0,Y.columns),X=X.setSubMatrix(it,Y.rows,Y.columns),X.subMatrix(0,p-1,0,_-1)}return u(o,l,a,h)}scaleRows(l={}){if(typeof l!="object")throw new TypeError("options must be an object");const{min:o=0,max:i=1}=l;if(!Number.isFinite(o))throw new TypeError("min must be a number");if(!Number.isFinite(i))throw new TypeError("max must be a number");if(o>=i)throw new RangeError("min must be smaller than max");let e=new C(this.rows,this.columns);for(let t=0;t<this.rows;t++){const r=this.getRow(t);r.length>0&&Le(r,{min:o,max:i,output:r}),e.setRow(t,r)}return e}scaleColumns(l={}){if(typeof l!="object")throw new TypeError("options must be an object");const{min:o=0,max:i=1}=l;if(!Number.isFinite(o))throw new TypeError("min must be a number");if(!Number.isFinite(i))throw new TypeError("max must be a number");if(o>=i)throw new RangeError("min must be smaller than max");let e=new C(this.rows,this.columns);for(let t=0;t<this.columns;t++){const r=this.getColumn(t);r.length&&Le(r,{min:o,max:i,output:r}),e.setColumn(t,r)}return e}flipRows(){const l=Math.ceil(this.columns/2);for(let o=0;o<this.rows;o++)for(let i=0;i<l;i++){let e=this.get(o,i),t=this.get(o,this.columns-1-i);this.set(o,i,t),this.set(o,this.columns-1-i,e)}return this}flipColumns(){const l=Math.ceil(this.rows/2);for(let o=0;o<this.columns;o++)for(let i=0;i<l;i++){let e=this.get(i,o),t=this.get(this.rows-1-i,o);this.set(i,o,t),this.set(this.rows-1-i,o,e)}return this}kroneckerProduct(l){l=C.checkMatrix(l);let o=this.rows,i=this.columns,e=l.rows,t=l.columns,r=new C(o*e,i*t);for(let n=0;n<o;n++)for(let a=0;a<i;a++)for(let h=0;h<e;h++)for(let u=0;u<t;u++)r.set(e*n+h,t*a+u,this.get(n,a)*l.get(h,u));return r}kroneckerSum(l){if(l=C.checkMatrix(l),!this.isSquare()||!l.isSquare())throw new Error("Kronecker Sum needs two Square Matrices");let o=this.rows,i=l.rows,e=this.kroneckerProduct(C.eye(i,i)),t=C.eye(o,o).kroneckerProduct(l);return e.add(t)}transpose(){let l=new C(this.columns,this.rows);for(let o=0;o<this.rows;o++)for(let i=0;i<this.columns;i++)l.set(i,o,this.get(o,i));return l}sortRows(l=Re){for(let o=0;o<this.rows;o++)this.setRow(o,this.getRow(o).sort(l));return this}sortColumns(l=Re){for(let o=0;o<this.columns;o++)this.setColumn(o,this.getColumn(o).sort(l));return this}subMatrix(l,o,i,e){ge(this,l,o,i,e);let t=new C(o-l+1,e-i+1);for(let r=l;r<=o;r++)for(let n=i;n<=e;n++)t.set(r-l,n-i,this.get(r,n));return t}subMatrixRow(l,o,i){if(o===void 0&&(o=0),i===void 0&&(i=this.columns-1),o>i||o<0||o>=this.columns||i<0||i>=this.columns)throw new RangeError("Argument out of range");let e=new C(l.length,i-o+1);for(let t=0;t<l.length;t++)for(let r=o;r<=i;r++){if(l[t]<0||l[t]>=this.rows)throw new RangeError(`Row index out of range: ${l[t]}`);e.set(t,r-o,this.get(l[t],r))}return e}subMatrixColumn(l,o,i){if(o===void 0&&(o=0),i===void 0&&(i=this.rows-1),o>i||o<0||o>=this.rows||i<0||i>=this.rows)throw new RangeError("Argument out of range");let e=new C(i-o+1,l.length);for(let t=0;t<l.length;t++)for(let r=o;r<=i;r++){if(l[t]<0||l[t]>=this.columns)throw new RangeError(`Column index out of range: ${l[t]}`);e.set(r-o,t,this.get(r,l[t]))}return e}setSubMatrix(l,o,i){if(l=C.checkMatrix(l),l.isEmpty())return this;let e=o+l.rows-1,t=i+l.columns-1;ge(this,o,e,i,t);for(let r=0;r<l.rows;r++)for(let n=0;n<l.columns;n++)this.set(o+r,i+n,l.get(r,n));return this}selection(l,o){ve(this,l),we(this,o);let i=new C(l.length,o.length);for(let e=0;e<l.length;e++){let t=l[e];for(let r=0;r<o.length;r++){let n=o[r];i.set(e,r,this.get(t,n))}}return i}trace(){let l=Math.min(this.rows,this.columns),o=0;for(let i=0;i<l;i++)o+=this.get(i,i);return o}clone(){return this.constructor.copy(this,new C(this.rows,this.columns))}static copy(l,o){for(const[i,e,t]of l.entries())o.set(i,e,t);return o}sum(l){switch(l){case"row":return _i(this);case"column":return gi(this);case void 0:return mi(this);default:throw new Error(`invalid option: ${l}`)}}product(l){switch(l){case"row":return vi(this);case"column":return wi(this);case void 0:return yi(this);default:throw new Error(`invalid option: ${l}`)}}mean(l){const o=this.sum(l);switch(l){case"row":{for(let i=0;i<this.rows;i++)o[i]/=this.columns;return o}case"column":{for(let i=0;i<this.columns;i++)o[i]/=this.rows;return o}case void 0:return o/this.size;default:throw new Error(`invalid option: ${l}`)}}variance(l,o={}){if(typeof l=="object"&&(o=l,l=void 0),typeof o!="object")throw new TypeError("options must be an object");const{unbiased:i=!0,mean:e=this.mean(l)}=o;if(typeof i!="boolean")throw new TypeError("unbiased must be a boolean");switch(l){case"row":{if(!lt.isAnyArray(e))throw new TypeError("mean must be an array");return Ei(this,i,e)}case"column":{if(!lt.isAnyArray(e))throw new TypeError("mean must be an array");return Si(this,i,e)}case void 0:{if(typeof e!="number")throw new TypeError("mean must be a number");return bi(this,i,e)}default:throw new Error(`invalid option: ${l}`)}}standardDeviation(l,o){typeof l=="object"&&(o=l,l=void 0);const i=this.variance(l,o);if(l===void 0)return Math.sqrt(i);for(let e=0;e<i.length;e++)i[e]=Math.sqrt(i[e]);return i}center(l,o={}){if(typeof l=="object"&&(o=l,l=void 0),typeof o!="object")throw new TypeError("options must be an object");const{center:i=this.mean(l)}=o;switch(l){case"row":{if(!lt.isAnyArray(i))throw new TypeError("center must be an array");return Ti(this,i),this}case"column":{if(!lt.isAnyArray(i))throw new TypeError("center must be an array");return Pi(this,i),this}case void 0:{if(typeof i!="number")throw new TypeError("center must be a number");return Li(this,i),this}default:throw new Error(`invalid option: ${l}`)}}scale(l,o={}){if(typeof l=="object"&&(o=l,l=void 0),typeof o!="object")throw new TypeError("options must be an object");let i=o.scale;switch(l){case"row":{if(i===void 0)i=Mi(this);else if(!lt.isAnyArray(i))throw new TypeError("scale must be an array");return Ri(this,i),this}case"column":{if(i===void 0)i=Ai(this);else if(!lt.isAnyArray(i))throw new TypeError("scale must be an array");return Ii(this,i),this}case void 0:{if(i===void 0)i=xi(this);else if(typeof i!="number")throw new TypeError("scale must be a number");return Ci(this,i),this}default:throw new Error(`invalid option: ${l}`)}}toString(l){return Oe(this,l)}[Symbol.iterator](){return this.entries()}*entries(){for(let l=0;l<this.rows;l++)for(let o=0;o<this.columns;o++)yield[l,o,this.get(l,o)]}*values(){for(let l=0;l<this.rows;l++)for(let o=0;o<this.columns;o++)yield this.get(l,o)}}z.prototype.klass="Matrix";typeof Symbol<"u"&&(z.prototype[Symbol.for("nodejs.util.inspect.custom")]=ci);function Re(d,l){return d-l}function Di(d){return d.every(l=>typeof l=="number")}z.random=z.rand;z.randomInt=z.randInt;z.diagonal=z.diag;z.prototype.diagonal=z.prototype.diag;z.identity=z.eye;z.prototype.negate=z.prototype.neg;z.prototype.tensorProduct=z.prototype.kroneckerProduct;var Bt,me,xt;let C=(xt=class extends z{constructor(o,i){super();le(this,Bt);Te(this,"data");if(xt.isMatrix(o))ue(this,Bt,me).call(this,o.rows,o.columns),xt.copy(o,this);else if(Number.isInteger(o)&&o>=0)ue(this,Bt,me).call(this,o,i);else if(lt.isAnyArray(o)){const e=o;if(o=e.length,i=o?e[0].length:0,typeof i!="number")throw new TypeError("Data must be a 2D array with at least one element");this.data=[];for(let t=0;t<o;t++){if(e[t].length!==i)throw new RangeError("Inconsistent array dimensions");if(!Di(e[t]))throw new TypeError("Input data contains non-numeric values");this.data.push(Float64Array.from(e[t]))}this.rows=o,this.columns=i}else throw new TypeError("First argument must be a positive number or an array")}set(o,i,e){return this.data[o][i]=e,this}get(o,i){return this.data[o][i]}removeRow(o){return ft(this,o),this.data.splice(o,1),this.rows-=1,this}addRow(o,i){return i===void 0&&(i=o,o=this.rows),ft(this,o,!0),i=Float64Array.from(Rt(this,i)),this.data.splice(o,0,i),this.rows+=1,this}removeColumn(o){dt(this,o);for(let i=0;i<this.rows;i++){const e=new Float64Array(this.columns-1);for(let t=0;t<o;t++)e[t]=this.data[i][t];for(let t=o+1;t<this.columns;t++)e[t-1]=this.data[i][t];this.data[i]=e}return this.columns-=1,this}addColumn(o,i){typeof i>"u"&&(i=o,o=this.columns),dt(this,o,!0),i=At(this,i);for(let e=0;e<this.rows;e++){const t=new Float64Array(this.columns+1);let r=0;for(;r<o;r++)t[r]=this.data[e][r];for(t[r++]=i[e];r<this.columns+1;r++)t[r]=this.data[e][r-1];this.data[e]=t}return this.columns+=1,this}},Bt=new WeakSet,me=function(o,i){if(this.data=[],Number.isInteger(i)&&i>=0)for(let e=0;e<o;e++)this.data.push(new Float64Array(i));else throw new TypeError("nColumns must be a positive integer");this.rows=o,this.columns=i},xt);pi(z,C);var ht;const Qt=class Qt extends z{constructor(o){super();le(this,ht,void 0);if(C.isMatrix(o)){if(!o.isSymmetric())throw new TypeError("not symmetric data");qt(this,ht,C.copy(o,new C(o.rows,o.rows)))}else if(Number.isInteger(o)&&o>=0)qt(this,ht,new C(o,o));else if(qt(this,ht,new C(o)),!this.isSymmetric())throw new TypeError("not symmetric data")}get size(){return pt(this,ht).size}get rows(){return pt(this,ht).rows}get columns(){return pt(this,ht).columns}get diagonalSize(){return this.rows}static isSymmetricMatrix(o){return C.isMatrix(o)&&o.klassType==="SymmetricMatrix"}static zeros(o){return new this(o)}static ones(o){return new this(o).fill(1)}clone(){const o=new Qt(this.diagonalSize);for(const[i,e,t]of this.upperRightEntries())o.set(i,e,t);return o}toMatrix(){return new C(this)}get(o,i){return pt(this,ht).get(o,i)}set(o,i,e){return pt(this,ht).set(o,i,e),pt(this,ht).set(i,o,e),this}removeCross(o){return pt(this,ht).removeRow(o),pt(this,ht).removeColumn(o),this}addCross(o,i){i===void 0&&(i=o,o=this.diagonalSize);const e=i.slice();return e.splice(o,1),pt(this,ht).addRow(o,e),pt(this,ht).addColumn(o,i),this}applyMask(o){if(o.length!==this.diagonalSize)throw new RangeError("Mask size do not match with matrix size");const i=[];for(const[e,t]of o.entries())t||i.push(e);i.reverse();for(const e of i)this.removeCross(e);return this}toCompact(){const{diagonalSize:o}=this,i=new Array(o*(o+1)/2);for(let e=0,t=0,r=0;r<i.length;r++)i[r]=this.get(t,e),++e>=o&&(e=++t);return i}static fromCompact(o){const i=o.length,e=(Math.sqrt(8*i+1)-1)/2;if(!Number.isInteger(e))throw new TypeError(`This array is not a compact representation of a Symmetric Matrix, ${JSON.stringify(o)}`);const t=new Qt(e);for(let r=0,n=0,a=0;a<i;a++)t.set(r,n,o[a]),++r>=e&&(r=++n);return t}*upperRightEntries(){for(let o=0,i=0;o<this.diagonalSize;void 0){const e=this.get(o,i);yield[o,i,e],++i>=this.diagonalSize&&(i=++o)}}*upperRightValues(){for(let o=0,i=0;o<this.diagonalSize;void 0)yield this.get(o,i),++i>=this.diagonalSize&&(i=++o)}};ht=new WeakMap;let Tt=Qt;Tt.prototype.klassType="SymmetricMatrix";class $t extends Tt{static isDistanceMatrix(l){return Tt.isSymmetricMatrix(l)&&l.klassSubType==="DistanceMatrix"}constructor(l){if(super(l),!this.isDistance())throw new TypeError("Provided arguments do no produce a distance matrix")}set(l,o,i){return l===o&&(i=0),super.set(l,o,i)}addCross(l,o){return o===void 0&&(o=l,l=this.diagonalSize),o=o.slice(),o[l]=0,super.addCross(l,o)}toSymmetricMatrix(){return new Tt(this)}clone(){const l=new $t(this.diagonalSize);for(const[o,i,e]of this.upperRightEntries())o!==i&&l.set(o,i,e);return l}toCompact(){const{diagonalSize:l}=this,o=(l-1)*l/2,i=new Array(o);for(let e=1,t=0,r=0;r<i.length;r++)i[r]=this.get(t,e),++e>=l&&(e=++t+1);return i}static fromCompact(l){const o=l.length,i=(Math.sqrt(8*o+1)+1)/2;if(!Number.isInteger(i))throw new TypeError(`This array is not a compact representation of a DistanceMatrix, ${JSON.stringify(l)}`);const e=new this(i);for(let t=1,r=0,n=0;n<o;n++)e.set(t,r,l[n]),++t>=i&&(t=++r+1);return e}}$t.prototype.klassSubType="DistanceMatrix";class yt extends z{constructor(l,o,i){super(),this.matrix=l,this.rows=o,this.columns=i}}class Oi extends yt{constructor(l,o){dt(l,o),super(l,l.rows,1),this.column=o}set(l,o,i){return this.matrix.set(l,this.column,i),this}get(l){return this.matrix.get(l,this.column)}}class ki extends yt{constructor(l,o){we(l,o),super(l,l.rows,o.length),this.columnIndices=o}set(l,o,i){return this.matrix.set(l,this.columnIndices[o],i),this}get(l,o){return this.matrix.get(l,this.columnIndices[o])}}class Ni extends yt{constructor(l){super(l,l.rows,l.columns)}set(l,o,i){return this.matrix.set(l,this.columns-o-1,i),this}get(l,o){return this.matrix.get(l,this.columns-o-1)}}class Fi extends yt{constructor(l){super(l,l.rows,l.columns)}set(l,o,i){return this.matrix.set(this.rows-l-1,o,i),this}get(l,o){return this.matrix.get(this.rows-l-1,o)}}class ji extends yt{constructor(l,o){ft(l,o),super(l,1,l.columns),this.row=o}set(l,o,i){return this.matrix.set(this.row,o,i),this}get(l,o){return this.matrix.get(this.row,o)}}class Bi extends yt{constructor(l,o){ve(l,o),super(l,o.length,l.columns),this.rowIndices=o}set(l,o,i){return this.matrix.set(this.rowIndices[l],o,i),this}get(l,o){return this.matrix.get(this.rowIndices[l],o)}}class Ht extends yt{constructor(l,o,i){ve(l,o),we(l,i),super(l,o.length,i.length),this.rowIndices=o,this.columnIndices=i}set(l,o,i){return this.matrix.set(this.rowIndices[l],this.columnIndices[o],i),this}get(l,o){return this.matrix.get(this.rowIndices[l],this.columnIndices[o])}}class Ui extends yt{constructor(l,o,i,e,t){ge(l,o,i,e,t),super(l,i-o+1,t-e+1),this.startRow=o,this.startColumn=e}set(l,o,i){return this.matrix.set(this.startRow+l,this.startColumn+o,i),this}get(l,o){return this.matrix.get(this.startRow+l,this.startColumn+o)}}class qi extends yt{constructor(l){super(l,l.columns,l.rows)}set(l,o,i){return this.matrix.set(o,l,i),this}get(l,o){return this.matrix.get(o,l)}}class ke extends z{constructor(l,o={}){const{rows:i=1}=o;if(l.length%i!==0)throw new Error("the data length is not divisible by the number of rows");super(),this.rows=i,this.columns=l.length/i,this.data=l}set(l,o,i){let e=this._calculateIndex(l,o);return this.data[e]=i,this}get(l,o){let i=this._calculateIndex(l,o);return this.data[i]}_calculateIndex(l,o){return l*this.columns+o}}class ut extends z{constructor(l){super(),this.data=l,this.rows=l.length,this.columns=l[0].length}set(l,o,i){return this.data[l][o]=i,this}get(l,o){return this.data[l][o]}}function Vi(d,l){if(lt.isAnyArray(d))return d[0]&&lt.isAnyArray(d[0])?new ut(d):new ke(d,l);throw new Error("the argument is not an array")}class Zt{constructor(l){l=ut.checkMatrix(l);let o=l.clone(),i=o.rows,e=o.columns,t=new Float64Array(i),r=1,n,a,h,u,c,f,p,_,m;for(n=0;n<i;n++)t[n]=n;for(_=new Float64Array(i),a=0;a<e;a++){for(n=0;n<i;n++)_[n]=o.get(n,a);for(n=0;n<i;n++){for(m=Math.min(n,a),c=0,h=0;h<m;h++)c+=o.get(n,h)*_[h];_[n]-=c,o.set(n,a,_[n])}for(u=a,n=a+1;n<i;n++)Math.abs(_[n])>Math.abs(_[u])&&(u=n);if(u!==a){for(h=0;h<e;h++)f=o.get(u,h),o.set(u,h,o.get(a,h)),o.set(a,h,f);p=t[u],t[u]=t[a],t[a]=p,r=-r}if(a<i&&o.get(a,a)!==0)for(n=a+1;n<i;n++)o.set(n,a,o.get(n,a)/o.get(a,a))}this.LU=o,this.pivotVector=t,this.pivotSign=r}isSingular(){let l=this.LU,o=l.columns;for(let i=0;i<o;i++)if(l.get(i,i)===0)return!0;return!1}solve(l){l=C.checkMatrix(l);let o=this.LU;if(o.rows!==l.rows)throw new Error("Invalid matrix dimensions");if(this.isSingular())throw new Error("LU matrix is singular");let e=l.columns,t=l.subMatrixRow(this.pivotVector,0,e-1),r=o.columns,n,a,h;for(h=0;h<r;h++)for(n=h+1;n<r;n++)for(a=0;a<e;a++)t.set(n,a,t.get(n,a)-t.get(h,a)*o.get(n,h));for(h=r-1;h>=0;h--){for(a=0;a<e;a++)t.set(h,a,t.get(h,a)/o.get(h,h));for(n=0;n<h;n++)for(a=0;a<e;a++)t.set(n,a,t.get(n,a)-t.get(h,a)*o.get(n,h))}return t}get determinant(){let l=this.LU;if(!l.isSquare())throw new Error("Matrix must be square");let o=this.pivotSign,i=l.columns;for(let e=0;e<i;e++)o*=l.get(e,e);return o}get lowerTriangularMatrix(){let l=this.LU,o=l.rows,i=l.columns,e=new C(o,i);for(let t=0;t<o;t++)for(let r=0;r<i;r++)t>r?e.set(t,r,l.get(t,r)):t===r?e.set(t,r,1):e.set(t,r,0);return e}get upperTriangularMatrix(){let l=this.LU,o=l.rows,i=l.columns,e=new C(o,i);for(let t=0;t<o;t++)for(let r=0;r<i;r++)t<=r?e.set(t,r,l.get(t,r)):e.set(t,r,0);return e}get pivotPermutationVector(){return Array.from(this.pivotVector)}}function wt(d,l){let o=0;return Math.abs(d)>Math.abs(l)?(o=l/d,Math.abs(d)*Math.sqrt(1+o*o)):l!==0?(o=d/l,Math.abs(l)*Math.sqrt(1+o*o)):0}class ye{constructor(l){l=ut.checkMatrix(l);let o=l.clone(),i=l.rows,e=l.columns,t=new Float64Array(e),r,n,a,h;for(a=0;a<e;a++){let u=0;for(r=a;r<i;r++)u=wt(u,o.get(r,a));if(u!==0){for(o.get(a,a)<0&&(u=-u),r=a;r<i;r++)o.set(r,a,o.get(r,a)/u);for(o.set(a,a,o.get(a,a)+1),n=a+1;n<e;n++){for(h=0,r=a;r<i;r++)h+=o.get(r,a)*o.get(r,n);for(h=-h/o.get(a,a),r=a;r<i;r++)o.set(r,n,o.get(r,n)+h*o.get(r,a))}}t[a]=-u}this.QR=o,this.Rdiag=t}solve(l){l=C.checkMatrix(l);let o=this.QR,i=o.rows;if(l.rows!==i)throw new Error("Matrix row dimensions must agree");if(!this.isFullRank())throw new Error("Matrix is rank deficient");let e=l.columns,t=l.clone(),r=o.columns,n,a,h,u;for(h=0;h<r;h++)for(a=0;a<e;a++){for(u=0,n=h;n<i;n++)u+=o.get(n,h)*t.get(n,a);for(u=-u/o.get(h,h),n=h;n<i;n++)t.set(n,a,t.get(n,a)+u*o.get(n,h))}for(h=r-1;h>=0;h--){for(a=0;a<e;a++)t.set(h,a,t.get(h,a)/this.Rdiag[h]);for(n=0;n<h;n++)for(a=0;a<e;a++)t.set(n,a,t.get(n,a)-t.get(h,a)*o.get(n,h))}return t.subMatrix(0,r-1,0,e-1)}isFullRank(){let l=this.QR.columns;for(let o=0;o<l;o++)if(this.Rdiag[o]===0)return!1;return!0}get upperTriangularMatrix(){let l=this.QR,o=l.columns,i=new C(o,o),e,t;for(e=0;e<o;e++)for(t=0;t<o;t++)e<t?i.set(e,t,l.get(e,t)):e===t?i.set(e,t,this.Rdiag[e]):i.set(e,t,0);return i}get orthogonalMatrix(){let l=this.QR,o=l.rows,i=l.columns,e=new C(o,i),t,r,n,a;for(n=i-1;n>=0;n--){for(t=0;t<o;t++)e.set(t,n,0);for(e.set(n,n,1),r=n;r<i;r++)if(l.get(n,n)!==0){for(a=0,t=n;t<o;t++)a+=l.get(t,n)*e.get(t,r);for(a=-a/l.get(n,n),t=n;t<o;t++)e.set(t,r,e.get(t,r)+a*l.get(t,n))}}return e}}class Ct{constructor(l,o={}){if(l=ut.checkMatrix(l),l.isEmpty())throw new Error("Matrix must be non-empty");let i=l.rows,e=l.columns;const{computeLeftSingularVectors:t=!0,computeRightSingularVectors:r=!0,autoTranspose:n=!1}=o;let a=!!t,h=!!r,u=!1,c;if(i<e)if(!n)c=l.clone(),console.warn("Computing SVD on a matrix with more columns than rows. Consider enabling autoTranspose");else{c=l.transpose(),i=c.rows,e=c.columns,u=!0;let v=a;a=h,h=v}else c=l.clone();let f=Math.min(i,e),p=Math.min(i+1,e),_=new Float64Array(p),m=new C(i,f),w=new C(e,e),g=new Float64Array(e),y=new Float64Array(i),E=new Float64Array(p);for(let v=0;v<p;v++)E[v]=v;let P=Math.min(i-1,e),M=Math.max(0,Math.min(e-2,i)),x=Math.max(P,M);for(let v=0;v<x;v++){if(v<P){_[v]=0;for(let S=v;S<i;S++)_[v]=wt(_[v],c.get(S,v));if(_[v]!==0){c.get(v,v)<0&&(_[v]=-_[v]);for(let S=v;S<i;S++)c.set(S,v,c.get(S,v)/_[v]);c.set(v,v,c.get(v,v)+1)}_[v]=-_[v]}for(let S=v+1;S<e;S++){if(v<P&&_[v]!==0){let L=0;for(let b=v;b<i;b++)L+=c.get(b,v)*c.get(b,S);L=-L/c.get(v,v);for(let b=v;b<i;b++)c.set(b,S,c.get(b,S)+L*c.get(b,v))}g[S]=c.get(v,S)}if(a&&v<P)for(let S=v;S<i;S++)m.set(S,v,c.get(S,v));if(v<M){g[v]=0;for(let S=v+1;S<e;S++)g[v]=wt(g[v],g[S]);if(g[v]!==0){g[v+1]<0&&(g[v]=0-g[v]);for(let S=v+1;S<e;S++)g[S]/=g[v];g[v+1]+=1}if(g[v]=-g[v],v+1<i&&g[v]!==0){for(let S=v+1;S<i;S++)y[S]=0;for(let S=v+1;S<i;S++)for(let L=v+1;L<e;L++)y[S]+=g[L]*c.get(S,L);for(let S=v+1;S<e;S++){let L=-g[S]/g[v+1];for(let b=v+1;b<i;b++)c.set(b,S,c.get(b,S)+L*y[b])}}if(h)for(let S=v+1;S<e;S++)w.set(S,v,g[S])}}let T=Math.min(e,i+1);if(P<e&&(_[P]=c.get(P,P)),i<T&&(_[T-1]=0),M+1<T&&(g[M]=c.get(M,T-1)),g[T-1]=0,a){for(let v=P;v<f;v++){for(let S=0;S<i;S++)m.set(S,v,0);m.set(v,v,1)}for(let v=P-1;v>=0;v--)if(_[v]!==0){for(let S=v+1;S<f;S++){let L=0;for(let b=v;b<i;b++)L+=m.get(b,v)*m.get(b,S);L=-L/m.get(v,v);for(let b=v;b<i;b++)m.set(b,S,m.get(b,S)+L*m.get(b,v))}for(let S=v;S<i;S++)m.set(S,v,-m.get(S,v));m.set(v,v,1+m.get(v,v));for(let S=0;S<v-1;S++)m.set(S,v,0)}else{for(let S=0;S<i;S++)m.set(S,v,0);m.set(v,v,1)}}if(h)for(let v=e-1;v>=0;v--){if(v<M&&g[v]!==0)for(let S=v+1;S<e;S++){let L=0;for(let b=v+1;b<e;b++)L+=w.get(b,v)*w.get(b,S);L=-L/w.get(v+1,v);for(let b=v+1;b<e;b++)w.set(b,S,w.get(b,S)+L*w.get(b,v))}for(let S=0;S<e;S++)w.set(S,v,0);w.set(v,v,1)}let R=T-1,k=Number.EPSILON;for(;T>0;){let v,S;for(v=T-2;v>=-1&&v!==-1;v--){const L=Number.MIN_VALUE+k*Math.abs(_[v]+Math.abs(_[v+1]));if(Math.abs(g[v])<=L||Number.isNaN(g[v])){g[v]=0;break}}if(v===T-2)S=4;else{let L;for(L=T-1;L>=v&&L!==v;L--){let b=(L!==T?Math.abs(g[L]):0)+(L!==v+1?Math.abs(g[L-1]):0);if(Math.abs(_[L])<=k*b){_[L]=0;break}}L===v?S=3:L===T-1?S=1:(S=2,v=L)}switch(v++,S){case 1:{let L=g[T-2];g[T-2]=0;for(let b=T-2;b>=v;b--){let G=wt(_[b],L),H=_[b]/G,Y=L/G;if(_[b]=G,b!==v&&(L=-Y*g[b-1],g[b-1]=H*g[b-1]),h)for(let V=0;V<e;V++)G=H*w.get(V,b)+Y*w.get(V,T-1),w.set(V,T-1,-Y*w.get(V,b)+H*w.get(V,T-1)),w.set(V,b,G)}break}case 2:{let L=g[v-1];g[v-1]=0;for(let b=v;b<T;b++){let G=wt(_[b],L),H=_[b]/G,Y=L/G;if(_[b]=G,L=-Y*g[b],g[b]=H*g[b],a)for(let V=0;V<i;V++)G=H*m.get(V,b)+Y*m.get(V,v-1),m.set(V,v-1,-Y*m.get(V,b)+H*m.get(V,v-1)),m.set(V,b,G)}break}case 3:{const L=Math.max(Math.abs(_[T-1]),Math.abs(_[T-2]),Math.abs(g[T-2]),Math.abs(_[v]),Math.abs(g[v])),b=_[T-1]/L,G=_[T-2]/L,H=g[T-2]/L,Y=_[v]/L,V=g[v]/L,W=((G+b)*(G-b)+H*H)/2,it=b*H*(b*H);let X=0;(W!==0||it!==0)&&(W<0?X=0-Math.sqrt(W*W+it):X=Math.sqrt(W*W+it),X=it/(W+X));let j=(Y+b)*(Y-b)+X,at=Y*V;for(let U=v;U<T-1;U++){let tt=wt(j,at);tt===0&&(tt=Number.MIN_VALUE);let st=j/tt,J=at/tt;if(U!==v&&(g[U-1]=tt),j=st*_[U]+J*g[U],g[U]=st*g[U]-J*_[U],at=J*_[U+1],_[U+1]=st*_[U+1],h)for(let K=0;K<e;K++)tt=st*w.get(K,U)+J*w.get(K,U+1),w.set(K,U+1,-J*w.get(K,U)+st*w.get(K,U+1)),w.set(K,U,tt);if(tt=wt(j,at),tt===0&&(tt=Number.MIN_VALUE),st=j/tt,J=at/tt,_[U]=tt,j=st*g[U]+J*_[U+1],_[U+1]=-J*g[U]+st*_[U+1],at=J*g[U+1],g[U+1]=st*g[U+1],a&&U<i-1)for(let K=0;K<i;K++)tt=st*m.get(K,U)+J*m.get(K,U+1),m.set(K,U+1,-J*m.get(K,U)+st*m.get(K,U+1)),m.set(K,U,tt)}g[T-2]=j;break}case 4:{if(_[v]<=0&&(_[v]=_[v]<0?-_[v]:0,h))for(let L=0;L<=R;L++)w.set(L,v,-w.get(L,v));for(;v<R&&!(_[v]>=_[v+1]);){let L=_[v];if(_[v]=_[v+1],_[v+1]=L,h&&v<e-1)for(let b=0;b<e;b++)L=w.get(b,v+1),w.set(b,v+1,w.get(b,v)),w.set(b,v,L);if(a&&v<i-1)for(let b=0;b<i;b++)L=m.get(b,v+1),m.set(b,v+1,m.get(b,v)),m.set(b,v,L);v++}T--;break}}}if(u){let v=w;w=m,m=v}this.m=i,this.n=e,this.s=_,this.U=m,this.V=w}solve(l){let o=l,i=this.threshold,e=this.s.length,t=C.zeros(e,e);for(let f=0;f<e;f++)Math.abs(this.s[f])<=i?t.set(f,f,0):t.set(f,f,1/this.s[f]);let r=this.U,n=this.rightSingularVectors,a=n.mmul(t),h=n.rows,u=r.rows,c=C.zeros(h,u);for(let f=0;f<h;f++)for(let p=0;p<u;p++){let _=0;for(let m=0;m<e;m++)_+=a.get(f,m)*r.get(p,m);c.set(f,p,_)}return c.mmul(o)}solveForDiagonal(l){return this.solve(C.diag(l))}inverse(){let l=this.V,o=this.threshold,i=l.rows,e=l.columns,t=new C(i,this.s.length);for(let u=0;u<i;u++)for(let c=0;c<e;c++)Math.abs(this.s[c])>o&&t.set(u,c,l.get(u,c)/this.s[c]);let r=this.U,n=r.rows,a=r.columns,h=new C(i,n);for(let u=0;u<i;u++)for(let c=0;c<n;c++){let f=0;for(let p=0;p<a;p++)f+=t.get(u,p)*r.get(c,p);h.set(u,c,f)}return h}get condition(){return this.s[0]/this.s[Math.min(this.m,this.n)-1]}get norm2(){return this.s[0]}get rank(){let l=Math.max(this.m,this.n)*this.s[0]*Number.EPSILON,o=0,i=this.s;for(let e=0,t=i.length;e<t;e++)i[e]>l&&o++;return o}get diagonal(){return Array.from(this.s)}get threshold(){return Number.EPSILON/2*Math.max(this.m,this.n)*this.s[0]}get leftSingularVectors(){return this.U}get rightSingularVectors(){return this.V}get diagonalMatrix(){return C.diag(this.s)}}function Xi(d,l=!1){return d=ut.checkMatrix(d),l?new Ct(d).inverse():Ne(d,C.eye(d.rows))}function Ne(d,l,o=!1){return d=ut.checkMatrix(d),l=ut.checkMatrix(l),o?new Ct(d).solve(l):d.isSquare()?new Zt(d).solve(l):new ye(d).solve(l)}function Yt(d){if(d=C.checkMatrix(d),d.isSquare()){if(d.columns===0)return 1;let l,o,i,e;if(d.columns===2)return l=d.get(0,0),o=d.get(0,1),i=d.get(1,0),e=d.get(1,1),l*e-o*i;if(d.columns===3){let t,r,n;return t=new Ht(d,[1,2],[1,2]),r=new Ht(d,[1,2],[0,2]),n=new Ht(d,[1,2],[0,1]),l=d.get(0,0),o=d.get(0,1),i=d.get(0,2),l*Yt(t)-o*Yt(r)+i*Yt(n)}else return new Zt(d).determinant}else throw Error("determinant can only be calculated for a square matrix")}function Gi(d,l){let o=[];for(let i=0;i<d;i++)i!==l&&o.push(i);return o}function Hi(d,l,o,i=1e-9,e=1e-9){if(d>e)return new Array(l.rows+1).fill(0);{let t=l.addRow(o,[0]);for(let r=0;r<t.rows;r++)Math.abs(t.get(r,0))<i&&t.set(r,0,0);return t.to1DArray()}}function Yi(d,l={}){const{thresholdValue:o=1e-9,thresholdError:i=1e-9}=l;d=C.checkMatrix(d);let e=d.rows,t=new C(e,e);for(let r=0;r<e;r++){let n=C.columnVector(d.getRow(r)),a=d.subMatrixRow(Gi(e,r)).transpose(),u=new Ct(a).solve(n),c=C.sub(n,a.mmul(u)).abs().max();t.setRow(r,Hi(c,u,r,o,i))}return t}function zi(d,l=Number.EPSILON){if(d=C.checkMatrix(d),d.isEmpty())return d.transpose();let o=new Ct(d,{autoTranspose:!0}),i=o.leftSingularVectors,e=o.rightSingularVectors,t=o.diagonal;for(let r=0;r<t.length;r++)Math.abs(t[r])>l?t[r]=1/t[r]:t[r]=0;return e.mmul(C.diag(t).mmul(i.transpose()))}function Wi(d,l=d,o={}){d=new C(d);let i=!1;if(typeof l=="object"&&!C.isMatrix(l)&&!lt.isAnyArray(l)?(o=l,l=d,i=!0):l=new C(l),d.rows!==l.rows)throw new TypeError("Both matrices must have the same number of rows");const{center:e=!0}=o;e&&(d=d.center("column"),i||(l=l.center("column")));const t=d.transpose().mmul(l);for(let r=0;r<t.rows;r++)for(let n=0;n<t.columns;n++)t.set(r,n,t.get(r,n)*(1/(d.rows-1)));return t}function Ji(d,l=d,o={}){d=new C(d);let i=!1;if(typeof l=="object"&&!C.isMatrix(l)&&!lt.isAnyArray(l)?(o=l,l=d,i=!0):l=new C(l),d.rows!==l.rows)throw new TypeError("Both matrices must have the same number of rows");const{center:e=!0,scale:t=!0}=o;e&&(d.center("column"),i||l.center("column")),t&&(d.scale("column"),i||l.scale("column"));const r=d.standardDeviation("column",{unbiased:!0}),n=i?r:l.standardDeviation("column",{unbiased:!0}),a=d.transpose().mmul(l);for(let h=0;h<a.rows;h++)for(let u=0;u<a.columns;u++)a.set(h,u,a.get(h,u)*(1/(r[h]*n[u]))*(1/(d.rows-1)));return a}class Fe{constructor(l,o={}){const{assumeSymmetric:i=!1}=o;if(l=ut.checkMatrix(l),!l.isSquare())throw new Error("Matrix is not a square matrix");if(l.isEmpty())throw new Error("Matrix must be non-empty");let e=l.columns,t=new C(e,e),r=new Float64Array(e),n=new Float64Array(e),a=l,h,u,c=!1;if(i?c=!0:c=l.isSymmetric(),c){for(h=0;h<e;h++)for(u=0;u<e;u++)t.set(h,u,a.get(h,u));Qi(e,n,r,t),Ki(e,n,r,t)}else{let f=new C(e,e),p=new Float64Array(e);for(u=0;u<e;u++)for(h=0;h<e;h++)f.set(h,u,a.get(h,u));$i(e,f,p,t),Zi(e,n,r,t,f)}this.n=e,this.e=n,this.d=r,this.V=t}get realEigenvalues(){return Array.from(this.d)}get imaginaryEigenvalues(){return Array.from(this.e)}get eigenvectorMatrix(){return this.V}get diagonalMatrix(){let l=this.n,o=this.e,i=this.d,e=new C(l,l),t,r;for(t=0;t<l;t++){for(r=0;r<l;r++)e.set(t,r,0);e.set(t,t,i[t]),o[t]>0?e.set(t,t+1,o[t]):o[t]<0&&e.set(t,t-1,o[t])}return e}}function Qi(d,l,o,i){let e,t,r,n,a,h,u,c;for(a=0;a<d;a++)o[a]=i.get(d-1,a);for(n=d-1;n>0;n--){for(c=0,r=0,h=0;h<n;h++)c=c+Math.abs(o[h]);if(c===0)for(l[n]=o[n-1],a=0;a<n;a++)o[a]=i.get(n-1,a),i.set(n,a,0),i.set(a,n,0);else{for(h=0;h<n;h++)o[h]/=c,r+=o[h]*o[h];for(e=o[n-1],t=Math.sqrt(r),e>0&&(t=-t),l[n]=c*t,r=r-e*t,o[n-1]=e-t,a=0;a<n;a++)l[a]=0;for(a=0;a<n;a++){for(e=o[a],i.set(a,n,e),t=l[a]+i.get(a,a)*e,h=a+1;h<=n-1;h++)t+=i.get(h,a)*o[h],l[h]+=i.get(h,a)*e;l[a]=t}for(e=0,a=0;a<n;a++)l[a]/=r,e+=l[a]*o[a];for(u=e/(r+r),a=0;a<n;a++)l[a]-=u*o[a];for(a=0;a<n;a++){for(e=o[a],t=l[a],h=a;h<=n-1;h++)i.set(h,a,i.get(h,a)-(e*l[h]+t*o[h]));o[a]=i.get(n-1,a),i.set(n,a,0)}}o[n]=r}for(n=0;n<d-1;n++){if(i.set(d-1,n,i.get(n,n)),i.set(n,n,1),r=o[n+1],r!==0){for(h=0;h<=n;h++)o[h]=i.get(h,n+1)/r;for(a=0;a<=n;a++){for(t=0,h=0;h<=n;h++)t+=i.get(h,n+1)*i.get(h,a);for(h=0;h<=n;h++)i.set(h,a,i.get(h,a)-t*o[h])}}for(h=0;h<=n;h++)i.set(h,n+1,0)}for(a=0;a<d;a++)o[a]=i.get(d-1,a),i.set(d-1,a,0);i.set(d-1,d-1,1),l[0]=0}function Ki(d,l,o,i){let e,t,r,n,a,h,u,c,f,p,_,m,w,g,y,E;for(r=1;r<d;r++)l[r-1]=l[r];l[d-1]=0;let P=0,M=0,x=Number.EPSILON;for(h=0;h<d;h++){for(M=Math.max(M,Math.abs(o[h])+Math.abs(l[h])),u=h;u<d&&!(Math.abs(l[u])<=x*M);)u++;if(u>h)do{for(e=o[h],c=(o[h+1]-e)/(2*l[h]),f=wt(c,1),c<0&&(f=-f),o[h]=l[h]/(c+f),o[h+1]=l[h]*(c+f),p=o[h+1],t=e-o[h],r=h+2;r<d;r++)o[r]-=t;for(P=P+t,c=o[u],_=1,m=_,w=_,g=l[h+1],y=0,E=0,r=u-1;r>=h;r--)for(w=m,m=_,E=y,e=_*l[r],t=_*c,f=wt(c,l[r]),l[r+1]=y*f,y=l[r]/f,_=c/f,c=_*o[r]-y*e,o[r+1]=t+y*(_*e+y*o[r]),a=0;a<d;a++)t=i.get(a,r+1),i.set(a,r+1,y*i.get(a,r)+_*t),i.set(a,r,_*i.get(a,r)-y*t);c=-y*E*w*g*l[h]/p,l[h]=y*c,o[h]=_*c}while(Math.abs(l[h])>x*M);o[h]=o[h]+P,l[h]=0}for(r=0;r<d-1;r++){for(a=r,c=o[r],n=r+1;n<d;n++)o[n]<c&&(a=n,c=o[n]);if(a!==r)for(o[a]=o[r],o[r]=c,n=0;n<d;n++)c=i.get(n,r),i.set(n,r,i.get(n,a)),i.set(n,a,c)}}function $i(d,l,o,i){let e=0,t=d-1,r,n,a,h,u,c,f;for(c=e+1;c<=t-1;c++){for(f=0,h=c;h<=t;h++)f=f+Math.abs(l.get(h,c-1));if(f!==0){for(a=0,h=t;h>=c;h--)o[h]=l.get(h,c-1)/f,a+=o[h]*o[h];for(n=Math.sqrt(a),o[c]>0&&(n=-n),a=a-o[c]*n,o[c]=o[c]-n,u=c;u<d;u++){for(r=0,h=t;h>=c;h--)r+=o[h]*l.get(h,u);for(r=r/a,h=c;h<=t;h++)l.set(h,u,l.get(h,u)-r*o[h])}for(h=0;h<=t;h++){for(r=0,u=t;u>=c;u--)r+=o[u]*l.get(h,u);for(r=r/a,u=c;u<=t;u++)l.set(h,u,l.get(h,u)-r*o[u])}o[c]=f*o[c],l.set(c,c-1,f*n)}}for(h=0;h<d;h++)for(u=0;u<d;u++)i.set(h,u,h===u?1:0);for(c=t-1;c>=e+1;c--)if(l.get(c,c-1)!==0){for(h=c+1;h<=t;h++)o[h]=l.get(h,c-1);for(u=c;u<=t;u++){for(n=0,h=c;h<=t;h++)n+=o[h]*i.get(h,u);for(n=n/o[c]/l.get(c,c-1),h=c;h<=t;h++)i.set(h,u,i.get(h,u)+n*o[h])}}}function Zi(d,l,o,i,e){let t=d-1,r=0,n=d-1,a=Number.EPSILON,h=0,u=0,c=0,f=0,p=0,_=0,m=0,w=0,g,y,E,P,M,x,T,R,k,v,S,L,b,G,H;for(g=0;g<d;g++)for((g<r||g>n)&&(o[g]=e.get(g,g),l[g]=0),y=Math.max(g-1,0);y<d;y++)u=u+Math.abs(e.get(g,y));for(;t>=r;){for(P=t;P>r&&(_=Math.abs(e.get(P-1,P-1))+Math.abs(e.get(P,P)),_===0&&(_=u),!(Math.abs(e.get(P,P-1))<a*_));)P--;if(P===t)e.set(t,t,e.get(t,t)+h),o[t]=e.get(t,t),l[t]=0,t--,w=0;else if(P===t-1){if(T=e.get(t,t-1)*e.get(t-1,t),c=(e.get(t-1,t-1)-e.get(t,t))/2,f=c*c+T,m=Math.sqrt(Math.abs(f)),e.set(t,t,e.get(t,t)+h),e.set(t-1,t-1,e.get(t-1,t-1)+h),R=e.get(t,t),f>=0){for(m=c>=0?c+m:c-m,o[t-1]=R+m,o[t]=o[t-1],m!==0&&(o[t]=R-T/m),l[t-1]=0,l[t]=0,R=e.get(t,t-1),_=Math.abs(R)+Math.abs(m),c=R/_,f=m/_,p=Math.sqrt(c*c+f*f),c=c/p,f=f/p,y=t-1;y<d;y++)m=e.get(t-1,y),e.set(t-1,y,f*m+c*e.get(t,y)),e.set(t,y,f*e.get(t,y)-c*m);for(g=0;g<=t;g++)m=e.get(g,t-1),e.set(g,t-1,f*m+c*e.get(g,t)),e.set(g,t,f*e.get(g,t)-c*m);for(g=r;g<=n;g++)m=i.get(g,t-1),i.set(g,t-1,f*m+c*i.get(g,t)),i.set(g,t,f*i.get(g,t)-c*m)}else o[t-1]=R+c,o[t]=R+c,l[t-1]=m,l[t]=-m;t=t-2,w=0}else{if(R=e.get(t,t),k=0,T=0,P<t&&(k=e.get(t-1,t-1),T=e.get(t,t-1)*e.get(t-1,t)),w===10){for(h+=R,g=r;g<=t;g++)e.set(g,g,e.get(g,g)-R);_=Math.abs(e.get(t,t-1))+Math.abs(e.get(t-1,t-2)),R=k=.75*_,T=-.4375*_*_}if(w===30&&(_=(k-R)/2,_=_*_+T,_>0)){for(_=Math.sqrt(_),k<R&&(_=-_),_=R-T/((k-R)/2+_),g=r;g<=t;g++)e.set(g,g,e.get(g,g)-_);h+=_,R=k=T=.964}for(w=w+1,M=t-2;M>=P&&(m=e.get(M,M),p=R-m,_=k-m,c=(p*_-T)/e.get(M+1,M)+e.get(M,M+1),f=e.get(M+1,M+1)-m-p-_,p=e.get(M+2,M+1),_=Math.abs(c)+Math.abs(f)+Math.abs(p),c=c/_,f=f/_,p=p/_,!(M===P||Math.abs(e.get(M,M-1))*(Math.abs(f)+Math.abs(p))<a*(Math.abs(c)*(Math.abs(e.get(M-1,M-1))+Math.abs(m)+Math.abs(e.get(M+1,M+1))))));)M--;for(g=M+2;g<=t;g++)e.set(g,g-2,0),g>M+2&&e.set(g,g-3,0);for(E=M;E<=t-1&&(G=E!==t-1,E!==M&&(c=e.get(E,E-1),f=e.get(E+1,E-1),p=G?e.get(E+2,E-1):0,R=Math.abs(c)+Math.abs(f)+Math.abs(p),R!==0&&(c=c/R,f=f/R,p=p/R)),R!==0);E++)if(_=Math.sqrt(c*c+f*f+p*p),c<0&&(_=-_),_!==0){for(E!==M?e.set(E,E-1,-_*R):P!==M&&e.set(E,E-1,-e.get(E,E-1)),c=c+_,R=c/_,k=f/_,m=p/_,f=f/c,p=p/c,y=E;y<d;y++)c=e.get(E,y)+f*e.get(E+1,y),G&&(c=c+p*e.get(E+2,y),e.set(E+2,y,e.get(E+2,y)-c*m)),e.set(E,y,e.get(E,y)-c*R),e.set(E+1,y,e.get(E+1,y)-c*k);for(g=0;g<=Math.min(t,E+3);g++)c=R*e.get(g,E)+k*e.get(g,E+1),G&&(c=c+m*e.get(g,E+2),e.set(g,E+2,e.get(g,E+2)-c*p)),e.set(g,E,e.get(g,E)-c),e.set(g,E+1,e.get(g,E+1)-c*f);for(g=r;g<=n;g++)c=R*i.get(g,E)+k*i.get(g,E+1),G&&(c=c+m*i.get(g,E+2),i.set(g,E+2,i.get(g,E+2)-c*p)),i.set(g,E,i.get(g,E)-c),i.set(g,E+1,i.get(g,E+1)-c*f)}}}if(u!==0){for(t=d-1;t>=0;t--)if(c=o[t],f=l[t],f===0)for(P=t,e.set(t,t,1),g=t-1;g>=0;g--){for(T=e.get(g,g)-c,p=0,y=P;y<=t;y++)p=p+e.get(g,y)*e.get(y,t);if(l[g]<0)m=T,_=p;else if(P=g,l[g]===0?e.set(g,t,T!==0?-p/T:-p/(a*u)):(R=e.get(g,g+1),k=e.get(g+1,g),f=(o[g]-c)*(o[g]-c)+l[g]*l[g],x=(R*_-m*p)/f,e.set(g,t,x),e.set(g+1,t,Math.abs(R)>Math.abs(m)?(-p-T*x)/R:(-_-k*x)/m)),x=Math.abs(e.get(g,t)),a*x*x>1)for(y=g;y<=t;y++)e.set(y,t,e.get(y,t)/x)}else if(f<0)for(P=t-1,Math.abs(e.get(t,t-1))>Math.abs(e.get(t-1,t))?(e.set(t-1,t-1,f/e.get(t,t-1)),e.set(t-1,t,-(e.get(t,t)-c)/e.get(t,t-1))):(H=Gt(0,-e.get(t-1,t),e.get(t-1,t-1)-c,f),e.set(t-1,t-1,H[0]),e.set(t-1,t,H[1])),e.set(t,t-1,0),e.set(t,t,1),g=t-2;g>=0;g--){for(v=0,S=0,y=P;y<=t;y++)v=v+e.get(g,y)*e.get(y,t-1),S=S+e.get(g,y)*e.get(y,t);if(T=e.get(g,g)-c,l[g]<0)m=T,p=v,_=S;else if(P=g,l[g]===0?(H=Gt(-v,-S,T,f),e.set(g,t-1,H[0]),e.set(g,t,H[1])):(R=e.get(g,g+1),k=e.get(g+1,g),L=(o[g]-c)*(o[g]-c)+l[g]*l[g]-f*f,b=(o[g]-c)*2*f,L===0&&b===0&&(L=a*u*(Math.abs(T)+Math.abs(f)+Math.abs(R)+Math.abs(k)+Math.abs(m))),H=Gt(R*p-m*v+f*S,R*_-m*S-f*v,L,b),e.set(g,t-1,H[0]),e.set(g,t,H[1]),Math.abs(R)>Math.abs(m)+Math.abs(f)?(e.set(g+1,t-1,(-v-T*e.get(g,t-1)+f*e.get(g,t))/R),e.set(g+1,t,(-S-T*e.get(g,t)-f*e.get(g,t-1))/R)):(H=Gt(-p-k*e.get(g,t-1),-_-k*e.get(g,t),m,f),e.set(g+1,t-1,H[0]),e.set(g+1,t,H[1]))),x=Math.max(Math.abs(e.get(g,t-1)),Math.abs(e.get(g,t))),a*x*x>1)for(y=g;y<=t;y++)e.set(y,t-1,e.get(y,t-1)/x),e.set(y,t,e.get(y,t)/x)}for(g=0;g<d;g++)if(g<r||g>n)for(y=g;y<d;y++)i.set(g,y,e.get(g,y));for(y=d-1;y>=r;y--)for(g=r;g<=n;g++){for(m=0,E=r;E<=Math.min(y,n);E++)m=m+i.get(g,E)*e.get(E,y);i.set(g,y,m)}}}function Gt(d,l,o,i){let e,t;return Math.abs(o)>Math.abs(i)?(e=i/o,t=o+e*i,[(d+e*l)/t,(l-e*d)/t]):(e=o/i,t=i+e*o,[(e*d+l)/t,(e*l-d)/t])}class je{constructor(l){if(l=ut.checkMatrix(l),!l.isSymmetric())throw new Error("Matrix is not symmetric");let o=l,i=o.rows,e=new C(i,i),t=!0,r,n,a;for(n=0;n<i;n++){let h=0;for(a=0;a<n;a++){let u=0;for(r=0;r<a;r++)u+=e.get(a,r)*e.get(n,r);u=(o.get(n,a)-u)/e.get(a,a),e.set(n,a,u),h=h+u*u}for(h=o.get(n,n)-h,t&=h>0,e.set(n,n,Math.sqrt(Math.max(h,0))),a=n+1;a<i;a++)e.set(n,a,0)}this.L=e,this.positiveDefinite=!!t}isPositiveDefinite(){return this.positiveDefinite}solve(l){l=ut.checkMatrix(l);let o=this.L,i=o.rows;if(l.rows!==i)throw new Error("Matrix dimensions do not match");if(this.isPositiveDefinite()===!1)throw new Error("Matrix is not positive definite");let e=l.columns,t=l.clone(),r,n,a;for(a=0;a<i;a++)for(n=0;n<e;n++){for(r=0;r<a;r++)t.set(a,n,t.get(a,n)-t.get(r,n)*o.get(a,r));t.set(a,n,t.get(a,n)/o.get(a,a))}for(a=i-1;a>=0;a--)for(n=0;n<e;n++){for(r=a+1;r<i;r++)t.set(a,n,t.get(a,n)-t.get(r,n)*o.get(r,a));t.set(a,n,t.get(a,n)/o.get(a,a))}return t}get lowerTriangularMatrix(){return this.L}}class Be{constructor(l,o={}){l=ut.checkMatrix(l);let{Y:i}=o;const{scaleScores:e=!1,maxIterations:t=1e3,terminationCriteria:r=1e-10}=o;let n;if(i){if(lt.isAnyArray(i)&&typeof i[0]=="number"?i=C.columnVector(i):i=ut.checkMatrix(i),i.rows!==l.rows)throw new Error("Y should have the same number of rows as X");n=i.getColumnVector(0)}else n=l.getColumnVector(0);let a=1,h,u,c,f;for(let p=0;p<t&&a>r;p++)c=l.transpose().mmul(n).div(n.transpose().mmul(n).get(0,0)),c=c.div(c.norm()),h=l.mmul(c).div(c.transpose().mmul(c).get(0,0)),p>0&&(a=h.clone().sub(f).pow(2).sum()),f=h.clone(),i?(u=i.transpose().mmul(h).div(h.transpose().mmul(h).get(0,0)),u=u.div(u.norm()),n=i.mmul(u).div(u.transpose().mmul(u).get(0,0))):n=h;if(i){let p=l.transpose().mmul(h).div(h.transpose().mmul(h).get(0,0));p=p.div(p.norm());let _=l.clone().sub(h.clone().mmul(p.transpose())),m=n.transpose().mmul(h).div(h.transpose().mmul(h).get(0,0)),w=i.clone().sub(h.clone().mulS(m.get(0,0)).mmul(u.transpose()));this.t=h,this.p=p.transpose(),this.w=c.transpose(),this.q=u,this.u=n,this.s=h.transpose().mmul(h),this.xResidual=_,this.yResidual=w,this.betas=m}else this.w=c.transpose(),this.s=h.transpose().mmul(h).sqrt(),e?this.t=h.clone().div(this.s.get(0,0)):this.t=h,this.xResidual=l.sub(h.mmul(c.transpose()))}}$.AbstractMatrix=z;$.CHO=je;$.CholeskyDecomposition=je;$.DistanceMatrix=$t;$.EVD=Fe;$.EigenvalueDecomposition=Fe;$.LU=Zt;$.LuDecomposition=Zt;var Ue=$.Matrix=C;$.MatrixColumnSelectionView=ki;$.MatrixColumnView=Oi;$.MatrixFlipColumnView=Ni;$.MatrixFlipRowView=Fi;$.MatrixRowSelectionView=Bi;$.MatrixRowView=ji;$.MatrixSelectionView=Ht;$.MatrixSubView=Ui;$.MatrixTransposeView=qi;$.NIPALS=Be;$.Nipals=Be;$.QR=ye;$.QrDecomposition=ye;$.SVD=Ct;$.SingularValueDecomposition=Ct;$.SymmetricMatrix=Tt;$.WrapperMatrix1D=ke;$.WrapperMatrix2D=ut;$.correlation=Ji;$.covariance=Wi;var Ae=$.default=C;$.determinant=Yt;$.inverse=Xi;$.linearDependencies=Yi;$.pseudoInverse=zi;$.solve=Ne;$.wrap=Vi;const ot=Ue;Ae.Matrix&&Ae.Matrix;var Jt={exports:{}};Jt.exports;(function(d,l){var o=Et.createjs=Et.createjs||{};/*!
* CreateJS
* Visit http://createjs.com/ for documentation, updates and examples.
*
* Copyright (c) 2010 gskinner.com, inc.
*
* Permission is hereby granted, free of charge, to any person
* obtaining a copy of this software and associated documentation
* files (the "Software"), to deal in the Software without
* restriction, including without limitation the rights to use,
* copy, modify, merge, publish, distribute, sublicense, and/or sell
* copies of the Software, and to permit persons to whom the
* Software is furnished to do so, subject to the following
* conditions:
*
* The above copyright notice and this permission notice shall be
* included in all copies or substantial portions of the Software.
*
* THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
* EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES
* OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
* NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT
* HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,
* WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
* FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR
* OTHER DEALINGS IN THE SOFTWARE.
*/Et.createjs=Et.createjs||{},o.extend=function(i,e){function t(){this.constructor=i}return t.prototype=e.prototype,i.prototype=new t},o.promote=function(i,e){var t=i.prototype,r=Object.getPrototypeOf&&Object.getPrototypeOf(t)||t.__proto__;if(r){t[(e+="_")+"constructor"]=r.constructor;for(var n in r)t.hasOwnProperty(n)&&typeof r[n]=="function"&&(t[e+n]=r[n])}return i},o.indexOf=function(i,e){for(var t=0,r=i.length;t<r;t++)if(e===i[t])return t;return-1},function(){function i(t,r,n){this.type=t,this.target=null,this.currentTarget=null,this.eventPhase=0,this.bubbles=!!r,this.cancelable=!!n,this.timeStamp=new Date().getTime(),this.defaultPrevented=!1,this.propagationStopped=!1,this.immediatePropagationStopped=!1,this.removed=!1}var e=i.prototype;e.preventDefault=function(){this.defaultPrevented=this.cancelable&&!0},e.stopPropagation=function(){this.propagationStopped=!0},e.stopImmediatePropagation=function(){this.immediatePropagationStopped=this.propagationStopped=!0},e.remove=function(){this.removed=!0},e.clone=function(){return new i(this.type,this.bubbles,this.cancelable)},e.set=function(t){for(var r in t)this[r]=t[r];return this},e.toString=function(){return"[Event (type="+this.type+")]"},o.Event=i}(),function(){function i(){this._listeners=null,this._captureListeners=null}var e=i.prototype;i.initialize=function(t){t.addEventListener=e.addEventListener,t.on=e.on,t.removeEventListener=t.off=e.removeEventListener,t.removeAllEventListeners=e.removeAllEventListeners,t.hasEventListener=e.hasEventListener,t.dispatchEvent=e.dispatchEvent,t._dispatchEvent=e._dispatchEvent,t.willTrigger=e.willTrigger},e.addEventListener=function(t,r,n){var a;n?a=this._captureListeners=this._captureListeners||{}:a=this._listeners=this._listeners||{};var h=a[t];return h&&this.removeEventListener(t,r,n),h=a[t],h?h.push(r):a[t]=[r],r},e.on=function(t,r,n,a,h,u){return r.handleEvent&&(n=n||r,r=r.handleEvent),n=n||this,this.addEventListener(t,function(c){r.call(n,c,h),a&&c.remove()},u)},e.removeEventListener=function(t,r,n){var a=n?this._captureListeners:this._listeners;if(a){var h=a[t];if(h){for(var u=0,c=h.length;u<c;u++)if(h[u]==r){c==1?delete a[t]:h.splice(u,1);break}}}},e.off=e.removeEventListener,e.removeAllEventListeners=function(t){t?(this._listeners&&delete this._listeners[t],this._captureListeners&&delete this._captureListeners[t]):this._listeners=this._captureListeners=null},e.dispatchEvent=function(t,r,n){if(typeof t=="string"){var a=this._listeners;if(!r&&(!a||!a[t]))return!0;t=new o.Event(t,r,n)}else t.target&&t.clone&&(t=t.clone());try{t.target=this}catch{}if(!t.bubbles||!this.parent)this._dispatchEvent(t,2);else{for(var h=this,u=[h];h.parent;)u.push(h=h.parent);var c,f=u.length;for(c=f-1;c>=0&&!t.propagationStopped;c--)u[c]._dispatchEvent(t,1+(c==0));for(c=1;c<f&&!t.propagationStopped;c++)u[c]._dispatchEvent(t,3)}return!t.defaultPrevented},e.hasEventListener=function(t){var r=this._listeners,n=this._captureListeners;return!!(r&&r[t]||n&&n[t])},e.willTrigger=function(t){for(var r=this;r;){if(r.hasEventListener(t))return!0;r=r.parent}return!1},e.toString=function(){return"[EventDispatcher]"},e._dispatchEvent=function(t,r){var n,a=r==1?this._captureListeners:this._listeners;if(t&&a){var h=a[t.type];if(!h||!(n=h.length))return;try{t.currentTarget=this}catch{}try{t.eventPhase=r}catch{}t.removed=!1,h=h.slice();for(var u=0;u<n&&!t.immediatePropagationStopped;u++){var c=h[u];c.handleEvent?c.handleEvent(t):c(t),t.removed&&(this.off(t.type,c,r==1),t.removed=!1)}}},o.EventDispatcher=i}(),function(){function i(){throw"Ticker cannot be instantiated."}i.RAF_SYNCHED="synched",i.RAF="raf",i.TIMEOUT="timeout",i.useRAF=!1,i.timingMode=null,i.maxDelta=0,i.paused=!1,i.removeEventListener=null,i.removeAllEventListeners=null,i.dispatchEvent=null,i.hasEventListener=null,i._listeners=null,o.EventDispatcher.initialize(i),i._addEventListener=i.addEventListener,i.addEventListener=function(){return!i._inited&&i.init(),i._addEventListener.apply(i,arguments)},i._inited=!1,i._startTime=0,i._pausedTime=0,i._ticks=0,i._pausedTicks=0,i._interval=50,i._lastTime=0,i._times=null,i._tickTimes=null,i._timerId=null,i._raf=!0,i.setInterval=function(t){i._interval=t,i._inited&&i._setupTick()},i.getInterval=function(){return i._interval},i.setFPS=function(t){i.setInterval(1e3/t)},i.getFPS=function(){return 1e3/i._interval};try{Object.defineProperties(i,{interval:{get:i.getInterval,set:i.setInterval},framerate:{get:i.getFPS,set:i.setFPS}})}catch(t){console.log(t)}i.init=function(){i._inited||(i._inited=!0,i._times=[],i._tickTimes=[],i._startTime=i._getTime(),i._times.push(i._lastTime=0),i.interval=i._interval)},i.reset=function(){if(i._raf){var t=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.oCancelAnimationFrame||window.msCancelAnimationFrame;t&&t(i._timerId)}else clearTimeout(i._timerId);i.removeAllEventListeners("tick"),i._timerId=i._times=i._tickTimes=null,i._startTime=i._lastTime=i._ticks=0,i._inited=!1},i.getMeasuredTickTime=function(t){var r=0,n=i._tickTimes;if(!n||n.length<1)return-1;t=Math.min(n.length,t||i.getFPS()|0);for(var a=0;a<t;a++)r+=n[a];return r/t},i.getMeasuredFPS=function(t){var r=i._times;return!r||r.length<2?-1:(t=Math.min(r.length-1,t||i.getFPS()|0),1e3/((r[0]-r[t])/t))},i.setPaused=function(t){i.paused=t},i.getPaused=function(){return i.paused},i.getTime=function(t){return i._startTime?i._getTime()-(t?i._pausedTime:0):-1},i.getEventTime=function(t){return i._startTime?(i._lastTime||i._startTime)-(t?i._pausedTime:0):-1},i.getTicks=function(t){return i._ticks-(t?i._pausedTicks:0)},i._handleSynch=function(){i._timerId=null,i._setupTick(),i._getTime()-i._lastTime>=(i._interval-1)*.97&&i._tick()},i._handleRAF=function(){i._timerId=null,i._setupTick(),i._tick()},i._handleTimeout=function(){i._timerId=null,i._setupTick(),i._tick()},i._setupTick=function(){if(i._timerId==null){var t=i.timingMode||i.useRAF&&i.RAF_SYNCHED;if(t==i.RAF_SYNCHED||t==i.RAF){var r=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame;if(r){i._timerId=r(t==i.RAF?i._handleRAF:i._handleSynch),i._raf=!0;return}}i._raf=!1,i._timerId=setTimeout(i._handleTimeout,i._interval)}},i._tick=function(){var t=i.paused,r=i._getTime(),n=r-i._lastTime;if(i._lastTime=r,i._ticks++,t&&(i._pausedTicks++,i._pausedTime+=n),i.hasEventListener("tick")){var a=new o.Event("tick"),h=i.maxDelta;a.delta=h&&n>h?h:n,a.paused=t,a.time=r,a.runTime=r-i._pausedTime,i.dispatchEvent(a)}for(i._tickTimes.unshift(i._getTime()-r);i._tickTimes.length>100;)i._tickTimes.pop();for(i._times.unshift(r);i._times.length>100;)i._times.pop()};var e=window.performance&&(performance.now||performance.mozNow||performance.msNow||performance.oNow||performance.webkitNow);i._getTime=function(){return(e&&e.call(performance)||new Date().getTime())-i._startTime},o.Ticker=i}(),function(){function i(){throw"UID cannot be instantiated"}i._nextID=0,i.get=function(){return i._nextID++},o.UID=i}(),function(){function i(t,r,n,a,h,u,c,f,p,_,m){this.Event_constructor(t,r,n),this.stageX=a,this.stageY=h,this.rawX=p??a,this.rawY=_??h,this.nativeEvent=u,this.pointerID=c,this.primary=!!f,this.relatedTarget=m}var e=o.extend(i,o.Event);e._get_localX=function(){return this.currentTarget.globalToLocal(this.rawX,this.rawY).x},e._get_localY=function(){return this.currentTarget.globalToLocal(this.rawX,this.rawY).y},e._get_isTouch=function(){return this.pointerID!==-1};try{Object.defineProperties(e,{localX:{get:e._get_localX},localY:{get:e._get_localY},isTouch:{get:e._get_isTouch}})}catch{}e.clone=function(){return new i(this.type,this.bubbles,this.cancelable,this.stageX,this.stageY,this.nativeEvent,this.pointerID,this.primary,this.rawX,this.rawY)},e.toString=function(){return"[MouseEvent (type="+this.type+" stageX="+this.stageX+" stageY="+this.stageY+")]"},o.MouseEvent=o.promote(i,"Event")}(),function(){function i(t,r,n,a,h,u){this.setValues(t,r,n,a,h,u)}var e=i.prototype;i.DEG_TO_RAD=Math.PI/180,i.identity=null,e.setValues=function(t,r,n,a,h,u){return this.a=t??1,this.b=r||0,this.c=n||0,this.d=a??1,this.tx=h||0,this.ty=u||0,this},e.append=function(t,r,n,a,h,u){var c=this.a,f=this.b,p=this.c,_=this.d;return(t!=1||r!=0||n!=0||a!=1)&&(this.a=c*t+p*r,this.b=f*t+_*r,this.c=c*n+p*a,this.d=f*n+_*a),this.tx=c*h+p*u+this.tx,this.ty=f*h+_*u+this.ty,this},e.prepend=function(t,r,n,a,h,u){var c=this.a,f=this.c,p=this.tx;return this.a=t*c+n*this.b,this.b=r*c+a*this.b,this.c=t*f+n*this.d,this.d=r*f+a*this.d,this.tx=t*p+n*this.ty+h,this.ty=r*p+a*this.ty+u,this},e.appendMatrix=function(t){return this.append(t.a,t.b,t.c,t.d,t.tx,t.ty)},e.prependMatrix=function(t){return this.prepend(t.a,t.b,t.c,t.d,t.tx,t.ty)},e.appendTransform=function(t,r,n,a,h,u,c,f,p){if(h%360)var _=h*i.DEG_TO_RAD,m=Math.cos(_),w=Math.sin(_);else m=1,w=0;return u||c?(u*=i.DEG_TO_RAD,c*=i.DEG_TO_RAD,this.append(Math.cos(c),Math.sin(c),-Math.sin(u),Math.cos(u),t,r),this.append(m*n,w*n,-w*a,m*a,0,0)):this.append(m*n,w*n,-w*a,m*a,t,r),(f||p)&&(this.tx-=f*this.a+p*this.c,this.ty-=f*this.b+p*this.d),this},e.prependTransform=function(t,r,n,a,h,u,c,f,p){if(h%360)var _=h*i.DEG_TO_RAD,m=Math.cos(_),w=Math.sin(_);else m=1,w=0;return(f||p)&&(this.tx-=f,this.ty-=p),u||c?(u*=i.DEG_TO_RAD,c*=i.DEG_TO_RAD,this.prepend(m*n,w*n,-w*a,m*a,0,0),this.prepend(Math.cos(c),Math.sin(c),-Math.sin(u),Math.cos(u),t,r)):this.prepend(m*n,w*n,-w*a,m*a,t,r),this},e.rotate=function(t){t=t*i.DEG_TO_RAD;var r=Math.cos(t),n=Math.sin(t),a=this.a,h=this.b;return this.a=a*r+this.c*n,this.b=h*r+this.d*n,this.c=-a*n+this.c*r,this.d=-h*n+this.d*r,this},e.skew=function(t,r){return t=t*i.DEG_TO_RAD,r=r*i.DEG_TO_RAD,this.append(Math.cos(r),Math.sin(r),-Math.sin(t),Math.cos(t),0,0),this},e.scale=function(t,r){return this.a*=t,this.b*=t,this.c*=r,this.d*=r,this},e.translate=function(t,r){return this.tx+=this.a*t+this.c*r,this.ty+=this.b*t+this.d*r,this},e.identity=function(){return this.a=this.d=1,this.b=this.c=this.tx=this.ty=0,this},e.invert=function(){var t=this.a,r=this.b,n=this.c,a=this.d,h=this.tx,u=t*a-r*n;return this.a=a/u,this.b=-r/u,this.c=-n/u,this.d=t/u,this.tx=(n*this.ty-a*h)/u,this.ty=-(t*this.ty-r*h)/u,this},e.isIdentity=function(){return this.tx===0&&this.ty===0&&this.a===1&&this.b===0&&this.c===0&&this.d===1},e.equals=function(t){return this.tx===t.tx&&this.ty===t.ty&&this.a===t.a&&this.b===t.b&&this.c===t.c&&this.d===t.d},e.transformPoint=function(t,r,n){return n=n||{},n.x=t*this.a+r*this.c+this.tx,n.y=t*this.b+r*this.d+this.ty,n},e.decompose=function(t){t==null&&(t={}),t.x=this.tx,t.y=this.ty,t.scaleX=Math.sqrt(this.a*this.a+this.b*this.b),t.scaleY=Math.sqrt(this.c*this.c+this.d*this.d);var r=Math.atan2(-this.c,this.d),n=Math.atan2(this.b,this.a),a=Math.abs(1-r/n);return a<1e-5?(t.rotation=n/i.DEG_TO_RAD,this.a<0&&this.d>=0&&(t.rotation+=t.rotation<=0?180:-180),t.skewX=t.skewY=0):(t.skewX=r/i.DEG_TO_RAD,t.skewY=n/i.DEG_TO_RAD),t},e.copy=function(t){return this.setValues(t.a,t.b,t.c,t.d,t.tx,t.ty)},e.clone=function(){return new i(this.a,this.b,this.c,this.d,this.tx,this.ty)},e.toString=function(){return"[Matrix2D (a="+this.a+" b="+this.b+" c="+this.c+" d="+this.d+" tx="+this.tx+" ty="+this.ty+")]"},i.identity=new i,o.Matrix2D=i}(),function(){function i(t,r,n,a,h){this.setValues(t,r,n,a,h)}var e=i.prototype;e.setValues=function(t,r,n,a,h){return this.visible=t==null?!0:!!t,this.alpha=r??1,this.shadow=n,this.compositeOperation=a,this.matrix=h||this.matrix&&this.matrix.identity()||new o.Matrix2D,this},e.append=function(t,r,n,a,h){return this.alpha*=r,this.shadow=n||this.shadow,this.compositeOperation=a||this.compositeOperation,this.visible=this.visible&&t,h&&this.matrix.appendMatrix(h),this},e.prepend=function(t,r,n,a,h){return this.alpha*=r,this.shadow=this.shadow||n,this.compositeOperation=this.compositeOperation||a,this.visible=this.visible&&t,h&&this.matrix.prependMatrix(h),this},e.identity=function(){return this.visible=!0,this.alpha=1,this.shadow=this.compositeOperation=null,this.matrix.identity(),this},e.clone=function(){return new i(this.alpha,this.shadow,this.compositeOperation,this.visible,this.matrix.clone())},o.DisplayProps=i}(),function(){function i(t,r){this.setValues(t,r)}var e=i.prototype;e.setValues=function(t,r){return this.x=t||0,this.y=r||0,this},e.copy=function(t){return this.x=t.x,this.y=t.y,this},e.clone=function(){return new i(this.x,this.y)},e.toString=function(){return"[Point (x="+this.x+" y="+this.y+")]"},o.Point=i}(),function(){function i(t,r,n,a){this.setValues(t,r,n,a)}var e=i.prototype;e.setValues=function(t,r,n,a){return this.x=t||0,this.y=r||0,this.width=n||0,this.height=a||0,this},e.extend=function(t,r,n,a){return n=n||0,a=a||0,t+n>this.x+this.width&&(this.width=t+n-this.x),r+a>this.y+this.height&&(this.height=r+a-this.y),t<this.x&&(this.width+=this.x-t,this.x=t),r<this.y&&(this.height+=this.y-r,this.y=r),this},e.pad=function(t,r,n,a){return this.x-=r,this.y-=t,this.width+=r+a,this.height+=t+n,this},e.copy=function(t){return this.setValues(t.x,t.y,t.width,t.height)},e.contains=function(t,r,n,a){return n=n||0,a=a||0,t>=this.x&&t+n<=this.x+this.width&&r>=this.y&&r+a<=this.y+this.height},e.union=function(t){return this.clone().extend(t.x,t.y,t.width,t.height)},e.intersection=function(t){var r=t.x,n=t.y,a=r+t.width,h=n+t.height;return this.x>r&&(r=this.x),this.y>n&&(n=this.y),this.x+this.width<a&&(a=this.x+this.width),this.y+this.height<h&&(h=this.y+this.height),a<=r||h<=n?null:new i(r,n,a-r,h-n)},e.intersects=function(t){return t.x<=this.x+this.width&&this.x<=t.x+t.width&&t.y<=this.y+this.height&&this.y<=t.y+t.height},e.isEmpty=function(){return this.width<=0||this.height<=0},e.clone=function(){return new i(this.x,this.y,this.width,this.height)},e.toString=function(){return"[Rectangle (x="+this.x+" y="+this.y+" width="+this.width+" height="+this.height+")]"},o.Rectangle=i}(),function(){function i(t,r,n,a,h,u,c){t.addEventListener&&(this.target=t,this.overLabel=n??"over",this.outLabel=r??"out",this.downLabel=a??"down",this.play=h,this._isPressed=!1,this._isOver=!1,this._enabled=!1,t.mouseChildren=!1,this.enabled=!0,this.handleEvent({}),u&&(c&&(u.actionsEnabled=!1,u.gotoAndStop&&u.gotoAndStop(c)),t.hitArea=u))}var e=i.prototype;e.setEnabled=function(t){if(t!=this._enabled){var r=this.target;this._enabled=t,t?(r.cursor="pointer",r.addEventListener("rollover",this),r.addEventListener("rollout",this),r.addEventListener("mousedown",this),r.addEventListener("pressup",this),r._reset&&(r.__reset=r._reset,r._reset=this._reset)):(r.cursor=null,r.removeEventListener("rollover",this),r.removeEventListener("rollout",this),r.removeEventListener("mousedown",this),r.removeEventListener("pressup",this),r.__reset&&(r._reset=r.__reset,delete r.__reset))}},e.getEnabled=function(){return this._enabled};try{Object.defineProperties(e,{enabled:{get:e.getEnabled,set:e.setEnabled}})}catch{}e.toString=function(){return"[ButtonHelper]"},e.handleEvent=function(t){var r,n=this.target,a=t.type;a=="mousedown"?(this._isPressed=!0,r=this.downLabel):a=="pressup"?(this._isPressed=!1,r=this._isOver?this.overLabel:this.outLabel):a=="rollover"?(this._isOver=!0,r=this._isPressed?this.downLabel:this.overLabel):(this._isOver=!1,r=this._isPressed?this.overLabel:this.outLabel),this.play?n.gotoAndPlay&&n.gotoAndPlay(r):n.gotoAndStop&&n.gotoAndStop(r)},e._reset=function(){var t=this.paused;this.__reset(),this.paused=t},o.ButtonHelper=i}(),function(){function i(t,r,n,a){this.color=t||"black",this.offsetX=r||0,this.offsetY=n||0,this.blur=a||0}var e=i.prototype;i.identity=new i("transparent",0,0,0),e.toString=function(){return"[Shadow]"},e.clone=function(){return new i(this.color,this.offsetX,this.offsetY,this.blur)},o.Shadow=i}(),function(){function i(t){this.EventDispatcher_constructor(),this.complete=!0,this.framerate=0,this._animations=null,this._frames=null,this._images=null,this._data=null,this._loadCount=0,this._frameHeight=0,this._frameWidth=0,this._numFrames=0,this._regX=0,this._regY=0,this._spacing=0,this._margin=0,this._parseData(t)}var e=o.extend(i,o.EventDispatcher);e.getAnimations=function(){return this._animations.slice()};try{Object.defineProperties(e,{animations:{get:e.getAnimations}})}catch{}e.getNumFrames=function(t){if(t==null)return this._frames?this._frames.length:this._numFrames||0;var r=this._data[t];return r==null?0:r.frames.length},e.getAnimation=function(t){return this._data[t]},e.getFrame=function(t){var r;return this._frames&&(r=this._frames[t])?r:null},e.getFrameBounds=function(t,r){var n=this.getFrame(t);return n?(r||new o.Rectangle).setValues(-n.regX,-n.regY,n.rect.width,n.rect.height):null},e.toString=function(){return"[SpriteSheet]"},e.clone=function(){throw"SpriteSheet cannot be cloned."},e._parseData=function(t){var r,n,a,h;if(t!=null){if(this.framerate=t.framerate||0,t.images&&(n=t.images.length)>0)for(h=this._images=[],r=0;r<n;r++){var u=t.images[r];if(typeof u=="string"){var c=u;u=document.createElement("img"),u.src=c}h.push(u),!u.getContext&&!u.naturalWidth&&(this._loadCount++,this.complete=!1,function(g,y){u.onload=function(){g._handleImageLoad(y)}}(this,c),function(g,y){u.onerror=function(){g._handleImageError(y)}}(this,c))}if(t.frames!=null)if(Array.isArray(t.frames))for(this._frames=[],h=t.frames,r=0,n=h.length;r<n;r++){var f=h[r];this._frames.push({image:this._images[f[4]?f[4]:0],rect:new o.Rectangle(f[0],f[1],f[2],f[3]),regX:f[5]||0,regY:f[6]||0})}else a=t.frames,this._frameWidth=a.width,this._frameHeight=a.height,this._regX=a.regX||0,this._regY=a.regY||0,this._spacing=a.spacing||0,this._margin=a.margin||0,this._numFrames=a.count,this._loadCount==0&&this._calculateFrames();if(this._animations=[],(a=t.animations)!=null){this._data={};var p;for(p in a){var _={name:p},m=a[p];if(typeof m=="number")h=_.frames=[m];else if(Array.isArray(m))if(m.length==1)_.frames=[m[0]];else for(_.speed=m[3],_.next=m[2],h=_.frames=[],r=m[0];r<=m[1];r++)h.push(r);else{_.speed=m.speed,_.next=m.next;var w=m.frames;h=_.frames=typeof w=="number"?[w]:w.slice(0)}(_.next===!0||_.next===void 0)&&(_.next=p),(_.next===!1||h.length<2&&_.next==p)&&(_.next=null),_.speed||(_.speed=1),this._animations.push(p),this._data[p]=_}}}},e._handleImageLoad=function(t){--this._loadCount==0&&(this._calculateFrames(),this.complete=!0,this.dispatchEvent("complete"))},e._handleImageError=function(t){var r=new o.Event("error");r.src=t,this.dispatchEvent(r),--this._loadCount==0&&this.dispatchEvent("complete")},e._calculateFrames=function(){if(!(this._frames||this._frameWidth==0)){this._frames=[];var t=this._numFrames||1e5,r=0,n=this._frameWidth,a=this._frameHeight,h=this._spacing,u=this._margin;t:for(var c=0,f=this._images;c<f.length;c++)for(var p=f[c],_=p.width,m=p.height,w=u;w<=m-u-a;){for(var g=u;g<=_-u-n;){if(r>=t)break t;r++,this._frames.push({image:p,rect:new o.Rectangle(g,w,n,a),regX:this._regX,regY:this._regY}),g+=n+h}w+=a+h}this._numFrames=r}},o.SpriteSheet=o.promote(i,"EventDispatcher")}(),function(){function i(){this.command=null,this._stroke=null,this._strokeStyle=null,this._oldStrokeStyle=null,this._strokeDash=null,this._oldStrokeDash=null,this._strokeIgnoreScale=!1,this._fill=null,this._instructions=[],this._commitIndex=0,this._activeInstructions=[],this._dirty=!1,this._storeIndex=0,this.clear()}var e=i.prototype,t=i;i.getRGB=function(n,a,h,u){return n!=null&&h==null&&(u=a,h=n&255,a=n>>8&255,n=n>>16&255),u==null?"rgb("+n+","+a+","+h+")":"rgba("+n+","+a+","+h+","+u+")"},i.getHSL=function(n,a,h,u){return u==null?"hsl("+n%360+","+a+"%,"+h+"%)":"hsla("+n%360+","+a+"%,"+h+"%,"+u+")"},i.BASE_64={A:0,B:1,C:2,D:3,E:4,F:5,G:6,H:7,I:8,J:9,K:10,L:11,M:12,N:13,O:14,P:15,Q:16,R:17,S:18,T:19,U:20,V:21,W:22,X:23,Y:24,Z:25,a:26,b:27,c:28,d:29,e:30,f:31,g:32,h:33,i:34,j:35,k:36,l:37,m:38,n:39,o:40,p:41,q:42,r:43,s:44,t:45,u:46,v:47,w:48,x:49,y:50,z:51,0:52,1:53,2:54,3:55,4:56,5:57,6:58,7:59,8:60,9:61,"+":62,"/":63},i.STROKE_CAPS_MAP=["butt","round","square"],i.STROKE_JOINTS_MAP=["miter","round","bevel"];var r=o.createCanvas?o.createCanvas():document.createElement("canvas");r.getContext&&(i._ctx=r.getContext("2d"),r.width=r.height=1),e.getInstructions=function(){return this._updateInstructions(),this._instructions};try{Object.defineProperties(e,{instructions:{get:e.getInstructions}})}catch{}e.isEmpty=function(){return!(this._instructions.length||this._activeInstructions.length)},e.draw=function(n,a){this._updateInstructions();for(var h=this._instructions,u=this._storeIndex,c=h.length;u<c;u++)h[u].exec(n,a)},e.drawAsPath=function(n){this._updateInstructions();for(var a,h=this._instructions,u=this._storeIndex,c=h.length;u<c;u++)(a=h[u]).path!==!1&&a.exec(n)},e.moveTo=function(n,a){return this.append(new t.MoveTo(n,a),!0)},e.lineTo=function(n,a){return this.append(new t.LineTo(n,a))},e.arcTo=function(n,a,h,u,c){return this.append(new t.ArcTo(n,a,h,u,c))},e.arc=function(n,a,h,u,c,f){return this.append(new t.Arc(n,a,h,u,c,f))},e.quadraticCurveTo=function(n,a,h,u){return this.append(new t.QuadraticCurveTo(n,a,h,u))},e.bezierCurveTo=function(n,a,h,u,c,f){return this.append(new t.BezierCurveTo(n,a,h,u,c,f))},e.rect=function(n,a,h,u){return this.append(new t.Rect(n,a,h,u))},e.closePath=function(){return this._activeInstructions.length?this.append(new t.ClosePath):this},e.clear=function(){return this._instructions.length=this._activeInstructions.length=this._commitIndex=0,this._strokeStyle=this._oldStrokeStyle=this._stroke=this._fill=this._strokeDash=this._oldStrokeDash=null,this._dirty=this._strokeIgnoreScale=!1,this},e.beginFill=function(n){return this._setFill(n?new t.Fill(n):null)},e.beginLinearGradientFill=function(n,a,h,u,c,f){return this._setFill(new t.Fill().linearGradient(n,a,h,u,c,f))},e.beginRadialGradientFill=function(n,a,h,u,c,f,p,_){return this._setFill(new t.Fill().radialGradient(n,a,h,u,c,f,p,_))},e.beginBitmapFill=function(n,a,h){return this._setFill(new t.Fill(null,h).bitmap(n,a))},e.endFill=function(){return this.beginFill()},e.setStrokeStyle=function(n,a,h,u,c){return this._updateInstructions(!0),this._strokeStyle=this.command=new t.StrokeStyle(n,a,h,u,c),this._stroke&&(this._stroke.ignoreScale=c),this._strokeIgnoreScale=c,this},e.setStrokeDash=function(n,a){return this._updateInstructions(!0),this._strokeDash=this.command=new t.StrokeDash(n,a),this},e.beginStroke=function(n){return this._setStroke(n?new t.Stroke(n):null)},e.beginLinearGradientStroke=function(n,a,h,u,c,f){return this._setStroke(new t.Stroke().linearGradient(n,a,h,u,c,f))},e.beginRadialGradientStroke=function(n,a,h,u,c,f,p,_){return this._setStroke(new t.Stroke().radialGradient(n,a,h,u,c,f,p,_))},e.beginBitmapStroke=function(n,a){return this._setStroke(new t.Stroke().bitmap(n,a))},e.endStroke=function(){return this.beginStroke()},e.curveTo=e.quadraticCurveTo,e.drawRect=e.rect,e.drawRoundRect=function(n,a,h,u,c){return this.drawRoundRectComplex(n,a,h,u,c,c,c,c)},e.drawRoundRectComplex=function(n,a,h,u,c,f,p,_){return this.append(new t.RoundRect(n,a,h,u,c,f,p,_))},e.drawCircle=function(n,a,h){return this.append(new t.Circle(n,a,h))},e.drawEllipse=function(n,a,h,u){return this.append(new t.Ellipse(n,a,h,u))},e.drawPolyStar=function(n,a,h,u,c,f){return this.append(new t.PolyStar(n,a,h,u,c,f))},e.append=function(n,a){return this._activeInstructions.push(n),this.command=n,a||(this._dirty=!0),this},e.decodePath=function(n){for(var a=[this.moveTo,this.lineTo,this.quadraticCurveTo,this.bezierCurveTo,this.closePath],h=[2,2,4,6,0],u=0,c=n.length,f=[],p=0,_=0,m=i.BASE_64;u<c;){var w=n.charAt(u),g=m[w],y=g>>3,E=a[y];if(!E||g&3)throw"bad path data (@"+u+"): "+w;var P=h[y];y||(p=_=0),f.length=0,u++;for(var M=(g>>2&1)+2,x=0;x<P;x++){var T=m[n.charAt(u)],R=T>>5?-1:1;T=(T&31)<<6|m[n.charAt(u+1)],M==3&&(T=T<<6|m[n.charAt(u+2)]),T=R*T/10,x%2?p=T+=p:_=T+=_,f[x]=T,u+=M}E.apply(this,f)}return this},e.store=function(){return this._updateInstructions(!0),this._storeIndex=this._instructions.length,this},e.unstore=function(){return this._storeIndex=0,this},e.clone=function(){var n=new i;return n.command=this.command,n._stroke=this._stroke,n._strokeStyle=this._strokeStyle,n._strokeDash=this._strokeDash,n._strokeIgnoreScale=this._strokeIgnoreScale,n._fill=this._fill,n._instructions=this._instructions.slice(),n._commitIndex=this._commitIndex,n._activeInstructions=this._activeInstructions.slice(),n._dirty=this._dirty,n._storeIndex=this._storeIndex,n},e.toString=function(){return"[Graphics]"},e.mt=e.moveTo,e.lt=e.lineTo,e.at=e.arcTo,e.bt=e.bezierCurveTo,e.qt=e.quadraticCurveTo,e.a=e.arc,e.r=e.rect,e.cp=e.closePath,e.c=e.clear,e.f=e.beginFill,e.lf=e.beginLinearGradientFill,e.rf=e.beginRadialGradientFill,e.bf=e.beginBitmapFill,e.ef=e.endFill,e.ss=e.setStrokeStyle,e.sd=e.setStrokeDash,e.s=e.beginStroke,e.ls=e.beginLinearGradientStroke,e.rs=e.beginRadialGradientStroke,e.bs=e.beginBitmapStroke,e.es=e.endStroke,e.dr=e.drawRect,e.rr=e.drawRoundRect,e.rc=e.drawRoundRectComplex,e.dc=e.drawCircle,e.de=e.drawEllipse,e.dp=e.drawPolyStar,e.p=e.decodePath,e._updateInstructions=function(n){var a=this._instructions,h=this._activeInstructions,u=this._commitIndex;if(this._dirty&&h.length){a.length=u,a.push(i.beginCmd);var c=h.length,f=a.length;a.length=f+c;for(var p=0;p<c;p++)a[p+f]=h[p];this._fill&&a.push(this._fill),this._stroke&&(this._strokeDash!==this._oldStrokeDash&&(this._oldStrokeDash=this._strokeDash,a.push(this._strokeDash)),this._strokeStyle!==this._oldStrokeStyle&&(this._oldStrokeStyle=this._strokeStyle,a.push(this._strokeStyle)),a.push(this._stroke)),this._dirty=!1}n&&(h.length=0,this._commitIndex=a.length)},e._setFill=function(n){return this._updateInstructions(!0),this.command=this._fill=n,this},e._setStroke=function(n){return this._updateInstructions(!0),(this.command=this._stroke=n)&&(n.ignoreScale=this._strokeIgnoreScale),this},(t.LineTo=function(n,a){this.x=n,this.y=a}).prototype.exec=function(n){n.lineTo(this.x,this.y)},(t.MoveTo=function(n,a){this.x=n,this.y=a}).prototype.exec=function(n){n.moveTo(this.x,this.y)},(t.ArcTo=function(n,a,h,u,c){this.x1=n,this.y1=a,this.x2=h,this.y2=u,this.radius=c}).prototype.exec=function(n){n.arcTo(this.x1,this.y1,this.x2,this.y2,this.radius)},(t.Arc=function(n,a,h,u,c,f){this.x=n,this.y=a,this.radius=h,this.startAngle=u,this.endAngle=c,this.anticlockwise=!!f}).prototype.exec=function(n){n.arc(this.x,this.y,this.radius,this.startAngle,this.endAngle,this.anticlockwise)},(t.QuadraticCurveTo=function(n,a,h,u){this.cpx=n,this.cpy=a,this.x=h,this.y=u}).prototype.exec=function(n){n.quadraticCurveTo(this.cpx,this.cpy,this.x,this.y)},(t.BezierCurveTo=function(n,a,h,u,c,f){this.cp1x=n,this.cp1y=a,this.cp2x=h,this.cp2y=u,this.x=c,this.y=f}).prototype.exec=function(n){n.bezierCurveTo(this.cp1x,this.cp1y,this.cp2x,this.cp2y,this.x,this.y)},(t.Rect=function(n,a,h,u){this.x=n,this.y=a,this.w=h,this.h=u}).prototype.exec=function(n){n.rect(this.x,this.y,this.w,this.h)},(t.ClosePath=function(){}).prototype.exec=function(n){n.closePath()},(t.BeginPath=function(){}).prototype.exec=function(n){n.beginPath()},e=(t.Fill=function(n,a){this.style=n,this.matrix=a}).prototype,e.exec=function(n){if(this.style){n.fillStyle=this.style;var a=this.matrix;a&&(n.save(),n.transform(a.a,a.b,a.c,a.d,a.tx,a.ty)),n.fill(),a&&n.restore()}},e.linearGradient=function(n,a,h,u,c,f){for(var p=this.style=i._ctx.createLinearGradient(h,u,c,f),_=0,m=n.length;_<m;_++)p.addColorStop(a[_],n[_]);return p.props={colors:n,ratios:a,x0:h,y0:u,x1:c,y1:f,type:"linear"},this},e.radialGradient=function(n,a,h,u,c,f,p,_){for(var m=this.style=i._ctx.createRadialGradient(h,u,c,f,p,_),w=0,g=n.length;w<g;w++)m.addColorStop(a[w],n[w]);return m.props={colors:n,ratios:a,x0:h,y0:u,r0:c,x1:f,y1:p,r1:_,type:"radial"},this},e.bitmap=function(n,a){if(n.naturalWidth||n.getContext||n.readyState>=2){var h=this.style=i._ctx.createPattern(n,a||"");h.props={image:n,repetition:a,type:"bitmap"}}return this},e.path=!1,e=(t.Stroke=function(n,a){this.style=n,this.ignoreScale=a}).prototype,e.exec=function(n){this.style&&(n.strokeStyle=this.style,this.ignoreScale&&(n.save(),n.setTransform(1,0,0,1,0,0)),n.stroke(),this.ignoreScale&&n.restore())},e.linearGradient=t.Fill.prototype.linearGradient,e.radialGradient=t.Fill.prototype.radialGradient,e.bitmap=t.Fill.prototype.bitmap,e.path=!1,e=(t.StrokeStyle=function(n,a,h,u,c){this.width=n,this.caps=a,this.joints=h,this.miterLimit=u,this.ignoreScale=c}).prototype,e.exec=function(n){n.lineWidth=this.width==null?"1":this.width,n.lineCap=this.caps==null?"butt":isNaN(this.caps)?this.caps:i.STROKE_CAPS_MAP[this.caps],n.lineJoin=this.joints==null?"miter":isNaN(this.joints)?this.joints:i.STROKE_JOINTS_MAP[this.joints],n.miterLimit=this.miterLimit==null?"10":this.miterLimit,n.ignoreScale=this.ignoreScale==null?!1:this.ignoreScale},e.path=!1,(t.StrokeDash=function(n,a){this.segments=n,this.offset=a||0}).prototype.exec=function(n){n.setLineDash&&(n.setLineDash(this.segments||t.StrokeDash.EMPTY_SEGMENTS),n.lineDashOffset=this.offset||0)},t.StrokeDash.EMPTY_SEGMENTS=[],(t.RoundRect=function(n,a,h,u,c,f,p,_){this.x=n,this.y=a,this.w=h,this.h=u,this.radiusTL=c,this.radiusTR=f,this.radiusBR=p,this.radiusBL=_}).prototype.exec=function(n){var a=(m<w?m:w)/2,h=0,u=0,c=0,f=0,p=this.x,_=this.y,m=this.w,w=this.h,g=this.radiusTL,y=this.radiusTR,E=this.radiusBR,P=this.radiusBL;g<0&&(g*=h=-1),g>a&&(g=a),y<0&&(y*=u=-1),y>a&&(y=a),E<0&&(E*=c=-1),E>a&&(E=a),P<0&&(P*=f=-1),P>a&&(P=a),n.moveTo(p+m-y,_),n.arcTo(p+m+y*u,_-y*u,p+m,_+y,y),n.lineTo(p+m,_+w-E),n.arcTo(p+m+E*c,_+w+E*c,p+m-E,_+w,E),n.lineTo(p+P,_+w),n.arcTo(p-P*f,_+w+P*f,p,_+w-P,P),n.lineTo(p,_+g),n.arcTo(p-g*h,_-g*h,p+g,_,g),n.closePath()},(t.Circle=function(n,a,h){this.x=n,this.y=a,this.radius=h}).prototype.exec=function(n){n.arc(this.x,this.y,this.radius,0,Math.PI*2)},(t.Ellipse=function(n,a,h,u){this.x=n,this.y=a,this.w=h,this.h=u}).prototype.exec=function(n){var a=this.x,h=this.y,u=this.w,c=this.h,f=.5522848,p=u/2*f,_=c/2*f,m=a+u,w=h+c,g=a+u/2,y=h+c/2;n.moveTo(a,y),n.bezierCurveTo(a,y-_,g-p,h,g,h),n.bezierCurveTo(g+p,h,m,y-_,m,y),n.bezierCurveTo(m,y+_,g+p,w,g,w),n.bezierCurveTo(g-p,w,a,y+_,a,y)},(t.PolyStar=function(n,a,h,u,c,f){this.x=n,this.y=a,this.radius=h,this.sides=u,this.pointSize=c,this.angle=f}).prototype.exec=function(n){var a=this.x,h=this.y,u=this.radius,c=(this.angle||0)/180*Math.PI,f=this.sides,p=1-(this.pointSize||0),_=Math.PI/f;n.moveTo(a+Math.cos(c)*u,h+Math.sin(c)*u);for(var m=0;m<f;m++)c+=_,p!=1&&n.lineTo(a+Math.cos(c)*u*p,h+Math.sin(c)*u*p),c+=_,n.lineTo(a+Math.cos(c)*u,h+Math.sin(c)*u);n.closePath()},i.beginCmd=new t.BeginPath,o.Graphics=i}(),function(){function i(){this.EventDispatcher_constructor(),this.alpha=1,this.cacheCanvas=null,this.cacheID=0,this.id=o.UID.get(),this.mouseEnabled=!0,this.tickEnabled=!0,this.name=null,this.parent=null,this.regX=0,this.regY=0,this.rotation=0,this.scaleX=1,this.scaleY=1,this.skewX=0,this.skewY=0,this.shadow=null,this.visible=!0,this.x=0,this.y=0,this.transformMatrix=null,this.compositeOperation=null,this.snapToPixel=!0,this.filters=null,this.mask=null,this.hitArea=null,this.cursor=null,this._cacheOffsetX=0,this._cacheOffsetY=0,this._filterOffsetX=0,this._filterOffsetY=0,this._cacheScale=1,this._cacheDataURLID=0,this._cacheDataURL=null,this._props=new o.DisplayProps,this._rectangle=new o.Rectangle,this._bounds=null}var e=o.extend(i,o.EventDispatcher);i._MOUSE_EVENTS=["click","dblclick","mousedown","mouseout","mouseover","pressmove","pressup","rollout","rollover"],i.suppressCrossDomainErrors=!1,i._snapToPixelEnabled=!1;var t=o.createCanvas?o.createCanvas():document.createElement("canvas");t.getContext&&(i._hitTestCanvas=t,i._hitTestContext=t.getContext("2d"),t.width=t.height=1),i._nextCacheID=1,e.getStage=function(){for(var r=this,n=o.Stage;r.parent;)r=r.parent;return r instanceof n?r:null};try{Object.defineProperties(e,{stage:{get:e.getStage}})}catch{}e.isVisible=function(){return!!(this.visible&&this.alpha>0&&this.scaleX!=0&&this.scaleY!=0)},e.draw=function(r,n){var a=this.cacheCanvas;if(n||!a)return!1;var h=this._cacheScale;return r.drawImage(a,this._cacheOffsetX+this._filterOffsetX,this._cacheOffsetY+this._filterOffsetY,a.width/h,a.height/h),!0},e.updateContext=function(r){var n=this,a=n.mask,h=n._props.matrix;a&&a.graphics&&!a.graphics.isEmpty()&&(a.getMatrix(h),r.transform(h.a,h.b,h.c,h.d,h.tx,h.ty),a.graphics.drawAsPath(r),r.clip(),h.invert(),r.transform(h.a,h.b,h.c,h.d,h.tx,h.ty)),this.getMatrix(h);var u=h.tx,c=h.ty;i._snapToPixelEnabled&&n.snapToPixel&&(u=u+(u<0?-.5:.5)|0,c=c+(c<0?-.5:.5)|0),r.transform(h.a,h.b,h.c,h.d,u,c),r.globalAlpha*=n.alpha,n.compositeOperation&&(r.globalCompositeOperation=n.compositeOperation),n.shadow&&this._applyShadow(r,n.shadow)},e.cache=function(r,n,a,h,u){u=u||1,this.cacheCanvas||(this.cacheCanvas=o.createCanvas?o.createCanvas():document.createElement("canvas")),this._cacheWidth=a,this._cacheHeight=h,this._cacheOffsetX=r,this._cacheOffsetY=n,this._cacheScale=u,this.updateCache()},e.updateCache=function(r){var n=this.cacheCanvas;if(!n)throw"cache() must be called before updateCache()";var a=this._cacheScale,h=this._cacheOffsetX*a,u=this._cacheOffsetY*a,c=this._cacheWidth,f=this._cacheHeight,p=n.getContext("2d"),_=this._getFilterBounds();h+=this._filterOffsetX=_.x,u+=this._filterOffsetY=_.y,c=Math.ceil(c*a)+_.width,f=Math.ceil(f*a)+_.height,c!=n.width||f!=n.height?(n.width=c,n.height=f):r||p.clearRect(0,0,c+1,f+1),p.save(),p.globalCompositeOperation=r,p.setTransform(a,0,0,a,-h,-u),this.draw(p,!0),this._applyFilters(),p.restore(),this.cacheID=i._nextCacheID++},e.uncache=function(){this._cacheDataURL=this.cacheCanvas=null,this.cacheID=this._cacheOffsetX=this._cacheOffsetY=this._filterOffsetX=this._filterOffsetY=0,this._cacheScale=1},e.getCacheDataURL=function(){return this.cacheCanvas?(this.cacheID!=this._cacheDataURLID&&(this._cacheDataURL=this.cacheCanvas.toDataURL()),this._cacheDataURL):null},e.localToGlobal=function(r,n,a){return this.getConcatenatedMatrix(this._props.matrix).transformPoint(r,n,a||new o.Point)},e.globalToLocal=function(r,n,a){return this.getConcatenatedMatrix(this._props.matrix).invert().transformPoint(r,n,a||new o.Point)},e.localToLocal=function(r,n,a,h){return h=this.localToGlobal(r,n,h),a.globalToLocal(h.x,h.y,h)},e.setTransform=function(r,n,a,h,u,c,f,p,_){return this.x=r||0,this.y=n||0,this.scaleX=a??1,this.scaleY=h??1,this.rotation=u||0,this.skewX=c||0,this.skewY=f||0,this.regX=p||0,this.regY=_||0,this},e.getMatrix=function(r){var n=this,a=r&&r.identity()||new o.Matrix2D;return n.transformMatrix?a.copy(n.transformMatrix):a.appendTransform(n.x,n.y,n.scaleX,n.scaleY,n.rotation,n.skewX,n.skewY,n.regX,n.regY)},e.getConcatenatedMatrix=function(r){for(var n=this,a=this.getMatrix(r);n=n.parent;)a.prependMatrix(n.getMatrix(n._props.matrix));return a},e.getConcatenatedDisplayProps=function(r){r=r?r.identity():new o.DisplayProps;var n=this,a=n.getMatrix(r.matrix);do r.prepend(n.visible,n.alpha,n.shadow,n.compositeOperation),n!=this&&a.prependMatrix(n.getMatrix(n._props.matrix));while(n=n.parent);return r},e.hitTest=function(r,n){var a=i._hitTestContext;a.setTransform(1,0,0,1,-r,-n),this.draw(a);var h=this._testHit(a);return a.setTransform(1,0,0,1,0,0),a.clearRect(0,0,2,2),h},e.set=function(r){for(var n in r)this[n]=r[n];return this},e.getBounds=function(){if(this._bounds)return this._rectangle.copy(this._bounds);var r=this.cacheCanvas;if(r){var n=this._cacheScale;return this._rectangle.setValues(this._cacheOffsetX,this._cacheOffsetY,r.width/n,r.height/n)}return null},e.getTransformedBounds=function(){return this._getBounds()},e.setBounds=function(r,n,a,h){r==null&&(this._bounds=r),this._bounds=(this._bounds||new o.Rectangle).setValues(r,n,a,h)},e.clone=function(){return this._cloneProps(new i)},e.toString=function(){return"[DisplayObject (name="+this.name+")]"},e._cloneProps=function(r){return r.alpha=this.alpha,r.mouseEnabled=this.mouseEnabled,r.tickEnabled=this.tickEnabled,r.name=this.name,r.regX=this.regX,r.regY=this.regY,r.rotation=this.rotation,r.scaleX=this.scaleX,r.scaleY=this.scaleY,r.shadow=this.shadow,r.skewX=this.skewX,r.skewY=this.skewY,r.visible=this.visible,r.x=this.x,r.y=this.y,r.compositeOperation=this.compositeOperation,r.snapToPixel=this.snapToPixel,r.filters=this.filters==null?null:this.filters.slice(0),r.mask=this.mask,r.hitArea=this.hitArea,r.cursor=this.cursor,r._bounds=this._bounds,r},e._applyShadow=function(r,n){n=n||Shadow.identity,r.shadowColor=n.color,r.shadowOffsetX=n.offsetX,r.shadowOffsetY=n.offsetY,r.shadowBlur=n.blur},e._tick=function(r){var n=this._listeners;n&&n.tick&&(r.target=null,r.propagationStopped=r.immediatePropagationStopped=!1,this.dispatchEvent(r))},e._testHit=function(r){try{var n=r.getImageData(0,0,1,1).data[3]>1}catch{if(!i.suppressCrossDomainErrors)throw"An error has occurred. This is most likely due to security restrictions on reading canvas pixel data with local or cross-domain images."}return n},e._applyFilters=function(){if(!(!this.filters||this.filters.length==0||!this.cacheCanvas))for(var r=this.filters.length,n=this.cacheCanvas.getContext("2d"),a=this.cacheCanvas.width,h=this.cacheCanvas.height,u=0;u<r;u++)this.filters[u].applyFilter(n,0,0,a,h)},e._getFilterBounds=function(r){var n,a=this.filters,h=this._rectangle.setValues(0,0,0,0);if(!a||!(n=a.length))return h;for(var u=0;u<n;u++){var c=this.filters[u];c.getBounds&&c.getBounds(h)}return h},e._getBounds=function(r,n){return this._transformBounds(this.getBounds(),r,n)},e._transformBounds=function(r,n,a){if(!r)return r;var h=r.x,u=r.y,c=r.width,f=r.height,p=this._props.matrix;p=a?p.identity():this.getMatrix(p),(h||u)&&p.appendTransform(0,0,1,1,0,0,0,-h,-u),n&&p.prependMatrix(n);var _=c*p.a,m=c*p.b,w=f*p.c,g=f*p.d,y=p.tx,E=p.ty,P=y,M=y,x=E,T=E;return(h=_+y)<P?P=h:h>M&&(M=h),(h=_+w+y)<P?P=h:h>M&&(M=h),(h=w+y)<P?P=h:h>M&&(M=h),(u=m+E)<x?x=u:u>T&&(T=u),(u=m+g+E)<x?x=u:u>T&&(T=u),(u=g+E)<x?x=u:u>T&&(T=u),r.setValues(P,x,M-P,T-x)},e._hasMouseEventListener=function(){for(var r=i._MOUSE_EVENTS,n=0,a=r.length;n<a;n++)if(this.hasEventListener(r[n]))return!0;return!!this.cursor},o.DisplayObject=o.promote(i,"EventDispatcher")}(),function(){function i(){this.DisplayObject_constructor(),this.children=[],this.mouseChildren=!0,this.tickChildren=!0}var e=o.extend(i,o.DisplayObject);e.getNumChildren=function(){return this.children.length};try{Object.defineProperties(e,{numChildren:{get:e.getNumChildren}})}catch{}e.initialize=i,e.isVisible=function(){var t=this.cacheCanvas||this.children.length;return!!(this.visible&&this.alpha>0&&this.scaleX!=0&&this.scaleY!=0&&t)},e.draw=function(t,r){if(this.DisplayObject_draw(t,r))return!0;for(var n=this.children.slice(),a=0,h=n.length;a<h;a++){var u=n[a];u.isVisible()&&(t.save(),u.updateContext(t),u.draw(t),t.restore())}return!0},e.addChild=function(t){if(t==null)return t;var r=arguments.length;if(r>1){for(var n=0;n<r;n++)this.addChild(arguments[n]);return arguments[r-1]}return t.parent&&t.parent.removeChild(t),t.parent=this,this.children.push(t),t.dispatchEvent("added"),t},e.addChildAt=function(t,r){var n=arguments.length,a=arguments[n-1];if(a<0||a>this.children.length)return arguments[n-2];if(n>2){for(var h=0;h<n-1;h++)this.addChildAt(arguments[h],a+h);return arguments[n-2]}return t.parent&&t.parent.removeChild(t),t.parent=this,this.children.splice(r,0,t),t.dispatchEvent("added"),t},e.removeChild=function(t){var r=arguments.length;if(r>1){for(var n=!0,a=0;a<r;a++)n=n&&this.removeChild(arguments[a]);return n}return this.removeChildAt(o.indexOf(this.children,t))},e.removeChildAt=function(t){var r=arguments.length;if(r>1){for(var n=[],a=0;a<r;a++)n[a]=arguments[a];n.sort(function(c,f){return f-c});for(var h=!0,a=0;a<r;a++)h=h&&this.removeChildAt(n[a]);return h}if(t<0||t>this.children.length-1)return!1;var u=this.children[t];return u&&(u.parent=null),this.children.splice(t,1),u.dispatchEvent("removed"),!0},e.removeAllChildren=function(){for(var t=this.children;t.length;)this.removeChildAt(0)},e.getChildAt=function(t){return this.children[t]},e.getChildByName=function(t){for(var r=this.children,n=0,a=r.length;n<a;n++)if(r[n].name==t)return r[n];return null},e.sortChildren=function(t){this.children.sort(t)},e.getChildIndex=function(t){return o.indexOf(this.children,t)},e.swapChildrenAt=function(t,r){var n=this.children,a=n[t],h=n[r];!a||!h||(n[t]=h,n[r]=a)},e.swapChildren=function(t,r){for(var n=this.children,a,h,u=0,c=n.length;u<c&&(n[u]==t&&(a=u),n[u]==r&&(h=u),!(a!=null&&h!=null));u++);u!=c&&(n[a]=r,n[h]=t)},e.setChildIndex=function(t,r){var n=this.children,a=n.length;if(!(t.parent!=this||r<0||r>=a)){for(var h=0;h<a&&n[h]!=t;h++);h==a||h==r||(n.splice(h,1),n.splice(r,0,t))}},e.contains=function(t){for(;t;){if(t==this)return!0;t=t.parent}return!1},e.hitTest=function(t,r){return this.getObjectUnderPoint(t,r)!=null},e.getObjectsUnderPoint=function(t,r,n){var a=[],h=this.localToGlobal(t,r);return this._getObjectsUnderPoint(h.x,h.y,a,n>0,n==1),a},e.getObjectUnderPoint=function(t,r,n){var a=this.localToGlobal(t,r);return this._getObjectsUnderPoint(a.x,a.y,null,n>0,n==1)},e.getBounds=function(){return this._getBounds(null,!0)},e.getTransformedBounds=function(){return this._getBounds()},e.clone=function(t){var r=this._cloneProps(new i);return t&&this._cloneChildren(r),r},e.toString=function(){return"[Container (name="+this.name+")]"},e._tick=function(t){if(this.tickChildren)for(var r=this.children.length-1;r>=0;r--){var n=this.children[r];n.tickEnabled&&n._tick&&n._tick(t)}this.DisplayObject__tick(t)},e._cloneChildren=function(t){t.children.length&&t.removeAllChildren();for(var r=t.children,n=0,a=this.children.length;n<a;n++){var h=this.children[n].clone(!0);h.parent=t,r.push(h)}},e._getObjectsUnderPoint=function(t,r,n,a,h,u){if(u=u||0,!u&&!this._testMask(this,t,r))return null;var c,f=o.DisplayObject._hitTestContext;h=h||a&&this._hasMouseEventListener();for(var p=this.children,_=p.length,m=_-1;m>=0;m--){var w=p[m],g=w.hitArea;if(!(!w.visible||!g&&!w.isVisible()||a&&!w.mouseEnabled)&&!(!g&&!this._testMask(w,t,r)))if(!g&&w instanceof i){var y=w._getObjectsUnderPoint(t,r,n,a,h,u+1);if(!n&&y)return a&&!this.mouseChildren?this:y}else{if(a&&!h&&!w._hasMouseEventListener())continue;var E=w.getConcatenatedDisplayProps(w._props);if(c=E.matrix,g&&(c.appendMatrix(g.getMatrix(g._props.matrix)),E.alpha=g.alpha),f.globalAlpha=E.alpha,f.setTransform(c.a,c.b,c.c,c.d,c.tx-t,c.ty-r),(g||w).draw(f),!this._testHit(f))continue;if(f.setTransform(1,0,0,1,0,0),f.clearRect(0,0,2,2),n)n.push(w);else return a&&!this.mouseChildren?this:w}}return null},e._testMask=function(t,r,n){var a=t.mask;if(!a||!a.graphics||a.graphics.isEmpty())return!0;var h=this._props.matrix,u=t.parent;h=u?u.getConcatenatedMatrix(h):h.identity(),h=a.getMatrix(a._props.matrix).prependMatrix(h);var c=o.DisplayObject._hitTestContext;return c.setTransform(h.a,h.b,h.c,h.d,h.tx-r,h.ty-n),a.graphics.drawAsPath(c),c.fillStyle="#000",c.fill(),this._testHit(c)?(c.setTransform(1,0,0,1,0,0),c.clearRect(0,0,2,2),!0):!1},e._getBounds=function(t,r){var n=this.DisplayObject_getBounds();if(n)return this._transformBounds(n,t,r);var a=this._props.matrix;a=r?a.identity():this.getMatrix(a),t&&a.prependMatrix(t);for(var h=this.children.length,u=null,c=0;c<h;c++){var f=this.children[c];!f.visible||!(n=f._getBounds(a))||(u?u.extend(n.x,n.y,n.width,n.height):u=n.clone())}return u},o.Container=o.promote(i,"DisplayObject")}(),function(){function i(t){this.Container_constructor(),this.autoClear=!0,this.canvas=typeof t=="string"?document.getElementById(t):t,this.mouseX=0,this.mouseY=0,this.drawRect=null,this.snapToPixelEnabled=!1,this.mouseInBounds=!1,this.tickOnUpdate=!0,this.mouseMoveOutside=!1,this.preventSelection=!0,this._pointerData={},this._pointerCount=0,this._primaryPointerID=null,this._mouseOverIntervalID=null,this._nextStage=null,this._prevStage=null,this.enableDOMEvents(!0)}var e=o.extend(i,o.Container);e._get_nextStage=function(){return this._nextStage},e._set_nextStage=function(t){this._nextStage&&(this._nextStage._prevStage=null),t&&(t._prevStage=this),this._nextStage=t};try{Object.defineProperties(e,{nextStage:{get:e._get_nextStage,set:e._set_nextStage}})}catch{}e.update=function(t){if(this.canvas&&(this.tickOnUpdate&&this.tick(t),this.dispatchEvent("drawstart",!1,!0)!==!1)){o.DisplayObject._snapToPixelEnabled=this.snapToPixelEnabled;var r=this.drawRect,n=this.canvas.getContext("2d");n.setTransform(1,0,0,1,0,0),this.autoClear&&(r?n.clearRect(r.x,r.y,r.width,r.height):n.clearRect(0,0,this.canvas.width+1,this.canvas.height+1)),n.save(),this.drawRect&&(n.beginPath(),n.rect(r.x,r.y,r.width,r.height),n.clip()),this.updateContext(n),this.draw(n,!1),n.restore(),this.dispatchEvent("drawend")}},e.tick=function(t){if(!(!this.tickEnabled||this.dispatchEvent("tickstart",!1,!0)===!1)){var r=new o.Event("tick");if(t)for(var n in t)t.hasOwnProperty(n)&&(r[n]=t[n]);this._tick(r),this.dispatchEvent("tickend")}},e.handleEvent=function(t){t.type=="tick"&&this.update(t)},e.clear=function(){if(this.canvas){var t=this.canvas.getContext("2d");t.setTransform(1,0,0,1,0,0),t.clearRect(0,0,this.canvas.width+1,this.canvas.height+1)}},e.toDataURL=function(t,r){var n,a=this.canvas.getContext("2d"),h=this.canvas.width,u=this.canvas.height;if(t){n=a.getImageData(0,0,h,u);var c=a.globalCompositeOperation;a.globalCompositeOperation="destination-over",a.fillStyle=t,a.fillRect(0,0,h,u)}var f=this.canvas.toDataURL(r||"image/png");return t&&(a.putImageData(n,0,0),a.globalCompositeOperation=c),f},e.enableMouseOver=function(t){if(this._mouseOverIntervalID&&(clearInterval(this._mouseOverIntervalID),this._mouseOverIntervalID=null,t==0&&this._testMouseOver(!0)),t==null)t=20;else if(t<=0)return;var r=this;this._mouseOverIntervalID=setInterval(function(){r._testMouseOver()},1e3/Math.min(50,t))},e.enableDOMEvents=function(t){t==null&&(t=!0);var r,n,a=this._eventListeners;if(!t&&a){for(r in a)n=a[r],n.t.removeEventListener(r,n.f,!1);this._eventListeners=null}else if(t&&!a&&this.canvas){var h=window.addEventListener?window:document,u=this;a=this._eventListeners={},a.mouseup={t:h,f:function(c){u._handleMouseUp(c)}},a.mousemove={t:h,f:function(c){u._handleMouseMove(c)}},a.dblclick={t:this.canvas,f:function(c){u._handleDoubleClick(c)}},a.mousedown={t:this.canvas,f:function(c){u._handleMouseDown(c)}};for(r in a)n=a[r],n.t.addEventListener(r,n.f,!1)}},e.clone=function(){throw"Stage cannot be cloned."},e.toString=function(){return"[Stage (name="+this.name+")]"},e._getElementRect=function(t){var r;try{r=t.getBoundingClientRect()}catch{r={top:t.offsetTop,left:t.offsetLeft,width:t.offsetWidth,height:t.offsetHeight}}var n=(window.pageXOffset||document.scrollLeft||0)-(document.clientLeft||document.body.clientLeft||0),a=(window.pageYOffset||document.scrollTop||0)-(document.clientTop||document.body.clientTop||0),h=window.getComputedStyle?getComputedStyle(t,null):t.currentStyle,u=parseInt(h.paddingLeft)+parseInt(h.borderLeftWidth),c=parseInt(h.paddingTop)+parseInt(h.borderTopWidth),f=parseInt(h.paddingRight)+parseInt(h.borderRightWidth),p=parseInt(h.paddingBottom)+parseInt(h.borderBottomWidth);return{left:r.left+n+u,right:r.right+n-f,top:r.top+a+c,bottom:r.bottom+a-p}},e._getPointerData=function(t){var r=this._pointerData[t];return r||(r=this._pointerData[t]={x:0,y:0}),r},e._handleMouseMove=function(t){t||(t=window.event),this._handlePointerMove(-1,t,t.pageX,t.pageY)},e._handlePointerMove=function(t,r,n,a,h){if(!(this._prevStage&&h===void 0)&&this.canvas){var u=this._nextStage,c=this._getPointerData(t),f=c.inBounds;this._updatePointerPosition(t,r,n,a),(f||c.inBounds||this.mouseMoveOutside)&&(t===-1&&c.inBounds==!f&&this._dispatchMouseEvent(this,f?"mouseleave":"mouseenter",!1,t,c,r),this._dispatchMouseEvent(this,"stagemousemove",!1,t,c,r),this._dispatchMouseEvent(c.target,"pressmove",!0,t,c,r)),u&&u._handlePointerMove(t,r,n,a,null)}},e._updatePointerPosition=function(t,r,n,a){var h=this._getElementRect(this.canvas);n-=h.left,a-=h.top;var u=this.canvas.width,c=this.canvas.height;n/=(h.right-h.left)/u,a/=(h.bottom-h.top)/c;var f=this._getPointerData(t);(f.inBounds=n>=0&&a>=0&&n<=u-1&&a<=c-1)?(f.x=n,f.y=a):this.mouseMoveOutside&&(f.x=n<0?0:n>u-1?u-1:n,f.y=a<0?0:a>c-1?c-1:a),f.posEvtObj=r,f.rawX=n,f.rawY=a,(t===this._primaryPointerID||t===-1)&&(this.mouseX=f.x,this.mouseY=f.y,this.mouseInBounds=f.inBounds)},e._handleMouseUp=function(t){this._handlePointerUp(-1,t,!1)},e._handlePointerUp=function(t,r,n,a){var h=this._nextStage,u=this._getPointerData(t);if(!(this._prevStage&&a===void 0)){var c=null,f=u.target;!a&&(f||h)&&(c=this._getObjectsUnderPoint(u.x,u.y,null,!0)),u.down&&(this._dispatchMouseEvent(this,"stagemouseup",!1,t,u,r,c),u.down=!1),c==f&&this._dispatchMouseEvent(f,"click",!0,t,u,r),this._dispatchMouseEvent(f,"pressup",!0,t,u,r),n?(t==this._primaryPointerID&&(this._primaryPointerID=null),delete this._pointerData[t]):u.target=null,h&&h._handlePointerUp(t,r,n,a||c&&this)}},e._handleMouseDown=function(t){this._handlePointerDown(-1,t,t.pageX,t.pageY)},e._handlePointerDown=function(t,r,n,a,h){this.preventSelection&&r.preventDefault(),(this._primaryPointerID==null||t===-1)&&(this._primaryPointerID=t),a!=null&&this._updatePointerPosition(t,r,n,a);var u=null,c=this._nextStage,f=this._getPointerData(t);h||(u=f.target=this._getObjectsUnderPoint(f.x,f.y,null,!0)),f.inBounds&&(this._dispatchMouseEvent(this,"stagemousedown",!1,t,f,r,u),f.down=!0),this._dispatchMouseEvent(u,"mousedown",!0,t,f,r),c&&c._handlePointerDown(t,r,n,a,h||u&&this)},e._testMouseOver=function(t,r,n){if(!(this._prevStage&&r===void 0)){var a=this._nextStage;if(!this._mouseOverIntervalID){a&&a._testMouseOver(t,r,n);return}var h=this._getPointerData(-1);if(!(!h||!t&&this.mouseX==this._mouseOverX&&this.mouseY==this._mouseOverY&&this.mouseInBounds)){var u=h.posEvtObj,c=n||u&&u.target==this.canvas,f=null,p=-1,_="",m,w,g;!r&&(t||this.mouseInBounds&&c)&&(f=this._getObjectsUnderPoint(this.mouseX,this.mouseY,null,!0),this._mouseOverX=this.mouseX,this._mouseOverY=this.mouseY);var y=this._mouseOverTarget||[],E=y[y.length-1],P=this._mouseOverTarget=[];for(m=f;m;)P.unshift(m),_||(_=m.cursor),m=m.parent;for(this.canvas.style.cursor=_,!r&&n&&(n.canvas.style.cursor=_),w=0,g=P.length;w<g&&P[w]==y[w];w++)p=w;for(E!=f&&this._dispatchMouseEvent(E,"mouseout",!0,-1,h,u,f),w=y.length-1;w>p;w--)this._dispatchMouseEvent(y[w],"rollout",!1,-1,h,u,f);for(w=P.length-1;w>p;w--)this._dispatchMouseEvent(P[w],"rollover",!1,-1,h,u,E);E!=f&&this._dispatchMouseEvent(f,"mouseover",!0,-1,h,u,E),a&&a._testMouseOver(t,r||f&&this,n||c&&this)}}},e._handleDoubleClick=function(t,r){var n=null,a=this._nextStage,h=this._getPointerData(-1);r||(n=this._getObjectsUnderPoint(h.x,h.y,null,!0),this._dispatchMouseEvent(n,"dblclick",!0,-1,h,t)),a&&a._handleDoubleClick(t,r||n&&this)},e._dispatchMouseEvent=function(t,r,n,a,h,u,c){if(!(!t||!n&&!t.hasEventListener(r))){var f=new o.MouseEvent(r,n,!1,h.x,h.y,u,a,a===this._primaryPointerID||a===-1,h.rawX,h.rawY,c);t.dispatchEvent(f)}},o.Stage=o.promote(i,"Container")}(),function(){function i(t){this.DisplayObject_constructor(),typeof t=="string"?(this.image=document.createElement("img"),this.image.src=t):this.image=t,this.sourceRect=null}var e=o.extend(i,o.DisplayObject);e.initialize=i,e.isVisible=function(){var t=this.image,r=this.cacheCanvas||t&&(t.naturalWidth||t.getContext||t.readyState>=2);return!!(this.visible&&this.alpha>0&&this.scaleX!=0&&this.scaleY!=0&&r)},e.draw=function(t,r){if(this.DisplayObject_draw(t,r)||!this.image)return!0;var n=this.image,a=this.sourceRect;if(a){var h=a.x,u=a.y,c=h+a.width,f=u+a.height,p=0,_=0,m=n.width,w=n.height;h<0&&(p-=h,h=0),c>m&&(c=m),u<0&&(_-=u,u=0),f>w&&(f=w),t.drawImage(n,h,u,c-h,f-u,p,_,c-h,f-u)}else t.drawImage(n,0,0);return!0},e.getBounds=function(){var t=this.DisplayObject_getBounds();if(t)return t;var r=this.image,n=this.sourceRect||r,a=r&&(r.naturalWidth||r.getContext||r.readyState>=2);return a?this._rectangle.setValues(0,0,n.width,n.height):null},e.clone=function(){var t=new i(this.image);return this.sourceRect&&(t.sourceRect=this.sourceRect.clone()),this._cloneProps(t),t},e.toString=function(){return"[Bitmap (name="+this.name+")]"},o.Bitmap=o.promote(i,"DisplayObject")}(),function(){function i(t,r){this.DisplayObject_constructor(),this.currentFrame=0,this.currentAnimation=null,this.paused=!0,this.spriteSheet=t,this.currentAnimationFrame=0,this.framerate=0,this._animation=null,this._currentFrame=null,this._skipAdvance=!1,r!=null&&this.gotoAndPlay(r)}var e=o.extend(i,o.DisplayObject);e.initialize=i,e.isVisible=function(){var t=this.cacheCanvas||this.spriteSheet.complete;return!!(this.visible&&this.alpha>0&&this.scaleX!=0&&this.scaleY!=0&&t)},e.draw=function(t,r){if(this.DisplayObject_draw(t,r))return!0;this._normalizeFrame();var n=this.spriteSheet.getFrame(this._currentFrame|0);if(!n)return!1;var a=n.rect;return a.width&&a.height&&t.drawImage(n.image,a.x,a.y,a.width,a.height,-n.regX,-n.regY,a.width,a.height),!0},e.play=function(){this.paused=!1},e.stop=function(){this.paused=!0},e.gotoAndPlay=function(t){this.paused=!1,this._skipAdvance=!0,this._goto(t)},e.gotoAndStop=function(t){this.paused=!0,this._goto(t)},e.advance=function(t){var r=this.framerate||this.spriteSheet.framerate,n=r&&t!=null?t/(1e3/r):1;this._normalizeFrame(n)},e.getBounds=function(){return this.DisplayObject_getBounds()||this.spriteSheet.getFrameBounds(this.currentFrame,this._rectangle)},e.clone=function(){return this._cloneProps(new i(this.spriteSheet))},e.toString=function(){return"[Sprite (name="+this.name+")]"},e._cloneProps=function(t){return this.DisplayObject__cloneProps(t),t.currentFrame=this.currentFrame,t.currentAnimation=this.currentAnimation,t.paused=this.paused,t.currentAnimationFrame=this.currentAnimationFrame,t.framerate=this.framerate,t._animation=this._animation,t._currentFrame=this._currentFrame,t._skipAdvance=this._skipAdvance,t},e._tick=function(t){this.paused||(this._skipAdvance||this.advance(t&&t.delta),this._skipAdvance=!1),this.DisplayObject__tick(t)},e._normalizeFrame=function(t){t=t||0;var r=this._animation,n=this.paused,a=this._currentFrame,h;if(r){var u=r.speed||1,c=this.currentAnimationFrame;if(h=r.frames.length,c+t*u>=h){var f=r.next;if(this._dispatchAnimationEnd(r,a,n,f,h-1))return;if(f)return this._goto(f,t-(h-c)/u);this.paused=!0,c=r.frames.length-1}else c+=t*u;this.currentAnimationFrame=c,this._currentFrame=r.frames[c|0]}else if(a=this._currentFrame+=t,h=this.spriteSheet.getNumFrames(),a>=h&&h>0&&!this._dispatchAnimationEnd(r,a,n,h-1)&&(this._currentFrame-=h)>=h)return this._normalizeFrame();a=this._currentFrame|0,this.currentFrame!=a&&(this.currentFrame=a,this.dispatchEvent("change"))},e._dispatchAnimationEnd=function(t,r,n,a,h){var u=t?t.name:null;if(this.hasEventListener("animationend")){var c=new o.Event("animationend");c.name=u,c.next=a,this.dispatchEvent(c)}var f=this._animation!=t||this._currentFrame!=r;return!f&&!n&&this.paused&&(this.currentAnimationFrame=h,f=!0),f},e._goto=function(t,r){if(this.currentAnimationFrame=0,isNaN(t)){var n=this.spriteSheet.getAnimation(t);n&&(this._animation=n,this.currentAnimation=t,this._normalizeFrame(r))}else this.currentAnimation=this._animation=null,this._currentFrame=t,this._normalizeFrame()},o.Sprite=o.promote(i,"DisplayObject")}(),function(){function i(t){this.DisplayObject_constructor(),this.graphics=t||new o.Graphics}var e=o.extend(i,o.DisplayObject);e.isVisible=function(){var t=this.cacheCanvas||this.graphics&&!this.graphics.isEmpty();return!!(this.visible&&this.alpha>0&&this.scaleX!=0&&this.scaleY!=0&&t)},e.draw=function(t,r){return this.DisplayObject_draw(t,r)||this.graphics.draw(t,this),!0},e.clone=function(t){var r=t&&this.graphics?this.graphics.clone():this.graphics;return this._cloneProps(new i(r))},e.toString=function(){return"[Shape (name="+this.name+")]"},o.Shape=o.promote(i,"DisplayObject")}(),function(){function i(r,n,a){this.DisplayObject_constructor(),this.text=r,this.font=n,this.color=a,this.textAlign="left",this.textBaseline="top",this.maxWidth=null,this.outline=0,this.lineHeight=0,this.lineWidth=null}var e=o.extend(i,o.DisplayObject),t=o.createCanvas?o.createCanvas():document.createElement("canvas");t.getContext&&(i._workingContext=t.getContext("2d"),t.width=t.height=1),i.H_OFFSETS={start:0,left:0,center:-.5,end:-1,right:-1},i.V_OFFSETS={top:0,hanging:-.01,middle:-.4,alphabetic:-.8,ideographic:-.85,bottom:-1},e.isVisible=function(){var r=this.cacheCanvas||this.text!=null&&this.text!=="";return!!(this.visible&&this.alpha>0&&this.scaleX!=0&&this.scaleY!=0&&r)},e.draw=function(r,n){if(this.DisplayObject_draw(r,n))return!0;var a=this.color||"#000";return this.outline?(r.strokeStyle=a,r.lineWidth=this.outline*1):r.fillStyle=a,this._drawText(this._prepContext(r)),!0},e.getMeasuredWidth=function(){return this._getMeasuredWidth(this.text)},e.getMeasuredLineHeight=function(){return this._getMeasuredWidth("M")*1.2},e.getMeasuredHeight=function(){return this._drawText(null,{}).height},e.getBounds=function(){var r=this.DisplayObject_getBounds();if(r)return r;if(this.text==null||this.text==="")return null;var n=this._drawText(null,{}),a=this.maxWidth&&this.maxWidth<n.width?this.maxWidth:n.width,h=a*i.H_OFFSETS[this.textAlign||"left"],u=this.lineHeight||this.getMeasuredLineHeight(),c=u*i.V_OFFSETS[this.textBaseline||"top"];return this._rectangle.setValues(h,c,a,n.height)},e.getMetrics=function(){var r={lines:[]};return r.lineHeight=this.lineHeight||this.getMeasuredLineHeight(),r.vOffset=r.lineHeight*i.V_OFFSETS[this.textBaseline||"top"],this._drawText(null,r,r.lines)},e.clone=function(){return this._cloneProps(new i(this.text,this.font,this.color))},e.toString=function(){return"[Text (text="+(this.text.length>20?this.text.substr(0,17)+"...":this.text)+")]"},e._cloneProps=function(r){return this.DisplayObject__cloneProps(r),r.textAlign=this.textAlign,r.textBaseline=this.textBaseline,r.maxWidth=this.maxWidth,r.outline=this.outline,r.lineHeight=this.lineHeight,r.lineWidth=this.lineWidth,r},e._prepContext=function(r){return r.font=this.font||"10px sans-serif",r.textAlign=this.textAlign||"left",r.textBaseline=this.textBaseline||"top",r},e._drawText=function(r,n,a){var h=!!r;h||(r=i._workingContext,r.save(),this._prepContext(r));for(var u=this.lineHeight||this.getMeasuredLineHeight(),c=0,f=0,p=String(this.text).split(/(?:\r\n|\r|\n)/),_=0,m=p.length;_<m;_++){var w=p[_],g=null;if(this.lineWidth!=null&&(g=r.measureText(w).width)>this.lineWidth){var y=w.split(/(\s)/);w=y[0],g=r.measureText(w).width;for(var E=1,P=y.length;E<P;E+=2){var M=r.measureText(y[E]+y[E+1]).width;g+M>this.lineWidth?(h&&this._drawTextLine(r,w,f*u),a&&a.push(w),g>c&&(c=g),w=y[E+1],g=r.measureText(w).width,f++):(w+=y[E]+y[E+1],g+=M)}}h&&this._drawTextLine(r,w,f*u),a&&a.push(w),n&&g==null&&(g=r.measureText(w).width),g>c&&(c=g),f++}return n&&(n.width=c,n.height=f*u),h||r.restore(),n},e._drawTextLine=function(r,n,a){this.outline?r.strokeText(n,0,a,this.maxWidth||65535):r.fillText(n,0,a,this.maxWidth||65535)},e._getMeasuredWidth=function(r){var n=i._workingContext;n.save();var a=this._prepContext(n).measureText(r).width;return n.restore(),a},o.Text=o.promote(i,"DisplayObject")}(),function(){function i(t,r){this.Container_constructor(),this.text=t||"",this.spriteSheet=r,this.lineHeight=0,this.letterSpacing=0,this.spaceWidth=0,this._oldProps={text:0,spriteSheet:0,lineHeight:0,letterSpacing:0,spaceWidth:0}}var e=o.extend(i,o.Container);i.maxPoolSize=100,i._spritePool=[],e.draw=function(t,r){this.DisplayObject_draw(t,r)||(this._updateText(),this.Container_draw(t,r))},e.getBounds=function(){return this._updateText(),this.Container_getBounds()},e.isVisible=function(){var t=this.cacheCanvas||this.spriteSheet&&this.spriteSheet.complete&&this.text;return!!(this.visible&&this.alpha>0&&this.scaleX!==0&&this.scaleY!==0&&t)},e.clone=function(){return this._cloneProps(new i(this.text,this.spriteSheet))},e.addChild=e.addChildAt=e.removeChild=e.removeChildAt=e.removeAllChildren=function(){},e._cloneProps=function(t){return this.Container__cloneProps(t),t.lineHeight=this.lineHeight,t.letterSpacing=this.letterSpacing,t.spaceWidth=this.spaceWidth,t},e._getFrameIndex=function(t,r){var n,a=r.getAnimation(t);return a||(t!=(n=t.toUpperCase())||t!=(n=t.toLowerCase())||(n=null),n&&(a=r.getAnimation(n))),a&&a.frames[0]},e._getFrame=function(t,r){var n=this._getFrameIndex(t,r);return n==null?n:r.getFrame(n)},e._getLineHeight=function(t){var r=this._getFrame("1",t)||this._getFrame("T",t)||this._getFrame("L",t)||t.getFrame(0);return r?r.rect.height:1},e._getSpaceWidth=function(t){var r=this._getFrame("1",t)||this._getFrame("l",t)||this._getFrame("e",t)||this._getFrame("a",t)||t.getFrame(0);return r?r.rect.width:1},e._updateText=function(){var t=0,r=0,n=this._oldProps,a=!1,h=this.spaceWidth,u=this.lineHeight,c=this.spriteSheet,f=i._spritePool,p=this.children,_=0,m=p.length,w;for(var g in n)n[g]!=this[g]&&(n[g]=this[g],a=!0);if(a){var y=!!this._getFrame(" ",c);!y&&!h&&(h=this._getSpaceWidth(c)),u||(u=this._getLineHeight(c));for(var E=0,P=this.text.length;E<P;E++){var M=this.text.charAt(E);if(M==" "&&!y){t+=h;continue}else if(M==`
`||M=="\r"){M=="\r"&&this.text.charAt(E+1)==`
`&&E++,t=0,r+=u;continue}var x=this._getFrameIndex(M,c);x!=null&&(_<m?w=p[_]:(p.push(w=f.length?f.pop():new o.Sprite),w.parent=this,m++),w.spriteSheet=c,w.gotoAndStop(x),w.x=t,w.y=r,_++,t+=w.getBounds().width+this.letterSpacing)}for(;m>_;)f.push(w=p.pop()),w.parent=null,m--;f.length>i.maxPoolSize&&(f.length=i.maxPoolSize)}},o.BitmapText=o.promote(i,"Container")}(),function(){function i(r,n,a,h){this.Container_constructor(),!i.inited&&i.init(),this.mode=r||i.INDEPENDENT,this.startPosition=n||0,this.loop=a,this.currentFrame=0,this.timeline=new o.Timeline(null,h,{paused:!0,position:n,useTicks:!0}),this.paused=!1,this.actionsEnabled=!0,this.autoReset=!0,this.frameBounds=this.frameBounds||null,this.framerate=null,this._synchOffset=0,this._prevPos=-1,this._prevPosition=0,this._t=0,this._managed={}}var e=o.extend(i,o.Container);i.INDEPENDENT="independent",i.SINGLE_FRAME="single",i.SYNCHED="synched",i.inited=!1,i.init=function(){i.inited||(t.install(),i.inited=!0)},e.getLabels=function(){return this.timeline.getLabels()},e.getCurrentLabel=function(){return this._updateTimeline(),this.timeline.getCurrentLabel()},e.getDuration=function(){return this.timeline.duration};try{Object.defineProperties(e,{labels:{get:e.getLabels},currentLabel:{get:e.getCurrentLabel},totalFrames:{get:e.getDuration},duration:{get:e.getDuration}})}catch{}e.initialize=i,e.isVisible=function(){return!!(this.visible&&this.alpha>0&&this.scaleX!=0&&this.scaleY!=0)},e.draw=function(r,n){return this.DisplayObject_draw(r,n)||(this._updateTimeline(),this.Container_draw(r,n)),!0},e.play=function(){this.paused=!1},e.stop=function(){this.paused=!0},e.gotoAndPlay=function(r){this.paused=!1,this._goto(r)},e.gotoAndStop=function(r){this.paused=!0,this._goto(r)},e.advance=function(r){var n=i.INDEPENDENT;if(this.mode==n){for(var a=this,h=a.framerate;(a=a.parent)&&h==null;)a.mode==n&&(h=a._framerate);this._framerate=h;var u=h!=null&&h!=-1&&r!=null?r/(1e3/h)+this._t:1,c=u|0;for(this._t=u-c;!this.paused&&c--;)this._prevPosition=this._prevPos<0?0:this._prevPosition+1,this._updateTimeline()}},e.clone=function(){throw"MovieClip cannot be cloned."},e.toString=function(){return"[MovieClip (name="+this.name+")]"},e._tick=function(r){this.advance(r&&r.delta),this.Container__tick(r)},e._goto=function(r){var n=this.timeline.resolve(r);n!=null&&(this._prevPos==-1&&(this._prevPos=NaN),this._prevPosition=n,this._t=0,this._updateTimeline())},e._reset=function(){this._prevPos=-1,this._t=this.currentFrame=0,this.paused=!1},e._updateTimeline=function(){var r=this.timeline,n=this.mode!=i.INDEPENDENT;r.loop=this.loop==null?!0:this.loop;var a=n?this.startPosition+(this.mode==i.SINGLE_FRAME?0:this._synchOffset):this._prevPos<0?0:this._prevPosition,h=n||!this.actionsEnabled?o.Tween.NONE:null;if(this.currentFrame=r._calcPosition(a),r.setPosition(a,h),this._prevPosition=r._prevPosition,this._prevPos!=r._prevPos){this.currentFrame=this._prevPos=r._prevPos;for(var u in this._managed)this._managed[u]=1;for(var c=r._tweens,f=0,p=c.length;f<p;f++){var _=c[f],m=_._target;if(!(m==this||_.passive)){var w=_._stepPosition;m instanceof o.DisplayObject?this._addManagedChild(m,w):this._setState(m.state,w)}}var g=this.children;for(f=g.length-1;f>=0;f--){var y=g[f].id;this._managed[y]==1&&(this.removeChildAt(f),delete this._managed[y])}}},e._setState=function(r,n){if(r)for(var a=r.length-1;a>=0;a--){var h=r[a],u=h.t,c=h.p;for(var f in c)u[f]=c[f];this._addManagedChild(u,n)}},e._addManagedChild=function(r,n){r._off||(this.addChildAt(r,0),r instanceof i&&(r._synchOffset=n,r.mode==i.INDEPENDENT&&r.autoReset&&!this._managed[r.id]&&r._reset()),this._managed[r.id]=2)},e._getBounds=function(r,n){var a=this.DisplayObject_getBounds();return a||(this._updateTimeline(),this.frameBounds&&(a=this._rectangle.copy(this.frameBounds[this.currentFrame]))),a?this._transformBounds(a,r,n):this.Container__getBounds(r,n)},o.MovieClip=o.promote(i,"Container");function t(){throw"MovieClipPlugin cannot be instantiated."}t.priority=100,t.install=function(){o.Tween.installPlugin(t,["startPosition"])},t.init=function(r,n,a){return a},t.step=function(){},t.tween=function(r,n,a,h,u,c,f,p){return r.target instanceof i?c==1?u[n]:h[n]:a}}(),function(){function i(){throw"SpriteSheetUtils cannot be instantiated"}var e=o.createCanvas?o.createCanvas():document.createElement("canvas");e.getContext&&(i._workingCanvas=e,i._workingContext=e.getContext("2d"),e.width=e.height=1),i.addFlippedFrames=function(t,r,n,a){if(!(!r&&!n&&!a)){var h=0;r&&i._flip(t,++h,!0,!1),n&&i._flip(t,++h,!1,!0),a&&i._flip(t,++h,!0,!0)}},i.extractFrame=function(t,r){isNaN(r)&&(r=t.getAnimation(r).frames[0]);var n=t.getFrame(r);if(!n)return null;var a=n.rect,h=i._workingCanvas;h.width=a.width,h.height=a.height,i._workingContext.drawImage(n.image,a.x,a.y,a.width,a.height,0,0,a.width,a.height);var u=document.createElement("img");return u.src=h.toDataURL("image/png"),u},i.mergeAlpha=function(t,r,n){n||(n=o.createCanvas?o.createCanvas():document.createElement("canvas")),n.width=Math.max(r.width,t.width),n.height=Math.max(r.height,t.height);var a=n.getContext("2d");return a.save(),a.drawImage(t,0,0),a.globalCompositeOperation="destination-in",a.drawImage(r,0,0),a.restore(),n},i._flip=function(t,r,n,a){for(var h=t._images,u=i._workingCanvas,c=i._workingContext,f=h.length/r,p=0;p<f;p++){var _=h[p];_.__tmp=p,c.setTransform(1,0,0,1,0,0),c.clearRect(0,0,u.width+1,u.height+1),u.width=_.width,u.height=_.height,c.setTransform(n?-1:1,0,0,a?-1:1,n?_.width:0,a?_.height:0),c.drawImage(_,0,0);var m=document.createElement("img");m.src=u.toDataURL("image/png"),m.width=_.width,m.height=_.height,h.push(m)}var w=t._frames,g=w.length/r;for(p=0;p<g;p++){_=w[p];var y=_.rect.clone();m=h[_.image.__tmp+f*r];var E={image:m,rect:y,regX:_.regX,regY:_.regY};n&&(y.x=m.width-y.x-y.width,E.regX=y.width-_.regX),a&&(y.y=m.height-y.y-y.height,E.regY=y.height-_.regY),w.push(E)}var P="_"+(n?"h":"")+(a?"v":""),M=t._animations,x=t._data,T=M.length/r;for(p=0;p<T;p++){var R=M[p];_=x[R];var k={name:R+P,speed:_.speed,next:_.next,frames:[]};_.next&&(k.next+=P),w=_.frames;for(var v=0,S=w.length;v<S;v++)k.frames.push(w[v]+g*r);x[k.name]=k,M.push(k.name)}},o.SpriteSheetUtils=i}(),function(){function i(t){this.EventDispatcher_constructor(),this.maxWidth=2048,this.maxHeight=2048,this.spriteSheet=null,this.scale=1,this.padding=1,this.timeSlice=.3,this.progress=-1,this.framerate=t||0,this._frames=[],this._animations={},this._data=null,this._nextFrameIndex=0,this._index=0,this._timerID=null,this._scale=1}var e=o.extend(i,o.EventDispatcher);i.ERR_DIMENSIONS="frame dimensions exceed max spritesheet dimensions",i.ERR_RUNNING="a build is already running",e.addFrame=function(t,r,n,a,h){if(this._data)throw i.ERR_RUNNING;var u=r||t.bounds||t.nominalBounds;return!u&&t.getBounds&&(u=t.getBounds()),u?(n=n||1,this._frames.push({source:t,sourceRect:u,scale:n,funct:a,data:h,index:this._frames.length,height:u.height*n})-1):null},e.addAnimation=function(t,r,n,a){if(this._data)throw i.ERR_RUNNING;this._animations[t]={frames:r,next:n,speed:a}},e.addMovieClip=function(t,r,n,a,h,u){if(this._data)throw i.ERR_RUNNING;var c=t.frameBounds,f=r||t.bounds||t.nominalBounds;if(!f&&t.getBounds&&(f=t.getBounds()),!(!f&&!c)){var p,_,m=this._frames.length,w=t.timeline.duration;for(p=0;p<w;p++){var g=c&&c[p]?c[p]:f;this.addFrame(t,g,n,this._setupMovieClipFrame,{i:p,f:a,d:h})}var y=t.timeline._labels,E=[];for(var P in y)E.push({index:y[P],label:P});if(E.length)for(E.sort(function(v,S){return v.index-S.index}),p=0,_=E.length;p<_;p++){for(var M=E[p].label,x=m+E[p].index,T=m+(p==_-1?w:E[p+1].index),R=[],k=x;k<T;k++)R.push(k);u&&(M=u(M,t,x,T),!M)||this.addAnimation(M,R,!0)}}},e.build=function(){if(this._data)throw i.ERR_RUNNING;for(this._startBuild();this._drawNext(););return this._endBuild(),this.spriteSheet},e.buildAsync=function(t){if(this._data)throw i.ERR_RUNNING;this.timeSlice=t,this._startBuild();var r=this;this._timerID=setTimeout(function(){r._run()},50-Math.max(.01,Math.min(.99,this.timeSlice||.3))*50)},e.stopAsync=function(){clearTimeout(this._timerID),this._data=null},e.clone=function(){throw"SpriteSheetBuilder cannot be cloned."},e.toString=function(){return"[SpriteSheetBuilder]"},e._startBuild=function(){var t=this.padding||0;this.progress=0,this.spriteSheet=null,this._index=0,this._scale=this.scale;var r=[];this._data={images:[],frames:r,framerate:this.framerate,animations:this._animations};var n=this._frames.slice();if(n.sort(function(p,_){return p.height<=_.height?-1:1}),n[n.length-1].height+t*2>this.maxHeight)throw i.ERR_DIMENSIONS;for(var a=0,h=0,u=0;n.length;){var c=this._fillRow(n,a,u,r,t);if(c.w>h&&(h=c.w),a+=c.h,!c.h||!n.length){var f=o.createCanvas?o.createCanvas():document.createElement("canvas");f.width=this._getSize(h,this.maxWidth),f.height=this._getSize(a,this.maxHeight),this._data.images[u]=f,c.h||(h=a=0,u++)}}},e._setupMovieClipFrame=function(t,r){var n=t.actionsEnabled;t.actionsEnabled=!1,t.gotoAndStop(r.i),t.actionsEnabled=n,r.f&&r.f(t,r.d,r.i)},e._getSize=function(t,r){for(var n=4;Math.pow(2,++n)<t;);return Math.min(r,Math.pow(2,n))},e._fillRow=function(t,r,n,a,h){var u=this.maxWidth,c=this.maxHeight;r+=h;for(var f=c-r,p=h,_=0,m=t.length-1;m>=0;m--){var w=t[m],g=this._scale*w.scale,y=w.sourceRect,E=w.source,P=Math.floor(g*y.x-h),M=Math.floor(g*y.y-h),x=Math.ceil(g*y.height+h*2),T=Math.ceil(g*y.width+h*2);if(T>u)throw i.ERR_DIMENSIONS;x>f||p+T>u||(w.img=n,w.rect=new o.Rectangle(p,r,T,x),_=_||x,t.splice(m,1),a[w.index]=[p,r,T,x,n,Math.round(-P+g*E.regX-h),Math.round(-M+g*E.regY-h)],p+=T)}return{w:p,h:_}},e._endBuild=function(){this.spriteSheet=new o.SpriteSheet(this._data),this._data=null,this.progress=1,this.dispatchEvent("complete")},e._run=function(){for(var t=Math.max(.01,Math.min(.99,this.timeSlice||.3))*50,r=new Date().getTime()+t,n=!1;r>new Date().getTime();)if(!this._drawNext()){n=!0;break}if(n)this._endBuild();else{var a=this;this._timerID=setTimeout(function(){a._run()},50-t)}var h=this.progress=this._index/this._frames.length;if(this.hasEventListener("progress")){var u=new o.Event("progress");u.progress=h,this.dispatchEvent(u)}},e._drawNext=function(){var t=this._frames[this._index],r=t.scale*this._scale,n=t.rect,a=t.sourceRect,h=this._data.images[t.img],u=h.getContext("2d");return t.funct&&t.funct(t.source,t.data),u.save(),u.beginPath(),u.rect(n.x,n.y,n.width,n.height),u.clip(),u.translate(Math.ceil(n.x-a.x*r),Math.ceil(n.y-a.y*r)),u.scale(r,r),t.source.draw(u),u.restore(),++this._index<this._frames.length},o.SpriteSheetBuilder=o.promote(i,"EventDispatcher")}(),function(){function i(t){this.DisplayObject_constructor(),typeof t=="string"&&(t=document.getElementById(t)),this.mouseEnabled=!1;var r=t.style;r.position="absolute",r.transformOrigin=r.WebkitTransformOrigin=r.msTransformOrigin=r.MozTransformOrigin=r.OTransformOrigin="0% 0%",this.htmlElement=t,this._oldProps=null}var e=o.extend(i,o.DisplayObject);e.isVisible=function(){return this.htmlElement!=null},e.draw=function(t,r){return!0},e.cache=function(){},e.uncache=function(){},e.updateCache=function(){},e.hitTest=function(){},e.localToGlobal=function(){},e.globalToLocal=function(){},e.localToLocal=function(){},e.clone=function(){throw"DOMElement cannot be cloned."},e.toString=function(){return"[DOMElement (name="+this.name+")]"},e._tick=function(t){var r=this.getStage();r&&r.on("drawend",this._handleDrawEnd,this,!0),this.DisplayObject__tick(t)},e._handleDrawEnd=function(t){var r=this.htmlElement;if(r){var n=r.style,a=this.getConcatenatedDisplayProps(this._props),h=a.matrix,u=a.visible?"visible":"hidden";if(u!=n.visibility&&(n.visibility=u),!!a.visible){var c=this._oldProps,f=c&&c.matrix,p=1e4;if(!f||!f.equals(h)){var _="matrix("+(h.a*p|0)/p+","+(h.b*p|0)/p+","+(h.c*p|0)/p+","+(h.d*p|0)/p+","+(h.tx+.5|0);n.transform=n.WebkitTransform=n.OTransform=n.msTransform=_+","+(h.ty+.5|0)+")",n.MozTransform=_+"px,"+(h.ty+.5|0)+"px)",c||(c=this._oldProps=new o.DisplayProps(!0,NaN)),c.matrix.copy(h)}c.alpha!=a.alpha&&(n.opacity=""+(a.alpha*p|0)/p,c.alpha=a.alpha)}}},o.DOMElement=o.promote(i,"DisplayObject")}(),function(){function i(){}var e=i.prototype;e.getBounds=function(t){return t},e.applyFilter=function(t,r,n,a,h,u,c,f){u=u||t,c==null&&(c=r),f==null&&(f=n);try{var p=t.getImageData(r,n,a,h)}catch{return!1}return this._applyFilter(p)?(u.putImageData(p,c,f),!0):!1},e.toString=function(){return"[Filter]"},e.clone=function(){return new i},e._applyFilter=function(t){return!0},o.Filter=i}(),function(){function i(t,r,n){(isNaN(t)||t<0)&&(t=0),(isNaN(r)||r<0)&&(r=0),(isNaN(n)||n<1)&&(n=1),this.blurX=t|0,this.blurY=r|0,this.quality=n|0}var e=o.extend(i,o.Filter);i.MUL_TABLE=[1,171,205,293,57,373,79,137,241,27,391,357,41,19,283,265,497,469,443,421,25,191,365,349,335,161,155,149,9,278,269,261,505,245,475,231,449,437,213,415,405,395,193,377,369,361,353,345,169,331,325,319,313,307,301,37,145,285,281,69,271,267,263,259,509,501,493,243,479,118,465,459,113,446,55,435,429,423,209,413,51,403,199,393,97,3,379,375,371,367,363,359,355,351,347,43,85,337,333,165,327,323,5,317,157,311,77,305,303,75,297,294,73,289,287,71,141,279,277,275,68,135,67,133,33,262,260,129,511,507,503,499,495,491,61,121,481,477,237,235,467,232,115,457,227,451,7,445,221,439,218,433,215,427,425,211,419,417,207,411,409,203,202,401,399,396,197,49,389,387,385,383,95,189,47,187,93,185,23,183,91,181,45,179,89,177,11,175,87,173,345,343,341,339,337,21,167,83,331,329,327,163,81,323,321,319,159,79,315,313,39,155,309,307,153,305,303,151,75,299,149,37,295,147,73,291,145,289,287,143,285,71,141,281,35,279,139,69,275,137,273,17,271,135,269,267,133,265,33,263,131,261,130,259,129,257,1],i.SHG_TABLE=[0,9,10,11,9,12,10,11,12,9,13,13,10,9,13,13,14,14,14,14,10,13,14,14,14,13,13,13,9,14,14,14,15,14,15,14,15,15,14,15,15,15,14,15,15,15,15,15,14,15,15,15,15,15,15,12,14,15,15,13,15,15,15,15,16,16,16,15,16,14,16,16,14,16,13,16,16,16,15,16,13,16,15,16,14,9,16,16,16,16,16,16,16,16,16,13,14,16,16,15,16,16,10,16,15,16,14,16,16,14,16,16,14,16,16,14,15,16,16,16,14,15,14,15,13,16,16,15,17,17,17,17,17,17,14,15,17,17,16,16,17,16,15,17,16,17,11,17,16,17,16,17,16,17,17,16,17,17,16,17,17,16,16,17,17,17,16,14,17,17,17,17,15,16,14,16,15,16,13,16,15,16,14,16,15,16,12,16,15,16,17,17,17,17,17,13,16,15,17,17,17,16,15,17,17,17,16,15,17,17,14,16,17,17,16,17,17,16,15,17,16,14,17,16,15,17,16,17,17,16,17,15,16,17,14,17,16,15,17,16,17,13,17,16,17,17,16,17,14,17,16,17,16,17,16,17,9],e.getBounds=function(t){var r=this.blurX|0,n=this.blurY|0;if(r<=0&&n<=0)return t;var a=Math.pow(this.quality,.2);return(t||new o.Rectangle).pad(r*a+1,n*a+1,r*a+1,n*a+1)},e.clone=function(){return new i(this.blurX,this.blurY,this.quality)},e.toString=function(){return"[BlurFilter]"},e._applyFilter=function(t){var r=this.blurX>>1;if(isNaN(r)||r<0)return!1;var n=this.blurY>>1;if(isNaN(n)||n<0||r==0&&n==0)return!1;var a=this.quality;(isNaN(a)||a<1)&&(a=1),a|=0,a>3&&(a=3),a<1&&(a=1);var h=t.data,u=0,c=0,f=0,p=0,_=0,m=0,w=0,g=0,y=0,E=0,P=0,M=0,x=0,T=0,R=0,k=r+r+1|0,v=n+n+1|0,S=t.width|0,L=t.height|0,b=S-1|0,G=L-1|0,H=r+1|0,Y=n+1|0,V={r:0,b:0,g:0,a:0},W=V;for(f=1;f<k;f++)W=W.n={r:0,b:0,g:0,a:0};W.n=V;var it={r:0,b:0,g:0,a:0},X=it;for(f=1;f<v;f++)X=X.n={r:0,b:0,g:0,a:0};X.n=it;for(var j=null,at=i.MUL_TABLE[r]|0,U=i.SHG_TABLE[r]|0,tt=i.MUL_TABLE[n]|0,st=i.SHG_TABLE[n]|0;a-- >0;){w=m=0;var J=at,K=U;for(c=L;--c>-1;){for(g=H*(M=h[m|0]),y=H*(x=h[m+1|0]),E=H*(T=h[m+2|0]),P=H*(R=h[m+3|0]),W=V,f=H;--f>-1;)W.r=M,W.g=x,W.b=T,W.a=R,W=W.n;for(f=1;f<H;f++)p=m+((b<f?b:f)<<2)|0,g+=W.r=h[p],y+=W.g=h[p+1],E+=W.b=h[p+2],P+=W.a=h[p+3],W=W.n;for(j=V,u=0;u<S;u++)h[m++]=g*J>>>K,h[m++]=y*J>>>K,h[m++]=E*J>>>K,h[m++]=P*J>>>K,p=w+((p=u+r+1)<b?p:b)<<2,g-=j.r-(j.r=h[p]),y-=j.g-(j.g=h[p+1]),E-=j.b-(j.b=h[p+2]),P-=j.a-(j.a=h[p+3]),j=j.n;w+=S}for(J=tt,K=st,u=0;u<S;u++){for(m=u<<2|0,g=Y*(M=h[m])|0,y=Y*(x=h[m+1|0])|0,E=Y*(T=h[m+2|0])|0,P=Y*(R=h[m+3|0])|0,X=it,f=0;f<Y;f++)X.r=M,X.g=x,X.b=T,X.a=R,X=X.n;for(_=S,f=1;f<=n;f++)m=_+u<<2,g+=X.r=h[m],y+=X.g=h[m+1],E+=X.b=h[m+2],P+=X.a=h[m+3],X=X.n,f<G&&(_+=S);if(m=u,j=it,a>0)for(c=0;c<L;c++)p=m<<2,h[p+3]=R=P*J>>>K,R>0?(h[p]=g*J>>>K,h[p+1]=y*J>>>K,h[p+2]=E*J>>>K):h[p]=h[p+1]=h[p+2]=0,p=u+((p=c+Y)<G?p:G)*S<<2,g-=j.r-(j.r=h[p]),y-=j.g-(j.g=h[p+1]),E-=j.b-(j.b=h[p+2]),P-=j.a-(j.a=h[p+3]),j=j.n,m+=S;else for(c=0;c<L;c++)p=m<<2,h[p+3]=R=P*J>>>K,R>0?(R=255/R,h[p]=(g*J>>>K)*R,h[p+1]=(y*J>>>K)*R,h[p+2]=(E*J>>>K)*R):h[p]=h[p+1]=h[p+2]=0,p=u+((p=c+Y)<G?p:G)*S<<2,g-=j.r-(j.r=h[p]),y-=j.g-(j.g=h[p+1]),E-=j.b-(j.b=h[p+2]),P-=j.a-(j.a=h[p+3]),j=j.n,m+=S}}return!0},o.BlurFilter=o.promote(i,"Filter")}(),function(){function i(t){this.alphaMap=t,this._alphaMap=null,this._mapData=null}var e=o.extend(i,o.Filter);e.clone=function(){var t=new i(this.alphaMap);return t._alphaMap=this._alphaMap,t._mapData=this._mapData,t},e.toString=function(){return"[AlphaMapFilter]"},e._applyFilter=function(t){if(!this.alphaMap)return!0;if(!this._prepAlphaMap())return!1;for(var r=t.data,n=this._mapData,a=0,h=r.length;a<h;a+=4)r[a+3]=n[a]||0;return!0},e._prepAlphaMap=function(){if(!this.alphaMap)return!1;if(this.alphaMap==this._alphaMap&&this._mapData)return!0;this._mapData=null;var t=this._alphaMap=this.alphaMap,r=t,n;t instanceof HTMLCanvasElement?n=r.getContext("2d"):(r=o.createCanvas?o.createCanvas():document.createElement("canvas"),r.width=t.width,r.height=t.height,n=r.getContext("2d"),n.drawImage(t,0,0));try{var a=n.getImageData(0,0,t.width,t.height)}catch{return!1}return this._mapData=a.data,!0},o.AlphaMapFilter=o.promote(i,"Filter")}(),function(){function i(t){this.mask=t}var e=o.extend(i,o.Filter);e.applyFilter=function(t,r,n,a,h,u,c,f){return this.mask?(u=u||t,c==null&&(c=r),f==null&&(f=n),u.save(),t!=u?!1:(u.globalCompositeOperation="destination-in",u.drawImage(this.mask,c,f),u.restore(),!0)):!0},e.clone=function(){return new i(this.mask)},e.toString=function(){return"[AlphaMaskFilter]"},o.AlphaMaskFilter=o.promote(i,"Filter")}(),function(){function i(t,r,n,a,h,u,c,f){this.redMultiplier=t??1,this.greenMultiplier=r??1,this.blueMultiplier=n??1,this.alphaMultiplier=a??1,this.redOffset=h||0,this.greenOffset=u||0,this.blueOffset=c||0,this.alphaOffset=f||0}var e=o.extend(i,o.Filter);e.toString=function(){return"[ColorFilter]"},e.clone=function(){return new i(this.redMultiplier,this.greenMultiplier,this.blueMultiplier,this.alphaMultiplier,this.redOffset,this.greenOffset,this.blueOffset,this.alphaOffset)},e._applyFilter=function(t){for(var r=t.data,n=r.length,a=0;a<n;a+=4)r[a]=r[a]*this.redMultiplier+this.redOffset,r[a+1]=r[a+1]*this.greenMultiplier+this.greenOffset,r[a+2]=r[a+2]*this.blueMultiplier+this.blueOffset,r[a+3]=r[a+3]*this.alphaMultiplier+this.alphaOffset;return!0},o.ColorFilter=o.promote(i,"Filter")}(),function(){function i(t,r,n,a){this.setColor(t,r,n,a)}var e=i.prototype;i.DELTA_INDEX=[0,.01,.02,.04,.05,.06,.07,.08,.1,.11,.12,.14,.15,.16,.17,.18,.2,.21,.22,.24,.25,.27,.28,.3,.32,.34,.36,.38,.4,.42,.44,.46,.48,.5,.53,.56,.59,.62,.65,.68,.71,.74,.77,.8,.83,.86,.89,.92,.95,.98,1,1.06,1.12,1.18,1.24,1.3,1.36,1.42,1.48,1.54,1.6,1.66,1.72,1.78,1.84,1.9,1.96,2,2.12,2.25,2.37,2.5,2.62,2.75,2.87,3,3.2,3.4,3.6,3.8,4,4.3,4.7,4.9,5,5.5,6,6.5,6.8,7,7.3,7.5,7.8,8,8.4,8.7,9,9.4,9.6,9.8,10],i.IDENTITY_MATRIX=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1],i.LENGTH=i.IDENTITY_MATRIX.length,e.setColor=function(t,r,n,a){return this.reset().adjustColor(t,r,n,a)},e.reset=function(){return this.copy(i.IDENTITY_MATRIX)},e.adjustColor=function(t,r,n,a){return this.adjustHue(a),this.adjustContrast(r),this.adjustBrightness(t),this.adjustSaturation(n)},e.adjustBrightness=function(t){return t==0||isNaN(t)?this:(t=this._cleanValue(t,255),this._multiplyMatrix([1,0,0,0,t,0,1,0,0,t,0,0,1,0,t,0,0,0,1,0,0,0,0,0,1]),this)},e.adjustContrast=function(t){if(t==0||isNaN(t))return this;t=this._cleanValue(t,100);var r;return t<0?r=127+t/100*127:(r=t%1,r==0?r=i.DELTA_INDEX[t]:r=i.DELTA_INDEX[t<<0]*(1-r)+i.DELTA_INDEX[(t<<0)+1]*r,r=r*127+127),this._multiplyMatrix([r/127,0,0,0,.5*(127-r),0,r/127,0,0,.5*(127-r),0,0,r/127,0,.5*(127-r),0,0,0,1,0,0,0,0,0,1]),this},e.adjustSaturation=function(t){if(t==0||isNaN(t))return this;t=this._cleanValue(t,100);var r=1+(t>0?3*t/100:t/100),n=.3086,a=.6094,h=.082;return this._multiplyMatrix([n*(1-r)+r,a*(1-r),h*(1-r),0,0,n*(1-r),a*(1-r)+r,h*(1-r),0,0,n*(1-r),a*(1-r),h*(1-r)+r,0,0,0,0,0,1,0,0,0,0,0,1]),this},e.adjustHue=function(t){if(t==0||isNaN(t))return this;t=this._cleanValue(t,180)/180*Math.PI;var r=Math.cos(t),n=Math.sin(t),a=.213,h=.715,u=.072;return this._multiplyMatrix([a+r*(1-a)+n*-a,h+r*-h+n*-h,u+r*-u+n*(1-u),0,0,a+r*-a+n*.143,h+r*(1-h)+n*.14,u+r*-u+n*-.283,0,0,a+r*-a+n*-(1-a),h+r*-h+n*h,u+r*(1-u)+n*u,0,0,0,0,0,1,0,0,0,0,0,1]),this},e.concat=function(t){return t=this._fixMatrix(t),t.length!=i.LENGTH?this:(this._multiplyMatrix(t),this)},e.clone=function(){return new i().copy(this)},e.toArray=function(){for(var t=[],r=0,n=i.LENGTH;r<n;r++)t[r]=this[r];return t},e.copy=function(t){for(var r=i.LENGTH,n=0;n<r;n++)this[n]=t[n];return this},e.toString=function(){return"[ColorMatrix]"},e._multiplyMatrix=function(t){var r,n,a,h=[];for(r=0;r<5;r++){for(n=0;n<5;n++)h[n]=this[n+r*5];for(n=0;n<5;n++){var u=0;for(a=0;a<5;a++)u+=t[n+a*5]*h[a];this[n+r*5]=u}}},e._cleanValue=function(t,r){return Math.min(r,Math.max(-r,t))},e._fixMatrix=function(t){return t instanceof i&&(t=t.toArray()),t.length<i.LENGTH?t=t.slice(0,t.length).concat(i.IDENTITY_MATRIX.slice(t.length,i.LENGTH)):t.length>i.LENGTH&&(t=t.slice(0,i.LENGTH)),t},o.ColorMatrix=i}(),function(){function i(t){this.matrix=t}var e=o.extend(i,o.Filter);e.toString=function(){return"[ColorMatrixFilter]"},e.clone=function(){return new i(this.matrix)},e._applyFilter=function(t){for(var r=t.data,n=r.length,a,h,u,c,f=this.matrix,p=f[0],_=f[1],m=f[2],w=f[3],g=f[4],y=f[5],E=f[6],P=f[7],M=f[8],x=f[9],T=f[10],R=f[11],k=f[12],v=f[13],S=f[14],L=f[15],b=f[16],G=f[17],H=f[18],Y=f[19],V=0;V<n;V+=4)a=r[V],h=r[V+1],u=r[V+2],c=r[V+3],r[V]=a*p+h*_+u*m+c*w+g,r[V+1]=a*y+h*E+u*P+c*M+x,r[V+2]=a*T+h*R+u*k+c*v+S,r[V+3]=a*L+h*b+u*G+c*H+Y;return!0},o.ColorMatrixFilter=o.promote(i,"Filter")}(),function(){function i(){throw"Touch cannot be instantiated"}i.isSupported=function(){return!!("ontouchstart"in window||window.navigator.msPointerEnabled&&window.navigator.msMaxTouchPoints>0||window.navigator.pointerEnabled&&window.navigator.maxTouchPoints>0)},i.enable=function(e,t,r){return!e||!e.canvas||!i.isSupported()?!1:(e.__touch||(e.__touch={pointers:{},multitouch:!t,preventDefault:!r,count:0},"ontouchstart"in window?i._IOS_enable(e):(window.navigator.msPointerEnabled||window.navigator.pointerEnabled)&&i._IE_enable(e)),!0)},i.disable=function(e){e&&("ontouchstart"in window?i._IOS_disable(e):(window.navigator.msPointerEnabled||window.navigator.pointerEnabled)&&i._IE_disable(e),delete e.__touch)},i._IOS_enable=function(e){var t=e.canvas,r=e.__touch.f=function(n){i._IOS_handleEvent(e,n)};t.addEventListener("touchstart",r,!1),t.addEventListener("touchmove",r,!1),t.addEventListener("touchend",r,!1),t.addEventListener("touchcancel",r,!1)},i._IOS_disable=function(e){var t=e.canvas;if(t){var r=e.__touch.f;t.removeEventListener("touchstart",r,!1),t.removeEventListener("touchmove",r,!1),t.removeEventListener("touchend",r,!1),t.removeEventListener("touchcancel",r,!1)}},i._IOS_handleEvent=function(e,t){if(e){e.__touch.preventDefault&&t.preventDefault&&t.preventDefault();for(var r=t.changedTouches,n=t.type,a=0,h=r.length;a<h;a++){var u=r[a],c=u.identifier;u.target==e.canvas&&(n=="touchstart"?this._handleStart(e,c,t,u.pageX,u.pageY):n=="touchmove"?this._handleMove(e,c,t,u.pageX,u.pageY):(n=="touchend"||n=="touchcancel")&&this._handleEnd(e,c,t))}}},i._IE_enable=function(e){var t=e.canvas,r=e.__touch.f=function(n){i._IE_handleEvent(e,n)};window.navigator.pointerEnabled===void 0?(t.addEventListener("MSPointerDown",r,!1),window.addEventListener("MSPointerMove",r,!1),window.addEventListener("MSPointerUp",r,!1),window.addEventListener("MSPointerCancel",r,!1),e.__touch.preventDefault&&(t.style.msTouchAction="none")):(t.addEventListener("pointerdown",r,!1),window.addEventListener("pointermove",r,!1),window.addEventListener("pointerup",r,!1),window.addEventListener("pointercancel",r,!1),e.__touch.preventDefault&&(t.style.touchAction="none")),e.__touch.activeIDs={}},i._IE_disable=function(e){var t=e.__touch.f;window.navigator.pointerEnabled===void 0?(window.removeEventListener("MSPointerMove",t,!1),window.removeEventListener("MSPointerUp",t,!1),window.removeEventListener("MSPointerCancel",t,!1),e.canvas&&e.canvas.removeEventListener("MSPointerDown",t,!1)):(window.removeEventListener("pointermove",t,!1),window.removeEventListener("pointerup",t,!1),window.removeEventListener("pointercancel",t,!1),e.canvas&&e.canvas.removeEventListener("pointerdown",t,!1))},i._IE_handleEvent=function(e,t){if(e){e.__touch.preventDefault&&t.preventDefault&&t.preventDefault();var r=t.type,n=t.pointerId,a=e.__touch.activeIDs;if(r=="MSPointerDown"||r=="pointerdown"){if(t.srcElement!=e.canvas)return;a[n]=!0,this._handleStart(e,n,t,t.pageX,t.pageY)}else a[n]&&(r=="MSPointerMove"||r=="pointermove"?this._handleMove(e,n,t,t.pageX,t.pageY):(r=="MSPointerUp"||r=="MSPointerCancel"||r=="pointerup"||r=="pointercancel")&&(delete a[n],this._handleEnd(e,n,t)))}},i._handleStart=function(e,t,r,n,a){var h=e.__touch;if(!(!h.multitouch&&h.count)){var u=h.pointers;u[t]||(u[t]=!0,h.count++,e._handlePointerDown(t,r,n,a))}},i._handleMove=function(e,t,r,n,a){e.__touch.pointers[t]&&e._handlePointerMove(t,r,n,a)},i._handleEnd=function(e,t,r){var n=e.__touch,a=n.pointers;a[t]&&(n.count--,e._handlePointerUp(t,r,!0),delete a[t])},o.Touch=i}(),function(){var i=o.EaselJS=o.EaselJS||{};i.version="0.8.2",i.buildDate="Thu, 26 Nov 2015 20:44:34 GMT"}(),function(){var i=o.PreloadJS=o.PreloadJS||{};i.version="0.6.2",i.buildDate="Thu, 26 Nov 2015 20:44:31 GMT"}(),function(){o.proxy=function(i,e){var t=Array.prototype.slice.call(arguments,2);return function(){return i.apply(e,Array.prototype.slice.call(arguments,0).concat(t))}}}(),function(){function i(t,r,n){this.Event_constructor("error"),this.title=t,this.message=r,this.data=n}var e=o.extend(i,o.Event);e.clone=function(){return new o.ErrorEvent(this.title,this.message,this.data)},o.ErrorEvent=o.promote(i,"Event")}(),function(i){function e(r,n){this.Event_constructor("progress"),this.loaded=r,this.total=n??1,this.progress=n==0?0:this.loaded/this.total}var t=o.extend(e,o.Event);t.clone=function(){return new o.ProgressEvent(this.loaded,this.total)},o.ProgressEvent=o.promote(e,"Event")}(),(function(){var i=!1,e={function:!0,object:!0},t=l&&!l.nodeType&&l,r=e[typeof window]&&window||this,n=t&&e.object&&d&&!d.nodeType&&typeof Et=="object"&&Et;n&&(n.global===n||n.window===n||n.self===n)&&(r=n);function a(p,_){p||(p=r.Object()),_||(_=r.Object());var m=p.Number||r.Number,w=p.String||r.String,g=p.Object||r.Object,y=p.Date||r.Date,E=p.SyntaxError||r.SyntaxError,P=p.TypeError||r.TypeError,M=p.Math||r.Math,x=p.JSON||r.JSON;typeof x=="object"&&x&&(_.stringify=x.stringify,_.parse=x.parse);var T=g.prototype,R=T.toString,k,v,S,L=new y(-0xc782b5b800cec);try{L=L.getUTCFullYear()==-109252&&L.getUTCMonth()===0&&L.getUTCDate()===1&&L.getUTCHours()==10&&L.getUTCMinutes()==37&&L.getUTCSeconds()==6&&L.getUTCMilliseconds()==708}catch{}function b(A){if(b[A]!==S)return b[A];var N;if(A=="bug-string-char-index")N=!1;else if(A=="json")N=b("json-stringify")&&b("json-parse");else{var O,q='{"a":[1,true,false,null,"\\u0000\\b\\n\\f\\r\\t"]}';if(A=="json-stringify"){var D=_.stringify,Z=typeof D=="function"&&L;if(Z){(O=function(){return 1}).toJSON=O;try{Z=D(0)==="0"&&D(new m)==="0"&&D(new w)=='""'&&D(R)===S&&D(S)===S&&D()===S&&D(O)==="1"&&D([O])=="[1]"&&D([S])=="[null]"&&D(null)=="null"&&D([S,R,null])=="[null,null,null]"&&D({a:[O,!0,!1,null,`\0\b
\f\r	`]})==q&&D(null,O)==="1"&&D([1,2],null,1)==`[
 1,
 2
]`&&D(new y(-864e13))=='"-271821-04-20T00:00:00.000Z"'&&D(new y(864e13))=='"+275760-09-13T00:00:00.000Z"'&&D(new y(-621987552e5))=='"-000001-01-01T00:00:00.000Z"'&&D(new y(-1))=='"1969-12-31T23:59:59.999Z"'}catch{Z=!1}}N=Z}if(A=="json-parse"){var I=_.parse;if(typeof I=="function")try{if(I("0")===0&&!I(!1)){O=I(q);var F=O.a.length==5&&O.a[0]===1;if(F){try{F=!I('"	"')}catch{}if(F)try{F=I("01")!==1}catch{}if(F)try{F=I("1.")!==1}catch{}}}}catch{F=!1}N=F}}return b[A]=!!N}if(!b("json")){var G="[object Function]",H="[object Date]",Y="[object Number]",V="[object String]",W="[object Array]",it="[object Boolean]",X=b("bug-string-char-index");if(!L)var j=M.floor,at=[0,31,59,90,120,151,181,212,243,273,304,334],U=function(A,N){return at[N]+365*(A-1970)+j((A-1969+(N=+(N>1)))/4)-j((A-1901+N)/100)+j((A-1601+N)/400)};if((k=T.hasOwnProperty)||(k=function(A){var N={},O;return(N.__proto__=null,N.__proto__={toString:1},N).toString!=R?k=function(q){var D=this.__proto__,Z=q in(this.__proto__=null,this);return this.__proto__=D,Z}:(O=N.constructor,k=function(q){var D=(this.constructor||O).prototype;return q in this&&!(q in D&&this[q]===D[q])}),N=null,k.call(this,A)}),v=function(A,N){var O=0,q,D,Z;(q=function(){this.valueOf=0}).prototype.valueOf=0,D=new q;for(Z in D)k.call(D,Z)&&O++;return q=D=null,O?O==2?v=function(I,F){var et={},Q=R.call(I)==G,rt;for(rt in I)!(Q&&rt=="prototype")&&!k.call(et,rt)&&(et[rt]=1)&&k.call(I,rt)&&F(rt)}:v=function(I,F){var et=R.call(I)==G,Q,rt;for(Q in I)!(et&&Q=="prototype")&&k.call(I,Q)&&!(rt=Q==="constructor")&&F(Q);(rt||k.call(I,Q="constructor"))&&F(Q)}:(D=["valueOf","toString","toLocaleString","propertyIsEnumerable","isPrototypeOf","hasOwnProperty","constructor"],v=function(I,F){var et=R.call(I)==G,Q,rt,ct=!et&&typeof I.constructor!="function"&&e[typeof I.hasOwnProperty]&&I.hasOwnProperty||k;for(Q in I)!(et&&Q=="prototype")&&ct.call(I,Q)&&F(Q);for(rt=D.length;Q=D[--rt];ct.call(I,Q)&&F(Q));}),v(A,N)},!b("json-stringify")){var tt={92:"\\\\",34:'\\"',8:"\\b",12:"\\f",10:"\\n",13:"\\r",9:"\\t"},st="000000",J=function(A,N){return(st+(N||0)).slice(-A)},K="\\u00",Pt=function(A){for(var N='"',O=0,q=A.length,D=!X||q>10,Z=D&&(X?A.split(""):A);O<q;O++){var I=A.charCodeAt(O);switch(I){case 8:case 9:case 10:case 12:case 13:case 34:case 92:N+=tt[I];break;default:if(I<32){N+=K+J(2,I.toString(16));break}N+=D?Z[O]:A.charAt(O)}}return N+'"'},St=function(A,N,O,q,D,Z,I){var F,et,Q,rt,ct,Nt,te,ee,ie,se,vt,ne,Ut,Ft,re,oe;try{F=N[A]}catch{}if(typeof F=="object"&&F)if(et=R.call(F),et==H&&!k.call(F,"toJSON"))if(F>-1/0&&F<1/0){if(U){for(ct=j(F/864e5),Q=j(ct/365.2425)+1970-1;U(Q+1,0)<=ct;Q++);for(rt=j((ct-U(Q,0))/30.42);U(Q,rt+1)<=ct;rt++);ct=1+ct-U(Q,rt),Nt=(F%864e5+864e5)%864e5,te=j(Nt/36e5)%24,ee=j(Nt/6e4)%60,ie=j(Nt/1e3)%60,se=Nt%1e3}else Q=F.getUTCFullYear(),rt=F.getUTCMonth(),ct=F.getUTCDate(),te=F.getUTCHours(),ee=F.getUTCMinutes(),ie=F.getUTCSeconds(),se=F.getUTCMilliseconds();F=(Q<=0||Q>=1e4?(Q<0?"-":"+")+J(6,Q<0?-Q:Q):J(4,Q))+"-"+J(2,rt+1)+"-"+J(2,ct)+"T"+J(2,te)+":"+J(2,ee)+":"+J(2,ie)+"."+J(3,se)+"Z"}else F=null;else typeof F.toJSON=="function"&&(et!=Y&&et!=V&&et!=W||k.call(F,"toJSON"))&&(F=F.toJSON(A));if(O&&(F=O.call(N,A,F)),F===null)return"null";if(et=R.call(F),et==it)return""+F;if(et==Y)return F>-1/0&&F<1/0?""+F:"null";if(et==V)return Pt(""+F);if(typeof F=="object"){for(Ft=I.length;Ft--;)if(I[Ft]===F)throw P();if(I.push(F),vt=[],re=Z,Z+=D,et==W){for(Ut=0,Ft=F.length;Ut<Ft;Ut++)ne=St(Ut,F,O,q,D,Z,I),vt.push(ne===S?"null":ne);oe=vt.length?D?`[
`+Z+vt.join(`,
`+Z)+`
`+re+"]":"["+vt.join(",")+"]":"[]"}else v(q||F,function(ae){var be=St(ae,F,O,q,D,Z,I);be!==S&&vt.push(Pt(ae)+":"+(D?" ":"")+be)}),oe=vt.length?D?`{
`+Z+vt.join(`,
`+Z)+`
`+re+"}":"{"+vt.join(",")+"}":"{}";return I.pop(),oe}};_.stringify=function(A,N,O){var q,D,Z,I;if(e[typeof N]&&N){if((I=R.call(N))==G)D=N;else if(I==W){Z={};for(var F=0,et=N.length,Q;F<et;Q=N[F++],I=R.call(Q),(I==V||I==Y)&&(Z[Q]=1));}}if(O)if((I=R.call(O))==Y){if((O-=O%1)>0)for(q="",O>10&&(O=10);q.length<O;q+=" ");}else I==V&&(q=O.length<=10?O:O.slice(0,10));return St("",(Q={},Q[""]=A,Q),D,Z,q,"",[])}}if(!b("json-parse")){var Dt=w.fromCharCode,Ot={92:"\\",34:'"',47:"/",98:"\b",116:"	",110:`
`,102:"\f",114:"\r"},B,Lt,nt=function(){throw B=Lt=null,E()},gt=function(){for(var A=Lt,N=A.length,O,q,D,Z,I;B<N;)switch(I=A.charCodeAt(B),I){case 9:case 10:case 13:case 32:B++;break;case 123:case 125:case 91:case 93:case 58:case 44:return O=X?A.charAt(B):A[B],B++,O;case 34:for(O="@",B++;B<N;)if(I=A.charCodeAt(B),I<32)nt();else if(I==92)switch(I=A.charCodeAt(++B),I){case 92:case 34:case 47:case 98:case 116:case 110:case 102:case 114:O+=Ot[I],B++;break;case 117:for(q=++B,D=B+4;B<D;B++)I=A.charCodeAt(B),I>=48&&I<=57||I>=97&&I<=102||I>=65&&I<=70||nt();O+=Dt("0x"+A.slice(q,B));break;default:nt()}else{if(I==34)break;for(I=A.charCodeAt(B),q=B;I>=32&&I!=92&&I!=34;)I=A.charCodeAt(++B);O+=A.slice(q,B)}if(A.charCodeAt(B)==34)return B++,O;nt();default:if(q=B,I==45&&(Z=!0,I=A.charCodeAt(++B)),I>=48&&I<=57){for(I==48&&(I=A.charCodeAt(B+1),I>=48&&I<=57)&&nt(),Z=!1;B<N&&(I=A.charCodeAt(B),I>=48&&I<=57);B++);if(A.charCodeAt(B)==46){for(D=++B;D<N&&(I=A.charCodeAt(D),I>=48&&I<=57);D++);D==B&&nt(),B=D}if(I=A.charCodeAt(B),I==101||I==69){for(I=A.charCodeAt(++B),(I==43||I==45)&&B++,D=B;D<N&&(I=A.charCodeAt(D),I>=48&&I<=57);D++);D==B&&nt(),B=D}return+A.slice(q,B)}if(Z&&nt(),A.slice(B,B+4)=="true")return B+=4,!0;if(A.slice(B,B+5)=="false")return B+=5,!1;if(A.slice(B,B+4)=="null")return B+=4,null;nt()}return"$"},kt=function(A){var N,O;if(A=="$"&&nt(),typeof A=="string"){if((X?A.charAt(0):A[0])=="@")return A.slice(1);if(A=="["){for(N=[];A=gt(),A!="]";O||(O=!0))O&&(A==","?(A=gt(),A=="]"&&nt()):nt()),A==","&&nt(),N.push(kt(A));return N}else if(A=="{"){for(N={};A=gt(),A!="}";O||(O=!0))O&&(A==","?(A=gt(),A=="}"&&nt()):nt()),(A==","||typeof A!="string"||(X?A.charAt(0):A[0])!="@"||gt()!=":")&&nt(),N[A.slice(1)]=kt(gt());return N}nt()}return A},Ee=function(A,N,O){var q=Se(A,N,O);q===S?delete A[N]:A[N]=q},Se=function(A,N,O){var q=A[N],D;if(typeof q=="object"&&q)if(R.call(q)==W)for(D=q.length;D--;)Ee(q,D,O);else v(q,function(Z){Ee(q,Z,O)});return O.call(A,N,q)};_.parse=function(A,N){var O,q;return B=0,Lt=""+A,O=kt(gt()),gt()!="$"&&nt(),B=Lt=null,N&&R.call(N)==G?Se((q={},q[""]=O,q),"",N):O}}}return _.runInContext=a,_}if(t&&!i)a(r,t);else{var h=r.JSON,u=r.JSON3,c=!1,f=a(r,r.JSON3={noConflict:function(){return c||(c=!0,r.JSON=h,r.JSON3=u,h=u=null),f}});r.JSON={parse:f.parse,stringify:f.stringify}}}).call(Et),function(){var i={};i.appendToHead=function(e){i.getHead().appendChild(e)},i.getHead=function(){return document.head||document.getElementsByTagName("head")[0]},i.getBody=function(){return document.body||document.getElementsByTagName("body")[0]},o.DomUtils=i}(),function(){var i={};i.parseXML=function(e,t){var r=null;try{if(window.DOMParser){var n=new DOMParser;r=n.parseFromString(e,t)}}catch{}if(!r)try{r=new ActiveXObject("Microsoft.XMLDOM"),r.async=!1,r.loadXML(e)}catch{r=null}return r},i.parseJSON=function(e){if(e==null)return null;try{return JSON.parse(e)}catch(t){throw t}},o.DataUtils=i}(),function(){function i(){this.src=null,this.type=null,this.id=null,this.maintainOrder=!1,this.callback=null,this.data=null,this.method=o.LoadItem.GET,this.values=null,this.headers=null,this.withCredentials=!1,this.mimeType=null,this.crossOrigin=null,this.loadTimeout=t.LOAD_TIMEOUT_DEFAULT}var e=i.prototype={},t=i;t.LOAD_TIMEOUT_DEFAULT=8e3,t.create=function(r){if(typeof r=="string"){var n=new i;return n.src=r,n}else{if(r instanceof t)return r;if(r instanceof Object&&r.src)return r.loadTimeout==null&&(r.loadTimeout=t.LOAD_TIMEOUT_DEFAULT),r;throw new Error("Type not recognized.")}},e.set=function(r){for(var n in r)this[n]=r[n];return this},o.LoadItem=t}(),function(){var i={};i.ABSOLUTE_PATT=/^(?:\w+:)?\/{2}/i,i.RELATIVE_PATT=/^[./]*?\//i,i.EXTENSION_PATT=/\/?[^/]+\.(\w{1,5})$/i,i.parseURI=function(e){var t={absolute:!1,relative:!1};if(e==null)return t;var r=e.indexOf("?");r>-1&&(e=e.substr(0,r));var n;return i.ABSOLUTE_PATT.test(e)?t.absolute=!0:i.RELATIVE_PATT.test(e)&&(t.relative=!0),(n=e.match(i.EXTENSION_PATT))&&(t.extension=n[1].toLowerCase()),t},i.formatQueryString=function(e,t){if(e==null)throw new Error("You must specify data.");var r=[];for(var n in e)r.push(n+"="+escape(e[n]));return t&&(r=r.concat(t)),r.join("&")},i.buildPath=function(e,t){if(t==null)return e;var r=[],n=e.indexOf("?");if(n!=-1){var a=e.slice(n+1);r=r.concat(a.split("&"))}return n!=-1?e.slice(0,n)+"?"+this.formatQueryString(t,r):e+"?"+this.formatQueryString(t,r)},i.isCrossDomain=function(e){var t=document.createElement("a");t.href=e.src;var r=document.createElement("a");r.href=location.href;var n=t.hostname!=""&&(t.port!=r.port||t.protocol!=r.protocol||t.hostname!=r.hostname);return n},i.isLocal=function(e){var t=document.createElement("a");return t.href=e.src,t.hostname==""&&t.protocol=="file:"},i.isBinary=function(e){switch(e){case o.AbstractLoader.IMAGE:case o.AbstractLoader.BINARY:return!0;default:return!1}},i.isImageTag=function(e){return e instanceof HTMLImageElement},i.isAudioTag=function(e){return window.HTMLAudioElement?e instanceof HTMLAudioElement:!1},i.isVideoTag=function(e){return window.HTMLVideoElement?e instanceof HTMLVideoElement:!1},i.isText=function(e){switch(e){case o.AbstractLoader.TEXT:case o.AbstractLoader.JSON:case o.AbstractLoader.MANIFEST:case o.AbstractLoader.XML:case o.AbstractLoader.CSS:case o.AbstractLoader.SVG:case o.AbstractLoader.JAVASCRIPT:case o.AbstractLoader.SPRITESHEET:return!0;default:return!1}},i.getTypeByExtension=function(e){if(e==null)return o.AbstractLoader.TEXT;switch(e.toLowerCase()){case"jpeg":case"jpg":case"gif":case"png":case"webp":case"bmp":return o.AbstractLoader.IMAGE;case"ogg":case"mp3":case"webm":return o.AbstractLoader.SOUND;case"mp4":case"webm":case"ts":return o.AbstractLoader.VIDEO;case"json":return o.AbstractLoader.JSON;case"xml":return o.AbstractLoader.XML;case"css":return o.AbstractLoader.CSS;case"js":return o.AbstractLoader.JAVASCRIPT;case"svg":return o.AbstractLoader.SVG;default:return o.AbstractLoader.TEXT}},o.RequestUtils=i}(),function(){function i(r,n,a){this.EventDispatcher_constructor(),this.loaded=!1,this.canceled=!1,this.progress=0,this.type=a,this.resultFormatter=null,r?this._item=o.LoadItem.create(r):this._item=null,this._preferXHR=n,this._result=null,this._rawResult=null,this._loadedItems=null,this._tagSrcAttribute=null,this._tag=null}var e=o.extend(i,o.EventDispatcher),t=i;t.POST="POST",t.GET="GET",t.BINARY="binary",t.CSS="css",t.IMAGE="image",t.JAVASCRIPT="javascript",t.JSON="json",t.JSONP="jsonp",t.MANIFEST="manifest",t.SOUND="sound",t.VIDEO="video",t.SPRITESHEET="spritesheet",t.SVG="svg",t.TEXT="text",t.XML="xml",e.getItem=function(){return this._item},e.getResult=function(r){return r?this._rawResult:this._result},e.getTag=function(){return this._tag},e.setTag=function(r){this._tag=r},e.load=function(){this._createRequest(),this._request.on("complete",this,this),this._request.on("progress",this,this),this._request.on("loadStart",this,this),this._request.on("abort",this,this),this._request.on("timeout",this,this),this._request.on("error",this,this);var r=new o.Event("initialize");r.loader=this._request,this.dispatchEvent(r),this._request.load()},e.cancel=function(){this.canceled=!0,this.destroy()},e.destroy=function(){this._request&&(this._request.removeAllEventListeners(),this._request.destroy()),this._request=null,this._item=null,this._rawResult=null,this._result=null,this._loadItems=null,this.removeAllEventListeners()},e.getLoadedItems=function(){return this._loadedItems},e._createRequest=function(){this._preferXHR?this._request=new o.XHRRequest(this._item):this._request=new o.TagRequest(this._item,this._tag||this._createTag(),this._tagSrcAttribute)},e._createTag=function(r){return null},e._sendLoadStart=function(){this._isCanceled()||this.dispatchEvent("loadstart")},e._sendProgress=function(r){if(!this._isCanceled()){var n=null;typeof r=="number"?(this.progress=r,n=new o.ProgressEvent(this.progress)):(n=r,this.progress=r.loaded/r.total,n.progress=this.progress,(isNaN(this.progress)||this.progress==1/0)&&(this.progress=0)),this.hasEventListener("progress")&&this.dispatchEvent(n)}},e._sendComplete=function(){if(!this._isCanceled()){this.loaded=!0;var r=new o.Event("complete");r.rawResult=this._rawResult,this._result!=null&&(r.result=this._result),this.dispatchEvent(r)}},e._sendError=function(r){this._isCanceled()||!this.hasEventListener("error")||(r==null&&(r=new o.ErrorEvent("PRELOAD_ERROR_EMPTY")),this.dispatchEvent(r))},e._isCanceled=function(){return!!(window.createjs==null||this.canceled)},e.resultFormatter=null,e.handleEvent=function(r){switch(r.type){case"complete":this._rawResult=r.target._response;var n=this.resultFormatter&&this.resultFormatter(this);n instanceof Function?n.call(this,o.proxy(this._resultFormatSuccess,this),o.proxy(this._resultFormatFailed,this)):(this._result=n||this._rawResult,this._sendComplete());break;case"progress":this._sendProgress(r);break;case"error":this._sendError(r);break;case"loadstart":this._sendLoadStart();break;case"abort":case"timeout":this._isCanceled()||this.dispatchEvent(new o.ErrorEvent("PRELOAD_"+r.type.toUpperCase()+"_ERROR"));break}},e._resultFormatSuccess=function(r){this._result=r,this._sendComplete()},e._resultFormatFailed=function(r){this._sendError(r)},e.buildPath=function(r,n){return o.RequestUtils.buildPath(r,n)},e.toString=function(){return"[PreloadJS AbstractLoader]"},o.AbstractLoader=o.promote(i,"EventDispatcher")}(),function(){function i(t,r,n){this.AbstractLoader_constructor(t,r,n),this.resultFormatter=this._formatResult,this._tagSrcAttribute="src",this.on("initialize",this._updateXHR,this)}var e=o.extend(i,o.AbstractLoader);e.load=function(){this._tag||(this._tag=this._createTag(this._item.src)),this._tag.preload="auto",this._tag.load(),this.AbstractLoader_load()},e._createTag=function(){},e._createRequest=function(){this._preferXHR?this._request=new o.XHRRequest(this._item):this._request=new o.MediaTagRequest(this._item,this._tag||this._createTag(),this._tagSrcAttribute)},e._updateXHR=function(t){t.loader.setResponseType&&t.loader.setResponseType("blob")},e._formatResult=function(t){if(this._tag.removeEventListener&&this._tag.removeEventListener("canplaythrough",this._loadedHandler),this._tag.onstalled=null,this._preferXHR){var r=window.URL||window.webkitURL,n=t.getResult(!0);t.getTag().src=r.createObjectURL(n)}return t.getTag()},o.AbstractMediaLoader=o.promote(i,"AbstractLoader")}(),function(){var i=function(t){this._item=t},e=o.extend(i,o.EventDispatcher);e.load=function(){},e.destroy=function(){},e.cancel=function(){},o.AbstractRequest=o.promote(i,"EventDispatcher")}(),function(){function i(t,r,n){this.AbstractRequest_constructor(t),this._tag=r,this._tagSrcAttribute=n,this._loadedHandler=o.proxy(this._handleTagComplete,this),this._addedToDOM=!1,this._startTagVisibility=null}var e=o.extend(i,o.AbstractRequest);e.load=function(){this._tag.onload=o.proxy(this._handleTagComplete,this),this._tag.onreadystatechange=o.proxy(this._handleReadyStateChange,this),this._tag.onerror=o.proxy(this._handleError,this);var t=new o.Event("initialize");t.loader=this._tag,this.dispatchEvent(t),this._hideTag(),this._loadTimeout=setTimeout(o.proxy(this._handleTimeout,this),this._item.loadTimeout),this._tag[this._tagSrcAttribute]=this._item.src,this._tag.parentNode==null&&(window.document.body.appendChild(this._tag),this._addedToDOM=!0)},e.destroy=function(){this._clean(),this._tag=null,this.AbstractRequest_destroy()},e._handleReadyStateChange=function(){clearTimeout(this._loadTimeout);var t=this._tag;(t.readyState=="loaded"||t.readyState=="complete")&&this._handleTagComplete()},e._handleError=function(){this._clean(),this.dispatchEvent("error")},e._handleTagComplete=function(){this._rawResult=this._tag,this._result=this.resultFormatter&&this.resultFormatter(this)||this._rawResult,this._clean(),this._showTag(),this.dispatchEvent("complete")},e._handleTimeout=function(){this._clean(),this.dispatchEvent(new o.Event("timeout"))},e._clean=function(){this._tag.onload=null,this._tag.onreadystatechange=null,this._tag.onerror=null,this._addedToDOM&&this._tag.parentNode!=null&&this._tag.parentNode.removeChild(this._tag),clearTimeout(this._loadTimeout)},e._hideTag=function(){this._startTagVisibility=this._tag.style.visibility,this._tag.style.visibility="hidden"},e._showTag=function(){this._tag.style.visibility=this._startTagVisibility},e._handleStalled=function(){},o.TagRequest=o.promote(i,"AbstractRequest")}(),function(){function i(t,r,n){this.AbstractRequest_constructor(t),this._tag=r,this._tagSrcAttribute=n,this._loadedHandler=o.proxy(this._handleTagComplete,this)}var e=o.extend(i,o.TagRequest);e.load=function(){var t=o.proxy(this._handleStalled,this);this._stalledCallback=t;var r=o.proxy(this._handleProgress,this);this._handleProgress=r,this._tag.addEventListener("stalled",t),this._tag.addEventListener("progress",r),this._tag.addEventListener&&this._tag.addEventListener("canplaythrough",this._loadedHandler,!1),this.TagRequest_load()},e._handleReadyStateChange=function(){clearTimeout(this._loadTimeout);var t=this._tag;(t.readyState=="loaded"||t.readyState=="complete")&&this._handleTagComplete()},e._handleStalled=function(){},e._handleProgress=function(t){if(!(!t||t.loaded>0&&t.total==0)){var r=new o.ProgressEvent(t.loaded,t.total);this.dispatchEvent(r)}},e._clean=function(){this._tag.removeEventListener&&this._tag.removeEventListener("canplaythrough",this._loadedHandler),this._tag.removeEventListener("stalled",this._stalledCallback),this._tag.removeEventListener("progress",this._progressCallback),this.TagRequest__clean()},o.MediaTagRequest=o.promote(i,"TagRequest")}(),function(){function i(t){this.AbstractRequest_constructor(t),this._request=null,this._loadTimeout=null,this._xhrLevel=1,this._response=null,this._rawResponse=null,this._canceled=!1,this._handleLoadStartProxy=o.proxy(this._handleLoadStart,this),this._handleProgressProxy=o.proxy(this._handleProgress,this),this._handleAbortProxy=o.proxy(this._handleAbort,this),this._handleErrorProxy=o.proxy(this._handleError,this),this._handleTimeoutProxy=o.proxy(this._handleTimeout,this),this._handleLoadProxy=o.proxy(this._handleLoad,this),this._handleReadyStateChangeProxy=o.proxy(this._handleReadyStateChange,this),this._createXHR(t)}var e=o.extend(i,o.AbstractRequest);i.ACTIVEX_VERSIONS=["Msxml2.XMLHTTP.6.0","Msxml2.XMLHTTP.5.0","Msxml2.XMLHTTP.4.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],e.getResult=function(t){return t&&this._rawResponse?this._rawResponse:this._response},e.cancel=function(){this.canceled=!0,this._clean(),this._request.abort()},e.load=function(){if(this._request==null){this._handleError();return}this._request.addEventListener!=null?(this._request.addEventListener("loadstart",this._handleLoadStartProxy,!1),this._request.addEventListener("progress",this._handleProgressProxy,!1),this._request.addEventListener("abort",this._handleAbortProxy,!1),this._request.addEventListener("error",this._handleErrorProxy,!1),this._request.addEventListener("timeout",this._handleTimeoutProxy,!1),this._request.addEventListener("load",this._handleLoadProxy,!1),this._request.addEventListener("readystatechange",this._handleReadyStateChangeProxy,!1)):(this._request.onloadstart=this._handleLoadStartProxy,this._request.onprogress=this._handleProgressProxy,this._request.onabort=this._handleAbortProxy,this._request.onerror=this._handleErrorProxy,this._request.ontimeout=this._handleTimeoutProxy,this._request.onload=this._handleLoadProxy,this._request.onreadystatechange=this._handleReadyStateChangeProxy),this._xhrLevel==1&&(this._loadTimeout=setTimeout(o.proxy(this._handleTimeout,this),this._item.loadTimeout));try{!this._item.values||this._item.method==o.AbstractLoader.GET?this._request.send():this._item.method==o.AbstractLoader.POST&&this._request.send(o.RequestUtils.formatQueryString(this._item.values))}catch(t){this.dispatchEvent(new o.ErrorEvent("XHR_SEND",null,t))}},e.setResponseType=function(t){t==="blob"&&(t=window.URL?"blob":"arraybuffer",this._responseType=t),this._request.responseType=t},e.getAllResponseHeaders=function(){return this._request.getAllResponseHeaders instanceof Function?this._request.getAllResponseHeaders():null},e.getResponseHeader=function(t){return this._request.getResponseHeader instanceof Function?this._request.getResponseHeader(t):null},e._handleProgress=function(t){if(!(!t||t.loaded>0&&t.total==0)){var r=new o.ProgressEvent(t.loaded,t.total);this.dispatchEvent(r)}},e._handleLoadStart=function(t){clearTimeout(this._loadTimeout),this.dispatchEvent("loadstart")},e._handleAbort=function(t){this._clean(),this.dispatchEvent(new o.ErrorEvent("XHR_ABORTED",null,t))},e._handleError=function(t){this._clean(),this.dispatchEvent(new o.ErrorEvent(t.message))},e._handleReadyStateChange=function(t){this._request.readyState==4&&this._handleLoad()},e._handleLoad=function(t){if(!this.loaded){this.loaded=!0;var r=this._checkError();if(r){this._handleError(r);return}if(this._response=this._getResponse(),this._responseType==="arraybuffer")try{this._response=new Blob([this._response])}catch(a){if(window.BlobBuilder=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder,a.name==="TypeError"&&window.BlobBuilder){var n=new BlobBuilder;n.append(this._response),this._response=n.getBlob()}}this._clean(),this.dispatchEvent(new o.Event("complete"))}},e._handleTimeout=function(t){this._clean(),this.dispatchEvent(new o.ErrorEvent("PRELOAD_TIMEOUT",null,t))},e._checkError=function(){var t=parseInt(this._request.status);switch(t){case 404:case 0:return new Error(t)}return null},e._getResponse=function(){if(this._response!=null)return this._response;if(this._request.response!=null)return this._request.response;try{if(this._request.responseText!=null)return this._request.responseText}catch{}try{if(this._request.responseXML!=null)return this._request.responseXML}catch{}return null},e._createXHR=function(t){var r=o.RequestUtils.isCrossDomain(t),n={},a=null;if(window.XMLHttpRequest)a=new XMLHttpRequest,r&&a.withCredentials===void 0&&window.XDomainRequest&&(a=new XDomainRequest);else{for(var h=0,u=s.ACTIVEX_VERSIONS.length;h<u;h++){var c=s.ACTIVEX_VERSIONS[h];try{a=new ActiveXObject(c);break}catch{}}if(a==null)return!1}t.mimeType==null&&o.RequestUtils.isText(t.type)&&(t.mimeType="text/plain; charset=utf-8"),t.mimeType&&a.overrideMimeType&&a.overrideMimeType(t.mimeType),this._xhrLevel=typeof a.responseType=="string"?2:1;var f=null;if(t.method==o.AbstractLoader.GET?f=o.RequestUtils.buildPath(t.src,t.values):f=t.src,a.open(t.method||o.AbstractLoader.GET,f,!0),r&&a instanceof XMLHttpRequest&&this._xhrLevel==1&&(n.Origin=location.origin),t.values&&t.method==o.AbstractLoader.POST&&(n["Content-Type"]="application/x-www-form-urlencoded"),!r&&!n["X-Requested-With"]&&(n["X-Requested-With"]="XMLHttpRequest"),t.headers)for(var p in t.headers)n[p]=t.headers[p];for(p in n)a.setRequestHeader(p,n[p]);return a instanceof XMLHttpRequest&&t.withCredentials!==void 0&&(a.withCredentials=t.withCredentials),this._request=a,!0},e._clean=function(){clearTimeout(this._loadTimeout),this._request.removeEventListener!=null?(this._request.removeEventListener("loadstart",this._handleLoadStartProxy),this._request.removeEventListener("progress",this._handleProgressProxy),this._request.removeEventListener("abort",this._handleAbortProxy),this._request.removeEventListener("error",this._handleErrorProxy),this._request.removeEventListener("timeout",this._handleTimeoutProxy),this._request.removeEventListener("load",this._handleLoadProxy),this._request.removeEventListener("readystatechange",this._handleReadyStateChangeProxy)):(this._request.onloadstart=null,this._request.onprogress=null,this._request.onabort=null,this._request.onerror=null,this._request.ontimeout=null,this._request.onload=null,this._request.onreadystatechange=null)},e.toString=function(){return"[PreloadJS XHRRequest]"},o.XHRRequest=o.promote(i,"AbstractRequest")}(),function(){function i(r,n,a){this.AbstractLoader_constructor(),this._plugins=[],this._typeCallbacks={},this._extensionCallbacks={},this.next=null,this.maintainScriptOrder=!0,this.stopOnError=!1,this._maxConnections=1,this._availableLoaders=[o.ImageLoader,o.JavaScriptLoader,o.CSSLoader,o.JSONLoader,o.JSONPLoader,o.SoundLoader,o.ManifestLoader,o.SpriteSheetLoader,o.XMLLoader,o.SVGLoader,o.BinaryLoader,o.VideoLoader,o.TextLoader],this._defaultLoaderLength=this._availableLoaders.length,this.init(r,n,a)}var e=o.extend(i,o.AbstractLoader),t=i;e.init=function(r,n,a){this.useXHR=!0,this.preferXHR=!0,this._preferXHR=!0,this.setPreferXHR(r),this._paused=!1,this._basePath=n,this._crossOrigin=a,this._loadStartWasDispatched=!1,this._currentlyLoadingScript=null,this._currentLoads=[],this._loadQueue=[],this._loadQueueBackup=[],this._loadItemsById={},this._loadItemsBySrc={},this._loadedResults={},this._loadedRawResults={},this._numItems=0,this._numItemsLoaded=0,this._scriptOrder=[],this._loadedScripts=[],this._lastProgress=NaN},t.loadTimeout=8e3,t.LOAD_TIMEOUT=0,t.BINARY=o.AbstractLoader.BINARY,t.CSS=o.AbstractLoader.CSS,t.IMAGE=o.AbstractLoader.IMAGE,t.JAVASCRIPT=o.AbstractLoader.JAVASCRIPT,t.JSON=o.AbstractLoader.JSON,t.JSONP=o.AbstractLoader.JSONP,t.MANIFEST=o.AbstractLoader.MANIFEST,t.SOUND=o.AbstractLoader.SOUND,t.VIDEO=o.AbstractLoader.VIDEO,t.SVG=o.AbstractLoader.SVG,t.TEXT=o.AbstractLoader.TEXT,t.XML=o.AbstractLoader.XML,t.POST=o.AbstractLoader.POST,t.GET=o.AbstractLoader.GET,e.registerLoader=function(r){if(!r||!r.canLoadItem)throw new Error("loader is of an incorrect type.");if(this._availableLoaders.indexOf(r)!=-1)throw new Error("loader already exists.");this._availableLoaders.unshift(r)},e.unregisterLoader=function(r){var n=this._availableLoaders.indexOf(r);n!=-1&&n<this._defaultLoaderLength-1&&this._availableLoaders.splice(n,1)},e.setUseXHR=function(r){return this.setPreferXHR(r)},e.setPreferXHR=function(r){return this.preferXHR=r!=!1&&window.XMLHttpRequest!=null,this.preferXHR},e.removeAll=function(){this.remove()},e.remove=function(r){var n=null;if(r&&!Array.isArray(r))n=[r];else if(r)n=r;else if(arguments.length>0)return;var a=!1;if(n){for(;n.length;){var u=n.pop(),c=this.getResult(u);for(f=this._loadQueue.length-1;f>=0;f--)if(p=this._loadQueue[f].getItem(),p.id==u||p.src==u){this._loadQueue.splice(f,1)[0].cancel();break}for(f=this._loadQueueBackup.length-1;f>=0;f--)if(p=this._loadQueueBackup[f].getItem(),p.id==u||p.src==u){this._loadQueueBackup.splice(f,1)[0].cancel();break}if(c)this._disposeItem(this.getItem(u));else for(var f=this._currentLoads.length-1;f>=0;f--){var p=this._currentLoads[f].getItem();if(p.id==u||p.src==u){this._currentLoads.splice(f,1)[0].cancel(),a=!0;break}}}a&&this._loadNext()}else{this.close();for(var h in this._loadItemsById)this._disposeItem(this._loadItemsById[h]);this.init(this.preferXHR,this._basePath)}},e.reset=function(){this.close();for(var r in this._loadItemsById)this._disposeItem(this._loadItemsById[r]);for(var n=[],a=0,h=this._loadQueueBackup.length;a<h;a++)n.push(this._loadQueueBackup[a].getItem());this.loadManifest(n,!1)},e.installPlugin=function(r){if(r!=null&&r.getPreloadHandlers!=null){this._plugins.push(r);var n=r.getPreloadHandlers();if(n.scope=r,n.types!=null)for(var a=0,h=n.types.length;a<h;a++)this._typeCallbacks[n.types[a]]=n;if(n.extensions!=null)for(a=0,h=n.extensions.length;a<h;a++)this._extensionCallbacks[n.extensions[a]]=n}},e.setMaxConnections=function(r){this._maxConnections=r,!this._paused&&this._loadQueue.length>0&&this._loadNext()},e.loadFile=function(r,n,a){if(r==null){var h=new o.ErrorEvent("PRELOAD_NO_FILE");this._sendError(h);return}this._addItem(r,null,a),n!==!1?this.setPaused(!1):this.setPaused(!0)},e.loadManifest=function(r,n,a){var h=null,u=null;if(Array.isArray(r)){if(r.length==0){var c=new o.ErrorEvent("PRELOAD_MANIFEST_EMPTY");this._sendError(c);return}h=r}else if(typeof r=="string")h=[{src:r,type:t.MANIFEST}];else if(typeof r=="object")if(r.src!==void 0){if(r.type==null)r.type=t.MANIFEST;else if(r.type!=t.MANIFEST){var c=new o.ErrorEvent("PRELOAD_MANIFEST_TYPE");this._sendError(c)}h=[r]}else r.manifest!==void 0&&(h=r.manifest,u=r.path);else{var c=new o.ErrorEvent("PRELOAD_MANIFEST_NULL");this._sendError(c);return}for(var f=0,p=h.length;f<p;f++)this._addItem(h[f],u,a);n!==!1?this.setPaused(!1):this.setPaused(!0)},e.load=function(){this.setPaused(!1)},e.getItem=function(r){return this._loadItemsById[r]||this._loadItemsBySrc[r]},e.getResult=function(r,n){var a=this._loadItemsById[r]||this._loadItemsBySrc[r];if(a==null)return null;var h=a.id;return n&&this._loadedRawResults[h]?this._loadedRawResults[h]:this._loadedResults[h]},e.getItems=function(r){var n=[];for(var a in this._loadItemsById){var h=this._loadItemsById[a],u=this.getResult(a);r===!0&&u==null||n.push({item:h,result:u,rawResult:this.getResult(a,!0)})}return n},e.setPaused=function(r){this._paused=r,this._paused||this._loadNext()},e.close=function(){for(;this._currentLoads.length;)this._currentLoads.pop().cancel();this._scriptOrder.length=0,this._loadedScripts.length=0,this.loadStartWasDispatched=!1,this._itemCount=0,this._lastProgress=NaN},e._addItem=function(r,n,a){var h=this._createLoadItem(r,n,a);if(h!=null){var u=this._createLoader(h);u!=null&&("plugins"in u&&(u.plugins=this._plugins),h._loader=u,this._loadQueue.push(u),this._loadQueueBackup.push(u),this._numItems++,this._updateProgress(),(this.maintainScriptOrder&&h.type==o.LoadQueue.JAVASCRIPT||h.maintainOrder===!0)&&(this._scriptOrder.push(h),this._loadedScripts.push(null)))}},e._createLoadItem=function(r,n,a){var h=o.LoadItem.create(r);if(h==null)return null;var u="",c=a||this._basePath;if(h.src instanceof Object){if(!h.type)return null;if(n){u=n;var f=o.RequestUtils.parseURI(n);c!=null&&!f.absolute&&!f.relative&&(u=c+u)}else c!=null&&(u=c)}else{var p=o.RequestUtils.parseURI(h.src);p.extension&&(h.ext=p.extension),h.type==null&&(h.type=o.RequestUtils.getTypeByExtension(h.ext));var _=h.src;if(!p.absolute&&!p.relative)if(n){u=n;var f=o.RequestUtils.parseURI(n);_=n+_,c!=null&&!f.absolute&&!f.relative&&(u=c+u)}else c!=null&&(u=c);h.src=u+h.src}h.path=u,(h.id===void 0||h.id===null||h.id==="")&&(h.id=_);var m=this._typeCallbacks[h.type]||this._extensionCallbacks[h.ext];if(m){var w=m.callback.call(m.scope,h,this);if(w===!1)return null;w===!0||w!=null&&(h._loader=w),p=o.RequestUtils.parseURI(h.src),p.extension!=null&&(h.ext=p.extension)}return this._loadItemsById[h.id]=h,this._loadItemsBySrc[h.src]=h,h.crossOrigin==null&&(h.crossOrigin=this._crossOrigin),h},e._createLoader=function(r){if(r._loader!=null)return r._loader;for(var n=this.preferXHR,a=0;a<this._availableLoaders.length;a++){var h=this._availableLoaders[a];if(h&&h.canLoadItem(r))return new h(r,n)}return null},e._loadNext=function(){if(!this._paused){this._loadStartWasDispatched||(this._sendLoadStart(),this._loadStartWasDispatched=!0),this._numItems==this._numItemsLoaded?(this.loaded=!0,this._sendComplete(),this.next&&this.next.load&&this.next.load()):this.loaded=!1;for(var r=0;r<this._loadQueue.length&&!(this._currentLoads.length>=this._maxConnections);r++){var n=this._loadQueue[r];this._canStartLoad(n)&&(this._loadQueue.splice(r,1),r--,this._loadItem(n))}}},e._loadItem=function(r){r.on("fileload",this._handleFileLoad,this),r.on("progress",this._handleProgress,this),r.on("complete",this._handleFileComplete,this),r.on("error",this._handleError,this),r.on("fileerror",this._handleFileError,this),this._currentLoads.push(r),this._sendFileStart(r.getItem()),r.load()},e._handleFileLoad=function(r){r.target=null,this.dispatchEvent(r)},e._handleFileError=function(r){var n=new o.ErrorEvent("FILE_LOAD_ERROR",null,r.item);this._sendError(n)},e._handleError=function(r){var n=r.target;this._numItemsLoaded++,this._finishOrderedItem(n,!0),this._updateProgress();var a=new o.ErrorEvent("FILE_LOAD_ERROR",null,n.getItem());this._sendError(a),this.stopOnError?this.setPaused(!0):(this._removeLoadItem(n),this._cleanLoadItem(n),this._loadNext())},e._handleFileComplete=function(r){var n=r.target,a=n.getItem(),h=n.getResult();this._loadedResults[a.id]=h;var u=n.getResult(!0);u!=null&&u!==h&&(this._loadedRawResults[a.id]=u),this._saveLoadedItems(n),this._removeLoadItem(n),this._finishOrderedItem(n)||this._processFinishedLoad(a,n),this._cleanLoadItem(n)},e._saveLoadedItems=function(r){var n=r.getLoadedItems();if(n!==null)for(var a=0;a<n.length;a++){var h=n[a].item;this._loadItemsBySrc[h.src]=h,this._loadItemsById[h.id]=h,this._loadedResults[h.id]=n[a].result,this._loadedRawResults[h.id]=n[a].rawResult}},e._finishOrderedItem=function(r,n){var a=r.getItem();if(this.maintainScriptOrder&&a.type==o.LoadQueue.JAVASCRIPT||a.maintainOrder){r instanceof o.JavaScriptLoader&&(this._currentlyLoadingScript=!1);var h=o.indexOf(this._scriptOrder,a);return h==-1?!1:(this._loadedScripts[h]=n===!0?!0:a,this._checkScriptLoadOrder(),!0)}return!1},e._checkScriptLoadOrder=function(){for(var r=this._loadedScripts.length,n=0;n<r;n++){var a=this._loadedScripts[n];if(a===null)break;if(a!==!0){var h=this._loadedResults[a.id];a.type==o.LoadQueue.JAVASCRIPT&&o.DomUtils.appendToHead(h);var u=a._loader;this._processFinishedLoad(a,u),this._loadedScripts[n]=!0}}},e._processFinishedLoad=function(r,n){if(this._numItemsLoaded++,!this.maintainScriptOrder&&r.type==o.LoadQueue.JAVASCRIPT){var a=n.getTag();o.DomUtils.appendToHead(a)}this._updateProgress(),this._sendFileComplete(r,n),this._loadNext()},e._canStartLoad=function(r){if(!this.maintainScriptOrder||r.preferXHR)return!0;var n=r.getItem();if(n.type!=o.LoadQueue.JAVASCRIPT)return!0;if(this._currentlyLoadingScript)return!1;for(var a=this._scriptOrder.indexOf(n),h=0;h<a;){var u=this._loadedScripts[h];if(u==null)return!1;h++}return this._currentlyLoadingScript=!0,!0},e._removeLoadItem=function(r){for(var n=this._currentLoads.length,a=0;a<n;a++)if(this._currentLoads[a]==r){this._currentLoads.splice(a,1);break}},e._cleanLoadItem=function(r){var n=r.getItem();n&&delete n._loader},e._handleProgress=function(r){var n=r.target;this._sendFileProgress(n.getItem(),n.progress),this._updateProgress()},e._updateProgress=function(){var r=this._numItemsLoaded/this._numItems,n=this._numItems-this._numItemsLoaded;if(n>0){for(var a=0,h=0,u=this._currentLoads.length;h<u;h++)a+=this._currentLoads[h].progress;r+=a/n*(n/this._numItems)}this._lastProgress!=r&&(this._sendProgress(r),this._lastProgress=r)},e._disposeItem=function(r){delete this._loadedResults[r.id],delete this._loadedRawResults[r.id],delete this._loadItemsById[r.id],delete this._loadItemsBySrc[r.src]},e._sendFileProgress=function(r,n){if(!(this._isCanceled()||this._paused)&&this.hasEventListener("fileprogress")){var a=new o.Event("fileprogress");a.progress=n,a.loaded=n,a.total=1,a.item=r,this.dispatchEvent(a)}},e._sendFileComplete=function(r,n){if(!(this._isCanceled()||this._paused)){var a=new o.Event("fileload");a.loader=n,a.item=r,a.result=this._loadedResults[r.id],a.rawResult=this._loadedRawResults[r.id],r.completeHandler&&r.completeHandler(a),this.hasEventListener("fileload")&&this.dispatchEvent(a)}},e._sendFileStart=function(r){var n=new o.Event("filestart");n.item=r,this.hasEventListener("filestart")&&this.dispatchEvent(n)},e.toString=function(){return"[PreloadJS LoadQueue]"},o.LoadQueue=o.promote(i,"AbstractLoader")}(),function(){function i(t){this.AbstractLoader_constructor(t,!0,o.AbstractLoader.TEXT)}o.extend(i,o.AbstractLoader);var e=i;e.canLoadItem=function(t){return t.type==o.AbstractLoader.TEXT},o.TextLoader=o.promote(i,"AbstractLoader")}(),function(){function i(r){this.AbstractLoader_constructor(r,!0,o.AbstractLoader.BINARY),this.on("initialize",this._updateXHR,this)}var e=o.extend(i,o.AbstractLoader),t=i;t.canLoadItem=function(r){return r.type==o.AbstractLoader.BINARY},e._updateXHR=function(r){r.loader.setResponseType("arraybuffer")},o.BinaryLoader=o.promote(i,"AbstractLoader")}(),function(){function i(r,n){this.AbstractLoader_constructor(r,n,o.AbstractLoader.CSS),this.resultFormatter=this._formatResult,this._tagSrcAttribute="href",n?this._tag=document.createElement("style"):this._tag=document.createElement("link"),this._tag.rel="stylesheet",this._tag.type="text/css"}var e=o.extend(i,o.AbstractLoader),t=i;t.canLoadItem=function(r){return r.type==o.AbstractLoader.CSS},e._formatResult=function(r){if(this._preferXHR){var n=r.getTag();if(n.styleSheet)n.styleSheet.cssText=r.getResult(!0);else{var a=document.createTextNode(r.getResult(!0));n.appendChild(a)}}else n=this._tag;return o.DomUtils.appendToHead(n),n},o.CSSLoader=o.promote(i,"AbstractLoader")}(),function(){function i(r,n){this.AbstractLoader_constructor(r,n,o.AbstractLoader.IMAGE),this.resultFormatter=this._formatResult,this._tagSrcAttribute="src",o.RequestUtils.isImageTag(r)?this._tag=r:o.RequestUtils.isImageTag(r.src)?this._tag=r.src:o.RequestUtils.isImageTag(r.tag)&&(this._tag=r.tag),this._tag!=null?this._preferXHR=!1:this._tag=document.createElement("img"),this.on("initialize",this._updateXHR,this)}var e=o.extend(i,o.AbstractLoader),t=i;t.canLoadItem=function(r){return r.type==o.AbstractLoader.IMAGE},e.load=function(){if(this._tag.src!=""&&this._tag.complete){this._sendComplete();return}var r=this._item.crossOrigin;r==!0&&(r="Anonymous"),r!=null&&!o.RequestUtils.isLocal(this._item.src)&&(this._tag.crossOrigin=r),this.AbstractLoader_load()},e._updateXHR=function(r){r.loader.mimeType="text/plain; charset=x-user-defined-binary",r.loader.setResponseType&&r.loader.setResponseType("blob")},e._formatResult=function(r){return this._formatImage},e._formatImage=function(r,n){var a=this._tag,h=window.URL||window.webkitURL;if(this._preferXHR)if(h){var u=h.createObjectURL(this.getResult(!0));a.src=u,a.addEventListener("load",this._cleanUpURL,!1),a.addEventListener("error",this._cleanUpURL,!1)}else a.src=this._item.src;a.complete?r(a):(a.onload=o.proxy(function(){r(this._tag)},this),a.onerror=o.proxy(function(){n(_this._tag)},this))},e._cleanUpURL=function(r){var n=window.URL||window.webkitURL;n.revokeObjectURL(r.target.src)},o.ImageLoader=o.promote(i,"AbstractLoader")}(),function(){function i(r,n){this.AbstractLoader_constructor(r,n,o.AbstractLoader.JAVASCRIPT),this.resultFormatter=this._formatResult,this._tagSrcAttribute="src",this.setTag(document.createElement("script"))}var e=o.extend(i,o.AbstractLoader),t=i;t.canLoadItem=function(r){return r.type==o.AbstractLoader.JAVASCRIPT},e._formatResult=function(r){var n=r.getTag();return this._preferXHR&&(n.text=r.getResult(!0)),n},o.JavaScriptLoader=o.promote(i,"AbstractLoader")}(),function(){function i(r){this.AbstractLoader_constructor(r,!0,o.AbstractLoader.JSON),this.resultFormatter=this._formatResult}var e=o.extend(i,o.AbstractLoader),t=i;t.canLoadItem=function(r){return r.type==o.AbstractLoader.JSON},e._formatResult=function(r){var n=null;try{n=o.DataUtils.parseJSON(r.getResult(!0))}catch(h){var a=new o.ErrorEvent("JSON_FORMAT",null,h);return this._sendError(a),h}return n},o.JSONLoader=o.promote(i,"AbstractLoader")}(),function(){function i(r){this.AbstractLoader_constructor(r,!1,o.AbstractLoader.JSONP),this.setTag(document.createElement("script")),this.getTag().type="text/javascript"}var e=o.extend(i,o.AbstractLoader),t=i;t.canLoadItem=function(r){return r.type==o.AbstractLoader.JSONP},e.cancel=function(){this.AbstractLoader_cancel(),this._dispose()},e.load=function(){if(this._item.callback==null)throw new Error("callback is required for loading JSONP requests.");if(window[this._item.callback]!=null)throw new Error("JSONP callback '"+this._item.callback+"' already exists on window. You need to specify a different callback or re-name the current one.");window[this._item.callback]=o.proxy(this._handleLoad,this),window.document.body.appendChild(this._tag),this._loadTimeout=setTimeout(o.proxy(this._handleTimeout,this),this._item.loadTimeout),this._tag.src=this._item.src},e._handleLoad=function(r){this._result=this._rawResult=r,this._sendComplete(),this._dispose()},e._handleTimeout=function(){this._dispose(),this.dispatchEvent(new o.ErrorEvent("timeout"))},e._dispose=function(){window.document.body.removeChild(this._tag),delete window[this._item.callback],clearTimeout(this._loadTimeout)},o.JSONPLoader=o.promote(i,"AbstractLoader")}(),function(){function i(r){this.AbstractLoader_constructor(r,null,o.AbstractLoader.MANIFEST),this.plugins=null,this._manifestQueue=null}var e=o.extend(i,o.AbstractLoader),t=i;t.MANIFEST_PROGRESS=.25,t.canLoadItem=function(r){return r.type==o.AbstractLoader.MANIFEST},e.load=function(){this.AbstractLoader_load()},e._createRequest=function(){var r=this._item.callback;r!=null?this._request=new o.JSONPLoader(this._item):this._request=new o.JSONLoader(this._item)},e.handleEvent=function(r){switch(r.type){case"complete":this._rawResult=r.target.getResult(!0),this._result=r.target.getResult(),this._sendProgress(t.MANIFEST_PROGRESS),this._loadManifest(this._result);return;case"progress":r.loaded*=t.MANIFEST_PROGRESS,this.progress=r.loaded/r.total,(isNaN(this.progress)||this.progress==1/0)&&(this.progress=0),this._sendProgress(r);return}this.AbstractLoader_handleEvent(r)},e.destroy=function(){this.AbstractLoader_destroy(),this._manifestQueue.close()},e._loadManifest=function(r){if(r&&r.manifest){var n=this._manifestQueue=new o.LoadQueue;n.on("fileload",this._handleManifestFileLoad,this),n.on("progress",this._handleManifestProgress,this),n.on("complete",this._handleManifestComplete,this,!0),n.on("error",this._handleManifestError,this,!0);for(var a=0,h=this.plugins.length;a<h;a++)n.installPlugin(this.plugins[a]);n.loadManifest(r)}else this._sendComplete()},e._handleManifestFileLoad=function(r){r.target=null,this.dispatchEvent(r)},e._handleManifestComplete=function(r){this._loadedItems=this._manifestQueue.getItems(!0),this._sendComplete()},e._handleManifestProgress=function(r){this.progress=r.progress*(1-t.MANIFEST_PROGRESS)+t.MANIFEST_PROGRESS,this._sendProgress(this.progress)},e._handleManifestError=function(r){var n=new o.Event("fileerror");n.item=r.data,this.dispatchEvent(n)},o.ManifestLoader=o.promote(i,"AbstractLoader")}(),function(){function i(r,n){this.AbstractMediaLoader_constructor(r,n,o.AbstractLoader.SOUND),o.RequestUtils.isAudioTag(r)?this._tag=r:o.RequestUtils.isAudioTag(r.src)?this._tag=r:o.RequestUtils.isAudioTag(r.tag)&&(this._tag=o.RequestUtils.isAudioTag(r)?r:r.src),this._tag!=null&&(this._preferXHR=!1)}var e=o.extend(i,o.AbstractMediaLoader),t=i;t.canLoadItem=function(r){return r.type==o.AbstractLoader.SOUND},e._createTag=function(r){var n=document.createElement("audio");return n.autoplay=!1,n.preload="none",n.src=r,n},o.SoundLoader=o.promote(i,"AbstractMediaLoader")}(),function(){function i(r,n){this.AbstractMediaLoader_constructor(r,n,o.AbstractLoader.VIDEO),o.RequestUtils.isVideoTag(r)||o.RequestUtils.isVideoTag(r.src)?(this.setTag(o.RequestUtils.isVideoTag(r)?r:r.src),this._preferXHR=!1):this.setTag(this._createTag())}var e=o.extend(i,o.AbstractMediaLoader),t=i;e._createTag=function(){return document.createElement("video")},t.canLoadItem=function(r){return r.type==o.AbstractLoader.VIDEO},o.VideoLoader=o.promote(i,"AbstractMediaLoader")}(),function(){function i(r,n){this.AbstractLoader_constructor(r,n,o.AbstractLoader.SPRITESHEET),this._manifestQueue=null}var e=o.extend(i,o.AbstractLoader),t=i;t.SPRITESHEET_PROGRESS=.25,t.canLoadItem=function(r){return r.type==o.AbstractLoader.SPRITESHEET},e.destroy=function(){this.AbstractLoader_destroy,this._manifestQueue.close()},e._createRequest=function(){var r=this._item.callback;r!=null?this._request=new o.JSONPLoader(this._item):this._request=new o.JSONLoader(this._item)},e.handleEvent=function(r){switch(r.type){case"complete":this._rawResult=r.target.getResult(!0),this._result=r.target.getResult(),this._sendProgress(t.SPRITESHEET_PROGRESS),this._loadManifest(this._result);return;case"progress":r.loaded*=t.SPRITESHEET_PROGRESS,this.progress=r.loaded/r.total,(isNaN(this.progress)||this.progress==1/0)&&(this.progress=0),this._sendProgress(r);return}this.AbstractLoader_handleEvent(r)},e._loadManifest=function(r){if(r&&r.images){var n=this._manifestQueue=new o.LoadQueue(this._preferXHR,this._item.path,this._item.crossOrigin);n.on("complete",this._handleManifestComplete,this,!0),n.on("fileload",this._handleManifestFileLoad,this),n.on("progress",this._handleManifestProgress,this),n.on("error",this._handleManifestError,this,!0),n.loadManifest(r.images)}},e._handleManifestFileLoad=function(r){var n=r.result;if(n!=null){var a=this.getResult().images,h=a.indexOf(r.item.src);a[h]=n}},e._handleManifestComplete=function(r){this._result=new o.SpriteSheet(this._result),this._loadedItems=this._manifestQueue.getItems(!0),this._sendComplete()},e._handleManifestProgress=function(r){this.progress=r.progress*(1-t.SPRITESHEET_PROGRESS)+t.SPRITESHEET_PROGRESS,this._sendProgress(this.progress)},e._handleManifestError=function(r){var n=new o.Event("fileerror");n.item=r.data,this.dispatchEvent(n)},o.SpriteSheetLoader=o.promote(i,"AbstractLoader")}(),function(){function i(r,n){this.AbstractLoader_constructor(r,n,o.AbstractLoader.SVG),this.resultFormatter=this._formatResult,this._tagSrcAttribute="data",n?this.setTag(document.createElement("svg")):(this.setTag(document.createElement("object")),this.getTag().type="image/svg+xml")}var e=o.extend(i,o.AbstractLoader),t=i;t.canLoadItem=function(r){return r.type==o.AbstractLoader.SVG},e._formatResult=function(r){var n=o.DataUtils.parseXML(r.getResult(!0),"text/xml"),a=r.getTag();return!this._preferXHR&&document.body.contains(a)&&document.body.removeChild(a),n.documentElement!=null?(a.appendChild(n.documentElement),a.style.visibility="visible",a):n},o.SVGLoader=o.promote(i,"AbstractLoader")}(),function(){function i(r){this.AbstractLoader_constructor(r,!0,o.AbstractLoader.XML),this.resultFormatter=this._formatResult}var e=o.extend(i,o.AbstractLoader),t=i;t.canLoadItem=function(r){return r.type==o.AbstractLoader.XML},e._formatResult=function(r){return o.DataUtils.parseXML(r.getResult(!0),"text/xml")},o.XMLLoader=o.promote(i,"AbstractLoader")}(),function(){var i=o.SoundJS=o.SoundJS||{};i.version="0.6.2",i.buildDate="Thu, 26 Nov 2015 20:44:31 GMT"}(),o.indexOf=function(i,e){for(var t=0,r=i.length;t<r;t++)if(e===i[t])return t;return-1},function(){o.proxy=function(i,e){var t=Array.prototype.slice.call(arguments,2);return function(){return i.apply(e,Array.prototype.slice.call(arguments,0).concat(t))}}}(),function(){function i(){throw"BrowserDetect cannot be instantiated"}var e=i.agent=window.navigator.userAgent;i.isWindowPhone=e.indexOf("IEMobile")>-1||e.indexOf("Windows Phone")>-1,i.isFirefox=e.indexOf("Firefox")>-1,i.isOpera=window.opera!=null,i.isChrome=e.indexOf("Chrome")>-1,i.isIOS=(e.indexOf("iPod")>-1||e.indexOf("iPhone")>-1||e.indexOf("iPad")>-1)&&!i.isWindowPhone,i.isAndroid=e.indexOf("Android")>-1&&!i.isWindowPhone,i.isBlackberry=e.indexOf("Blackberry")>-1,o.BrowserDetect=i}(),function(){var i=function(){this.interrupt=null,this.delay=null,this.offset=null,this.loop=null,this.volume=null,this.pan=null,this.startTime=null,this.duration=null},e=i.prototype={},t=i;t.create=function(r){if(r instanceof t||r instanceof Object){var n=new o.PlayPropsConfig;return n.set(r),n}else throw new Error("Type not recognized.")},e.set=function(r){for(var n in r)this[n]=r[n];return this},e.toString=function(){return"[PlayPropsConfig]"},o.PlayPropsConfig=t}(),function(){function i(){throw"Sound cannot be instantiated"}var e=i;e.INTERRUPT_ANY="any",e.INTERRUPT_EARLY="early",e.INTERRUPT_LATE="late",e.INTERRUPT_NONE="none",e.PLAY_INITED="playInited",e.PLAY_SUCCEEDED="playSucceeded",e.PLAY_INTERRUPTED="playInterrupted",e.PLAY_FINISHED="playFinished",e.PLAY_FAILED="playFailed",e.SUPPORTED_EXTENSIONS=["mp3","ogg","opus","mpeg","wav","m4a","mp4","aiff","wma","mid"],e.EXTENSION_MAP={m4a:"mp4"},e.FILE_PATTERN=/^(?:(\w+:)\/{2}(\w+(?:\.\w+)*\/?))?([/.]*?(?:[^?]+)?\/)?((?:[^/?]+)\.(\w+))(?:\?(\S+)?)?$/,e.defaultInterruptBehavior=e.INTERRUPT_NONE,e.alternateExtensions=[],e.activePlugin=null,e._masterVolume=1,Object.defineProperty(e,"volume",{get:function(){return this._masterVolume},set:function(n){if(Number(n)==null)return!1;if(n=Math.max(0,Math.min(1,n)),e._masterVolume=n,!this.activePlugin||!this.activePlugin.setVolume||!this.activePlugin.setVolume(n))for(var a=this._instances,h=0,u=a.length;h<u;h++)a[h].setMasterVolume(n)}}),e._masterMute=!1,Object.defineProperty(e,"muted",{get:function(){return this._masterMute},set:function(n){if(n==null)return!1;if(this._masterMute=n,!this.activePlugin||!this.activePlugin.setMute||!this.activePlugin.setMute(n))for(var a=this._instances,h=0,u=a.length;h<u;h++)a[h].setMasterMute(n);return!0}}),Object.defineProperty(e,"capabilities",{get:function(){return e.activePlugin==null?null:e.activePlugin._capabilities},set:function(n){return!1}}),e._pluginsRegistered=!1,e._lastID=0,e._instances=[],e._idHash={},e._preloadHash={},e._defaultPlayPropsHash={},e.addEventListener=null,e.removeEventListener=null,e.removeAllEventListeners=null,e.dispatchEvent=null,e.hasEventListener=null,e._listeners=null,o.EventDispatcher.initialize(e),e.getPreloadHandlers=function(){return{callback:o.proxy(e.initLoad,e),types:["sound"],extensions:e.SUPPORTED_EXTENSIONS}},e._handleLoadComplete=function(n){var a=n.target.getItem().src;if(e._preloadHash[a])for(var h=0,u=e._preloadHash[a].length;h<u;h++){var c=e._preloadHash[a][h];if(e._preloadHash[a][h]=!0,!!e.hasEventListener("fileload")){var n=new o.Event("fileload");n.src=c.src,n.id=c.id,n.data=c.data,n.sprite=c.sprite,e.dispatchEvent(n)}}},e._handleLoadError=function(n){var a=n.target.getItem().src;if(e._preloadHash[a])for(var h=0,u=e._preloadHash[a].length;h<u;h++){var c=e._preloadHash[a][h];if(e._preloadHash[a][h]=!1,!!e.hasEventListener("fileerror")){var n=new o.Event("fileerror");n.src=c.src,n.id=c.id,n.data=c.data,n.sprite=c.sprite,e.dispatchEvent(n)}}},e._registerPlugin=function(n){return n.isSupported()?(e.activePlugin=new n,!0):!1},e.registerPlugins=function(n){e._pluginsRegistered=!0;for(var a=0,h=n.length;a<h;a++)if(e._registerPlugin(n[a]))return!0;return!1},e.initializeDefaultPlugins=function(){return e.activePlugin!=null?!0:e._pluginsRegistered?!1:!!e.registerPlugins([o.WebAudioPlugin,o.HTMLAudioPlugin])},e.isReady=function(){return e.activePlugin!=null},e.getCapabilities=function(){return e.activePlugin==null?null:e.activePlugin._capabilities},e.getCapability=function(n){return e.activePlugin==null?null:e.activePlugin._capabilities[n]},e.initLoad=function(n){return e._registerSound(n)},e._registerSound=function(n){if(!e.initializeDefaultPlugins())return!1;var a;if(n.src instanceof Object?(a=e._parseSrc(n.src),a.src=n.path+a.src):a=e._parsePath(n.src),a==null)return!1;n.src=a.src,n.type="sound";var h=n.data,u=null;if(h!=null&&(isNaN(h.channels)?isNaN(h)||(u=parseInt(h)):u=parseInt(h.channels),h.audioSprite))for(var c,f=h.audioSprite.length;f--;)c=h.audioSprite[f],e._idHash[c.id]={src:n.src,startTime:parseInt(c.startTime),duration:parseInt(c.duration)},c.defaultPlayProps&&(e._defaultPlayPropsHash[c.id]=o.PlayPropsConfig.create(c.defaultPlayProps));n.id!=null&&(e._idHash[n.id]={src:n.src});var p=e.activePlugin.register(n);return t.create(n.src,u),h==null||!isNaN(h)?n.data=u||t.maxPerChannel():n.data.channels=u||t.maxPerChannel(),p.type&&(n.type=p.type),n.defaultPlayProps&&(e._defaultPlayPropsHash[n.src]=o.PlayPropsConfig.create(n.defaultPlayProps)),p},e.registerSound=function(n,a,h,u,c){var f={src:n,id:a,data:h,defaultPlayProps:c};n instanceof Object&&n.src&&(u=a,f=n),f=o.LoadItem.create(f),f.path=u,u!=null&&!(f.src instanceof Object)&&(f.src=u+n);var p=e._registerSound(f);if(!p)return!1;if(e._preloadHash[f.src]||(e._preloadHash[f.src]=[]),e._preloadHash[f.src].push(f),e._preloadHash[f.src].length==1)p.on("complete",o.proxy(this._handleLoadComplete,this)),p.on("error",o.proxy(this._handleLoadError,this)),e.activePlugin.preload(p);else if(e._preloadHash[f.src][0]==!0)return!0;return f},e.registerSounds=function(n,a){var h=[];n.path&&(a?a=a+n.path:a=n.path,n=n.manifest);for(var u=0,c=n.length;u<c;u++)h[u]=o.Sound.registerSound(n[u].src,n[u].id,n[u].data,a,n[u].defaultPlayProps);return h},e.removeSound=function(n,a){if(e.activePlugin==null)return!1;n instanceof Object&&n.src&&(n=n.src);var h;if(n instanceof Object?h=e._parseSrc(n):(n=e._getSrcById(n).src,h=e._parsePath(n)),h==null)return!1;n=h.src,a!=null&&(n=a+n);for(var u in e._idHash)e._idHash[u].src==n&&delete e._idHash[u];return t.removeSrc(n),delete e._preloadHash[n],e.activePlugin.removeSound(n),!0},e.removeSounds=function(n,a){var h=[];n.path&&(a?a=a+n.path:a=n.path,n=n.manifest);for(var u=0,c=n.length;u<c;u++)h[u]=o.Sound.removeSound(n[u].src,a);return h},e.removeAllSounds=function(){e._idHash={},e._preloadHash={},t.removeAll(),e.activePlugin&&e.activePlugin.removeAllSounds()},e.loadComplete=function(n){if(!e.isReady())return!1;var a=e._parsePath(n);return a?n=e._getSrcById(a.src).src:n=e._getSrcById(n).src,e._preloadHash[n]==null?!1:e._preloadHash[n][0]==!0},e._parsePath=function(n){typeof n!="string"&&(n=n.toString());var a=n.match(e.FILE_PATTERN);if(a==null)return!1;for(var h=a[4],u=a[5],c=e.capabilities,f=0;!c[u];)if(u=e.alternateExtensions[f++],f>e.alternateExtensions.length)return null;n=n.replace("."+a[5],"."+u);var p={name:h,src:n,extension:u};return p},e._parseSrc=function(n){var a={name:void 0,src:void 0,extension:void 0},h=e.capabilities;for(var u in n)if(n.hasOwnProperty(u)&&h[u]){a.src=n[u],a.extension=u;break}if(!a.src)return!1;var c=a.src.lastIndexOf("/");return c!=-1?a.name=a.src.slice(c+1):a.name=a.src,a},e.play=function(n,a,h,u,c,f,p,_,m){var w;a instanceof Object||a instanceof o.PlayPropsConfig?w=o.PlayPropsConfig.create(a):w=o.PlayPropsConfig.create({interrupt:a,delay:h,offset:u,loop:c,volume:f,pan:p,startTime:_,duration:m});var g=e.createInstance(n,w.startTime,w.duration),y=e._playInstance(g,w);return y||g._playFailed(),g},e.createInstance=function(n,a,h){if(!e.initializeDefaultPlugins())return new o.DefaultSoundInstance(n,a,h);var u=e._defaultPlayPropsHash[n];n=e._getSrcById(n);var c=e._parsePath(n.src),f=null;return c!=null&&c.src!=null?(t.create(c.src),a==null&&(a=n.startTime),f=e.activePlugin.create(c.src,a,h||n.duration),u=u||e._defaultPlayPropsHash[c.src],u&&f.applyPlayProps(u)):f=new o.DefaultSoundInstance(n,a,h),f.uniqueId=e._lastID++,f},e.stop=function(){for(var n=this._instances,a=n.length;a--;)n[a].stop()},e.setVolume=function(n){if(Number(n)==null)return!1;if(n=Math.max(0,Math.min(1,n)),e._masterVolume=n,!this.activePlugin||!this.activePlugin.setVolume||!this.activePlugin.setVolume(n))for(var a=this._instances,h=0,u=a.length;h<u;h++)a[h].setMasterVolume(n)},e.getVolume=function(){return this._masterVolume},e.setMute=function(n){if(n==null)return!1;if(this._masterMute=n,!this.activePlugin||!this.activePlugin.setMute||!this.activePlugin.setMute(n))for(var a=this._instances,h=0,u=a.length;h<u;h++)a[h].setMasterMute(n);return!0},e.getMute=function(){return this._masterMute},e.setDefaultPlayProps=function(n,a){n=e._getSrcById(n),e._defaultPlayPropsHash[e._parsePath(n.src).src]=o.PlayPropsConfig.create(a)},e.getDefaultPlayProps=function(n){return n=e._getSrcById(n),e._defaultPlayPropsHash[e._parsePath(n.src).src]},e._playInstance=function(n,a){var h=e._defaultPlayPropsHash[n.src]||{};if(a.interrupt==null&&(a.interrupt=h.interrupt||e.defaultInterruptBehavior),a.delay==null&&(a.delay=h.delay||0),a.offset==null&&(a.offset=n.getPosition()),a.loop==null&&(a.loop=n.loop),a.volume==null&&(a.volume=n.volume),a.pan==null&&(a.pan=n.pan),a.delay==0){var u=e._beginPlaying(n,a);if(!u)return!1}else{var c=setTimeout(function(){e._beginPlaying(n,a)},a.delay);n.delayTimeoutId=c}return this._instances.push(n),!0},e._beginPlaying=function(n,a){if(!t.add(n,a.interrupt))return!1;var h=n._beginPlaying(a);if(!h){var u=o.indexOf(this._instances,n);return u>-1&&this._instances.splice(u,1),!1}return!0},e._getSrcById=function(n){return e._idHash[n]||{src:n}},e._playFinished=function(n){t.remove(n);var a=o.indexOf(this._instances,n);a>-1&&this._instances.splice(a,1)},o.Sound=i;function t(n,a){this.init(n,a)}t.channels={},t.create=function(n,a){var h=t.get(n);return h==null?(t.channels[n]=new t(n,a),!0):!1},t.removeSrc=function(n){var a=t.get(n);return a==null?!1:(a._removeAll(),delete t.channels[n],!0)},t.removeAll=function(){for(var n in t.channels)t.channels[n]._removeAll();t.channels={}},t.add=function(n,a){var h=t.get(n.src);return h==null?!1:h._add(n,a)},t.remove=function(n){var a=t.get(n.src);return a==null?!1:(a._remove(n),!0)},t.maxPerChannel=function(){return r.maxDefault},t.get=function(n){return t.channels[n]};var r=t.prototype;r.constructor=t,r.src=null,r.max=null,r.maxDefault=100,r.length=0,r.init=function(n,a){this.src=n,this.max=a||this.maxDefault,this.max==-1&&(this.max=this.maxDefault),this._instances=[]},r._get=function(n){return this._instances[n]},r._add=function(n,a){return this._getSlot(a,n)?(this._instances.push(n),this.length++,!0):!1},r._remove=function(n){var a=o.indexOf(this._instances,n);return a==-1?!1:(this._instances.splice(a,1),this.length--,!0)},r._removeAll=function(){for(var n=this.length-1;n>=0;n--)this._instances[n].stop()},r._getSlot=function(n,a){var h,u;if(n!=i.INTERRUPT_NONE&&(u=this._get(0),u==null))return!0;for(var c=0,f=this.max;c<f;c++){if(h=this._get(c),h==null)return!0;if(h.playState==i.PLAY_FINISHED||h.playState==i.PLAY_INTERRUPTED||h.playState==i.PLAY_FAILED){u=h;break}n!=i.INTERRUPT_NONE&&(n==i.INTERRUPT_EARLY&&h.getPosition()<u.getPosition()||n==i.INTERRUPT_LATE&&h.getPosition()>u.getPosition())&&(u=h)}return u!=null?(u._interrupt(),this._remove(u),!0):!1},r.toString=function(){return"[Sound SoundChannel]"}}(),function(){var i=function(t,r,n,a){this.EventDispatcher_constructor(),this.src=t,this.uniqueId=-1,this.playState=null,this.delayTimeoutId=null,this._volume=1,Object.defineProperty(this,"volume",{get:this.getVolume,set:this.setVolume}),this._pan=0,Object.defineProperty(this,"pan",{get:this.getPan,set:this.setPan}),this._startTime=Math.max(0,r||0),Object.defineProperty(this,"startTime",{get:this.getStartTime,set:this.setStartTime}),this._duration=Math.max(0,n||0),Object.defineProperty(this,"duration",{get:this.getDuration,set:this.setDuration}),this._playbackResource=null,Object.defineProperty(this,"playbackResource",{get:this.getPlaybackResource,set:this.setPlaybackResource}),a!==!1&&a!==!0&&this.setPlaybackResource(a),this._position=0,Object.defineProperty(this,"position",{get:this.getPosition,set:this.setPosition}),this._loop=0,Object.defineProperty(this,"loop",{get:this.getLoop,set:this.setLoop}),this._muted=!1,Object.defineProperty(this,"muted",{get:this.getMuted,set:this.setMuted}),this._paused=!1,Object.defineProperty(this,"paused",{get:this.getPaused,set:this.setPaused})},e=o.extend(i,o.EventDispatcher);e.play=function(t,r,n,a,h,u){var c;if(t instanceof Object||t instanceof o.PlayPropsConfig?c=o.PlayPropsConfig.create(t):c=o.PlayPropsConfig.create({interrupt:t,delay:r,offset:n,loop:a,volume:h,pan:u}),this.playState==o.Sound.PLAY_SUCCEEDED){this.applyPlayProps(c),this._paused&&this.setPaused(!1);return}return this._cleanUp(),o.Sound._playInstance(this,c),this},e.stop=function(){return this._position=0,this._paused=!1,this._handleStop(),this._cleanUp(),this.playState=o.Sound.PLAY_FINISHED,this},e.destroy=function(){this._cleanUp(),this.src=null,this.playbackResource=null,this.removeAllEventListeners()},e.applyPlayProps=function(t){return t.offset!=null&&this.setPosition(t.offset),t.loop!=null&&this.setLoop(t.loop),t.volume!=null&&this.setVolume(t.volume),t.pan!=null&&this.setPan(t.pan),t.startTime!=null&&(this.setStartTime(t.startTime),this.setDuration(t.duration)),this},e.toString=function(){return"[AbstractSoundInstance]"},e.getPaused=function(){return this._paused},e.setPaused=function(t){if(!(t!==!0&&t!==!1||this._paused==t)&&!(t==!0&&this.playState!=o.Sound.PLAY_SUCCEEDED))return this._paused=t,t?this._pause():this._resume(),clearTimeout(this.delayTimeoutId),this},e.setVolume=function(t){return t==this._volume?this:(this._volume=Math.max(0,Math.min(1,t)),this._muted||this._updateVolume(),this)},e.getVolume=function(){return this._volume},e.setMuted=function(t){if(!(t!==!0&&t!==!1))return this._muted=t,this._updateVolume(),this},e.getMuted=function(){return this._muted},e.setPan=function(t){return t==this._pan?this:(this._pan=Math.max(-1,Math.min(1,t)),this._updatePan(),this)},e.getPan=function(){return this._pan},e.getPosition=function(){return!this._paused&&this.playState==o.Sound.PLAY_SUCCEEDED&&(this._position=this._calculateCurrentPosition()),this._position},e.setPosition=function(t){return this._position=Math.max(0,t),this.playState==o.Sound.PLAY_SUCCEEDED&&this._updatePosition(),this},e.getStartTime=function(){return this._startTime},e.setStartTime=function(t){return t==this._startTime?this:(this._startTime=Math.max(0,t||0),this._updateStartTime(),this)},e.getDuration=function(){return this._duration},e.setDuration=function(t){return t==this._duration?this:(this._duration=Math.max(0,t||0),this._updateDuration(),this)},e.setPlaybackResource=function(t){return this._playbackResource=t,this._duration==0&&this._setDurationFromSource(),this},e.getPlaybackResource=function(){return this._playbackResource},e.getLoop=function(){return this._loop},e.setLoop=function(t){this._playbackResource!=null&&(this._loop!=0&&t==0?this._removeLooping(t):this._loop==0&&t!=0&&this._addLooping(t)),this._loop=t},e._sendEvent=function(t){var r=new o.Event(t);this.dispatchEvent(r)},e._cleanUp=function(){clearTimeout(this.delayTimeoutId),this._handleCleanUp(),this._paused=!1,o.Sound._playFinished(this)},e._interrupt=function(){this._cleanUp(),this.playState=o.Sound.PLAY_INTERRUPTED,this._sendEvent("interrupted")},e._beginPlaying=function(t){return this.setPosition(t.offset),this.setLoop(t.loop),this.setVolume(t.volume),this.setPan(t.pan),t.startTime!=null&&(this.setStartTime(t.startTime),this.setDuration(t.duration)),this._playbackResource!=null&&this._position<this._duration?(this._paused=!1,this._handleSoundReady(),this.playState=o.Sound.PLAY_SUCCEEDED,this._sendEvent("succeeded"),!0):(this._playFailed(),!1)},e._playFailed=function(){this._cleanUp(),this.playState=o.Sound.PLAY_FAILED,this._sendEvent("failed")},e._handleSoundComplete=function(t){if(this._position=0,this._loop!=0){this._loop--,this._handleLoop(),this._sendEvent("loop");return}this._cleanUp(),this.playState=o.Sound.PLAY_FINISHED,this._sendEvent("complete")},e._handleSoundReady=function(){},e._updateVolume=function(){},e._updatePan=function(){},e._updateStartTime=function(){},e._updateDuration=function(){},e._setDurationFromSource=function(){},e._calculateCurrentPosition=function(){},e._updatePosition=function(){},e._removeLooping=function(t){},e._addLooping=function(t){},e._pause=function(){},e._resume=function(){},e._handleStop=function(){},e._handleCleanUp=function(){},e._handleLoop=function(){},o.AbstractSoundInstance=o.promote(i,"EventDispatcher"),o.DefaultSoundInstance=o.AbstractSoundInstance}(),function(){var i=function(){this._capabilities=null,this._loaders={},this._audioSources={},this._soundInstances={},this._volume=1,this._loaderClass,this._soundInstanceClass},e=i.prototype;i._capabilities=null,i.isSupported=function(){return!0},e.register=function(t){var r=this._loaders[t.src];return r&&!r.canceled?this._loaders[t.src]:(this._audioSources[t.src]=!0,this._soundInstances[t.src]=[],r=new this._loaderClass(t),r.on("complete",this._handlePreloadComplete,this),this._loaders[t.src]=r,r)},e.preload=function(t){t.on("error",this._handlePreloadError,this),t.load()},e.isPreloadStarted=function(t){return this._audioSources[t]!=null},e.isPreloadComplete=function(t){return!(this._audioSources[t]==null||this._audioSources[t]==!0)},e.removeSound=function(t){if(this._soundInstances[t]){for(var r=this._soundInstances[t].length;r--;){var n=this._soundInstances[t][r];n.destroy()}delete this._soundInstances[t],delete this._audioSources[t],this._loaders[t]&&this._loaders[t].destroy(),delete this._loaders[t]}},e.removeAllSounds=function(){for(var t in this._audioSources)this.removeSound(t)},e.create=function(t,r,n){this.isPreloadStarted(t)||this.preload(this.register(t));var a=new this._soundInstanceClass(t,r,n,this._audioSources[t]);return this._soundInstances[t].push(a),a},e.setVolume=function(t){return this._volume=t,this._updateVolume(),!0},e.getVolume=function(){return this._volume},e.setMute=function(t){return this._updateVolume(),!0},e.toString=function(){return"[AbstractPlugin]"},e._handlePreloadComplete=function(t){var r=t.target.getItem().src;this._audioSources[r]=t.result;for(var n=0,a=this._soundInstances[r].length;n<a;n++){var h=this._soundInstances[r][n];h.setPlaybackResource(this._audioSources[r])}},e._handlePreloadError=function(t){},e._updateVolume=function(){},o.AbstractPlugin=i}(),function(){function i(t){this.AbstractLoader_constructor(t,!0,o.AbstractLoader.SOUND)}var e=o.extend(i,o.AbstractLoader);i.context=null,e.toString=function(){return"[WebAudioLoader]"},e._createRequest=function(){this._request=new o.XHRRequest(this._item,!1),this._request.setResponseType("arraybuffer")},e._sendComplete=function(t){i.context.decodeAudioData(this._rawResult,o.proxy(this._handleAudioDecoded,this),o.proxy(this._sendError,this))},e._handleAudioDecoded=function(t){this._result=t,this.AbstractLoader__sendComplete()},o.WebAudioLoader=o.promote(i,"AbstractLoader")}(),function(){function i(r,n,a,h){this.AbstractSoundInstance_constructor(r,n,a,h),this.gainNode=t.context.createGain(),this.panNode=t.context.createPanner(),this.panNode.panningModel=t._panningModel,this.panNode.connect(this.gainNode),this._updatePan(),this.sourceNode=null,this._soundCompleteTimeout=null,this._sourceNodeNext=null,this._playbackStartTime=0,this._endedHandler=o.proxy(this._handleSoundComplete,this)}var e=o.extend(i,o.AbstractSoundInstance),t=i;t.context=null,t._scratchBuffer=null,t.destinationNode=null,t._panningModel="equalpower",e.destroy=function(){this.AbstractSoundInstance_destroy(),this.panNode.disconnect(0),this.panNode=null,this.gainNode.disconnect(0),this.gainNode=null},e.toString=function(){return"[WebAudioSoundInstance]"},e._updatePan=function(){this.panNode.setPosition(this._pan,0,-.5)},e._removeLooping=function(r){this._sourceNodeNext=this._cleanUpAudioNode(this._sourceNodeNext)},e._addLooping=function(r){this.playState==o.Sound.PLAY_SUCCEEDED&&(this._sourceNodeNext=this._createAndPlayAudioNode(this._playbackStartTime,0))},e._setDurationFromSource=function(){this._duration=this.playbackResource.duration*1e3},e._handleCleanUp=function(){this.sourceNode&&this.playState==o.Sound.PLAY_SUCCEEDED&&(this.sourceNode=this._cleanUpAudioNode(this.sourceNode),this._sourceNodeNext=this._cleanUpAudioNode(this._sourceNodeNext)),this.gainNode.numberOfOutputs!=0&&this.gainNode.disconnect(0),clearTimeout(this._soundCompleteTimeout),this._playbackStartTime=0},e._cleanUpAudioNode=function(r){if(r){r.stop(0),r.disconnect(0);try{r.buffer=t._scratchBuffer}catch{}r=null}return r},e._handleSoundReady=function(r){this.gainNode.connect(t.destinationNode);var n=this._duration*.001,a=this._position*.001;a>n&&(a=n),this.sourceNode=this._createAndPlayAudioNode(t.context.currentTime-n,a),this._playbackStartTime=this.sourceNode.startTime-a,this._soundCompleteTimeout=setTimeout(this._endedHandler,(n-a)*1e3),this._loop!=0&&(this._sourceNodeNext=this._createAndPlayAudioNode(this._playbackStartTime,0))},e._createAndPlayAudioNode=function(r,n){var a=t.context.createBufferSource();a.buffer=this.playbackResource,a.connect(this.panNode);var h=this._duration*.001;return a.startTime=r+h,a.start(a.startTime,n+this._startTime*.001,h-n),a},e._pause=function(){this._position=(t.context.currentTime-this._playbackStartTime)*1e3,this.sourceNode=this._cleanUpAudioNode(this.sourceNode),this._sourceNodeNext=this._cleanUpAudioNode(this._sourceNodeNext),this.gainNode.numberOfOutputs!=0&&this.gainNode.disconnect(0),clearTimeout(this._soundCompleteTimeout)},e._resume=function(){this._handleSoundReady()},e._updateVolume=function(){var r=this._muted?0:this._volume;r!=this.gainNode.gain.value&&(this.gainNode.gain.value=r)},e._calculateCurrentPosition=function(){return(t.context.currentTime-this._playbackStartTime)*1e3},e._updatePosition=function(){this.sourceNode=this._cleanUpAudioNode(this.sourceNode),this._sourceNodeNext=this._cleanUpAudioNode(this._sourceNodeNext),clearTimeout(this._soundCompleteTimeout),this._paused||this._handleSoundReady()},e._handleLoop=function(){this._cleanUpAudioNode(this.sourceNode),this.sourceNode=this._sourceNodeNext,this._playbackStartTime=this.sourceNode.startTime,this._sourceNodeNext=this._createAndPlayAudioNode(this._playbackStartTime,0),this._soundCompleteTimeout=setTimeout(this._endedHandler,this._duration)},e._updateDuration=function(){this.playState==o.Sound.PLAY_SUCCEEDED&&(this._pause(),this._resume())},o.WebAudioSoundInstance=o.promote(i,"AbstractSoundInstance")}(),function(){function i(){this.AbstractPlugin_constructor(),this._panningModel=t._panningModel,this.context=t.context,this.dynamicsCompressorNode=this.context.createDynamicsCompressor(),this.dynamicsCompressorNode.connect(this.context.destination),this.gainNode=this.context.createGain(),this.gainNode.connect(this.dynamicsCompressorNode),o.WebAudioSoundInstance.destinationNode=this.gainNode,this._capabilities=t._capabilities,this._loaderClass=o.WebAudioLoader,this._soundInstanceClass=o.WebAudioSoundInstance,this._addPropsToClasses()}var e=o.extend(i,o.AbstractPlugin),t=i;t._capabilities=null,t._panningModel="equalpower",t.context=null,t._scratchBuffer=null,t._unlocked=!1,t.isSupported=function(){var r=o.BrowserDetect.isIOS||o.BrowserDetect.isAndroid||o.BrowserDetect.isBlackberry;return!(location.protocol=="file:"&&!r&&!this._isFileXHRSupported()||(t._generateCapabilities(),t.context==null))},t.playEmptySound=function(){if(t.context!=null){var r=t.context.createBufferSource();r.buffer=t._scratchBuffer,r.connect(t.context.destination),r.start(0,0,0)}},t._isFileXHRSupported=function(){var r=!0,n=new XMLHttpRequest;try{n.open("GET","WebAudioPluginTest.fail",!1)}catch{return r=!1,r}n.onerror=function(){r=!1},n.onload=function(){r=this.status==404||this.status==200||this.status==0&&this.response!=""};try{n.send()}catch{r=!1}return r},t._generateCapabilities=function(){if(t._capabilities==null){var r=document.createElement("audio");if(r.canPlayType==null)return null;if(t.context==null)if(window.AudioContext)t.context=new AudioContext;else if(window.webkitAudioContext)t.context=new webkitAudioContext;else return null;t._scratchBuffer==null&&(t._scratchBuffer=t.context.createBuffer(1,1,22050)),t._compatibilitySetUp(),"ontouchstart"in window&&t.context.state!="running"&&(t._unlock(),document.addEventListener("mousedown",t._unlock,!0),document.addEventListener("touchend",t._unlock,!0)),t._capabilities={panning:!0,volume:!0,tracks:-1};for(var n=o.Sound.SUPPORTED_EXTENSIONS,a=o.Sound.EXTENSION_MAP,h=0,u=n.length;h<u;h++){var c=n[h],f=a[c]||c;t._capabilities[c]=r.canPlayType("audio/"+c)!="no"&&r.canPlayType("audio/"+c)!=""||r.canPlayType("audio/"+f)!="no"&&r.canPlayType("audio/"+f)!=""}t.context.destination.numberOfChannels<2&&(t._capabilities.panning=!1)}},t._compatibilitySetUp=function(){if(t._panningModel="equalpower",!t.context.createGain){t.context.createGain=t.context.createGainNode;var r=t.context.createBufferSource();r.__proto__.start=r.__proto__.noteGrainOn,r.__proto__.stop=r.__proto__.noteOff,t._panningModel=0}},t._unlock=function(){t._unlocked||(t.playEmptySound(),t.context.state=="running"&&(document.removeEventListener("mousedown",t._unlock,!0),document.removeEventListener("touchend",t._unlock,!0),t._unlocked=!0))},e.toString=function(){return"[WebAudioPlugin]"},e._addPropsToClasses=function(){var r=this._soundInstanceClass;r.context=this.context,r._scratchBuffer=t._scratchBuffer,r.destinationNode=this.gainNode,r._panningModel=this._panningModel,this._loaderClass.context=this.context},e._updateVolume=function(){var r=o.Sound._masterMute?0:this._volume;r!=this.gainNode.gain.value&&(this.gainNode.gain.value=r)},o.WebAudioPlugin=o.promote(i,"AbstractPlugin")}(),function(){function i(){throw"HTMLAudioTagPool cannot be instantiated"}var e=i;e._tags={},e._tagPool=new t,e._tagUsed={},e.get=function(n){var a=e._tags[n];return a==null?(a=e._tags[n]=e._tagPool.get(),a.src=n):e._tagUsed[n]?(a=e._tagPool.get(),a.src=n):e._tagUsed[n]=!0,a},e.set=function(n,a){a==e._tags[n]?e._tagUsed[n]=!1:e._tagPool.set(a)},e.remove=function(n){var a=e._tags[n];return a==null?!1:(e._tagPool.set(a),delete e._tags[n],delete e._tagUsed[n],!0)},e.getDuration=function(n){var a=e._tags[n];return a==null||!a.duration?0:a.duration*1e3},o.HTMLAudioTagPool=i;function t(n){this._tags=[]}var r=t.prototype;r.constructor=t,r.get=function(){var n;return this._tags.length==0?n=this._createTag():n=this._tags.pop(),n.parentNode==null&&document.body.appendChild(n),n},r.set=function(n){var a=o.indexOf(this._tags,n);a==-1&&(this._tags.src=null,this._tags.push(n))},r.toString=function(){return"[TagPool]"},r._createTag=function(){var n=document.createElement("audio");return n.autoplay=!1,n.preload="none",n}}(),function(){function i(t,r,n,a){this.AbstractSoundInstance_constructor(t,r,n,a),this._audioSpriteStopTime=null,this._delayTimeoutId=null,this._endedHandler=o.proxy(this._handleSoundComplete,this),this._readyHandler=o.proxy(this._handleTagReady,this),this._stalledHandler=o.proxy(this._playFailed,this),this._audioSpriteEndHandler=o.proxy(this._handleAudioSpriteLoop,this),this._loopHandler=o.proxy(this._handleSoundComplete,this),n?this._audioSpriteStopTime=(r+n)*.001:this._duration=o.HTMLAudioTagPool.getDuration(this.src)}var e=o.extend(i,o.AbstractSoundInstance);e.setMasterVolume=function(t){this._updateVolume()},e.setMasterMute=function(t){this._updateVolume()},e.toString=function(){return"[HTMLAudioSoundInstance]"},e._removeLooping=function(){this._playbackResource!=null&&(this._playbackResource.loop=!1,this._playbackResource.removeEventListener(o.HTMLAudioPlugin._AUDIO_SEEKED,this._loopHandler,!1))},e._addLooping=function(){this._playbackResource==null||this._audioSpriteStopTime||(this._playbackResource.addEventListener(o.HTMLAudioPlugin._AUDIO_SEEKED,this._loopHandler,!1),this._playbackResource.loop=!0)},e._handleCleanUp=function(){var t=this._playbackResource;if(t!=null){t.pause(),t.loop=!1,t.removeEventListener(o.HTMLAudioPlugin._AUDIO_ENDED,this._endedHandler,!1),t.removeEventListener(o.HTMLAudioPlugin._AUDIO_READY,this._readyHandler,!1),t.removeEventListener(o.HTMLAudioPlugin._AUDIO_STALLED,this._stalledHandler,!1),t.removeEventListener(o.HTMLAudioPlugin._AUDIO_SEEKED,this._loopHandler,!1),t.removeEventListener(o.HTMLAudioPlugin._TIME_UPDATE,this._audioSpriteEndHandler,!1);try{t.currentTime=this._startTime}catch{}o.HTMLAudioTagPool.set(this.src,t),this._playbackResource=null}},e._beginPlaying=function(t){return this._playbackResource=o.HTMLAudioTagPool.get(this.src),this.AbstractSoundInstance__beginPlaying(t)},e._handleSoundReady=function(t){if(this._playbackResource.readyState!==4){var r=this._playbackResource;r.addEventListener(o.HTMLAudioPlugin._AUDIO_READY,this._readyHandler,!1),r.addEventListener(o.HTMLAudioPlugin._AUDIO_STALLED,this._stalledHandler,!1),r.preload="auto",r.load();return}this._updateVolume(),this._playbackResource.currentTime=(this._startTime+this._position)*.001,this._audioSpriteStopTime?this._playbackResource.addEventListener(o.HTMLAudioPlugin._TIME_UPDATE,this._audioSpriteEndHandler,!1):(this._playbackResource.addEventListener(o.HTMLAudioPlugin._AUDIO_ENDED,this._endedHandler,!1),this._loop!=0&&(this._playbackResource.addEventListener(o.HTMLAudioPlugin._AUDIO_SEEKED,this._loopHandler,!1),this._playbackResource.loop=!0)),this._playbackResource.play()},e._handleTagReady=function(t){this._playbackResource.removeEventListener(o.HTMLAudioPlugin._AUDIO_READY,this._readyHandler,!1),this._playbackResource.removeEventListener(o.HTMLAudioPlugin._AUDIO_STALLED,this._stalledHandler,!1),this._handleSoundReady()},e._pause=function(){this._playbackResource.pause()},e._resume=function(){this._playbackResource.play()},e._updateVolume=function(){if(this._playbackResource!=null){var t=this._muted||o.Sound._masterMute?0:this._volume*o.Sound._masterVolume;t!=this._playbackResource.volume&&(this._playbackResource.volume=t)}},e._calculateCurrentPosition=function(){return this._playbackResource.currentTime*1e3-this._startTime},e._updatePosition=function(){this._playbackResource.removeEventListener(o.HTMLAudioPlugin._AUDIO_SEEKED,this._loopHandler,!1),this._playbackResource.addEventListener(o.HTMLAudioPlugin._AUDIO_SEEKED,this._handleSetPositionSeek,!1);try{this._playbackResource.currentTime=(this._position+this._startTime)*.001}catch{this._handleSetPositionSeek(null)}},e._handleSetPositionSeek=function(t){this._playbackResource!=null&&(this._playbackResource.removeEventListener(o.HTMLAudioPlugin._AUDIO_SEEKED,this._handleSetPositionSeek,!1),this._playbackResource.addEventListener(o.HTMLAudioPlugin._AUDIO_SEEKED,this._loopHandler,!1))},e._handleAudioSpriteLoop=function(t){this._playbackResource.currentTime<=this._audioSpriteStopTime||(this._playbackResource.pause(),this._loop==0?this._handleSoundComplete(null):(this._position=0,this._loop--,this._playbackResource.currentTime=this._startTime*.001,this._paused||this._playbackResource.play(),this._sendEvent("loop")))},e._handleLoop=function(t){this._loop==0&&(this._playbackResource.loop=!1,this._playbackResource.removeEventListener(o.HTMLAudioPlugin._AUDIO_SEEKED,this._loopHandler,!1))},e._updateStartTime=function(){this._audioSpriteStopTime=(this._startTime+this._duration)*.001,this.playState==o.Sound.PLAY_SUCCEEDED&&(this._playbackResource.removeEventListener(o.HTMLAudioPlugin._AUDIO_ENDED,this._endedHandler,!1),this._playbackResource.addEventListener(o.HTMLAudioPlugin._TIME_UPDATE,this._audioSpriteEndHandler,!1))},e._updateDuration=function(){this._audioSpriteStopTime=(this._startTime+this._duration)*.001,this.playState==o.Sound.PLAY_SUCCEEDED&&(this._playbackResource.removeEventListener(o.HTMLAudioPlugin._AUDIO_ENDED,this._endedHandler,!1),this._playbackResource.addEventListener(o.HTMLAudioPlugin._TIME_UPDATE,this._audioSpriteEndHandler,!1))},e._setDurationFromSource=function(){this._duration=o.HTMLAudioTagPool.getDuration(this.src),this._playbackResource=null},o.HTMLAudioSoundInstance=o.promote(i,"AbstractSoundInstance")}(),function(){function i(){this.AbstractPlugin_constructor(),this.defaultNumChannels=2,this._capabilities=t._capabilities,this._loaderClass=o.SoundLoader,this._soundInstanceClass=o.HTMLAudioSoundInstance}var e=o.extend(i,o.AbstractPlugin),t=i;t.MAX_INSTANCES=30,t._AUDIO_READY="canplaythrough",t._AUDIO_ENDED="ended",t._AUDIO_SEEKED="seeked",t._AUDIO_STALLED="stalled",t._TIME_UPDATE="timeupdate",t._capabilities=null,t.isSupported=function(){return t._generateCapabilities(),t._capabilities!=null},t._generateCapabilities=function(){if(t._capabilities==null){var r=document.createElement("audio");if(r.canPlayType==null)return null;t._capabilities={panning:!1,volume:!0,tracks:-1};for(var n=o.Sound.SUPPORTED_EXTENSIONS,a=o.Sound.EXTENSION_MAP,h=0,u=n.length;h<u;h++){var c=n[h],f=a[c]||c;t._capabilities[c]=r.canPlayType("audio/"+c)!="no"&&r.canPlayType("audio/"+c)!=""||r.canPlayType("audio/"+f)!="no"&&r.canPlayType("audio/"+f)!=""}}},e.register=function(r){var n=o.HTMLAudioTagPool.get(r.src),a=this.AbstractPlugin_register(r);return a.setTag(n),a},e.removeSound=function(r){this.AbstractPlugin_removeSound(r),o.HTMLAudioTagPool.remove(r)},e.create=function(r,n,a){var h=this.AbstractPlugin_create(r,n,a);return h.setPlaybackResource(null),h},e.toString=function(){return"[HTMLAudioPlugin]"},e.setVolume=e.getVolume=e.setMute=null,o.HTMLAudioPlugin=o.promote(i,"AbstractPlugin")}(),function(){function i(t,r,n){this.ignoreGlobalPause=!1,this.loop=!1,this.duration=0,this.pluginData=n||{},this.target=t,this.position=null,this.passive=!1,this._paused=!1,this._curQueueProps={},this._initQueueProps={},this._steps=[],this._actions=[],this._prevPosition=0,this._stepPosition=0,this._prevPos=-1,this._target=t,this._useTicks=!1,this._inited=!1,this._registered=!1,r&&(this._useTicks=r.useTicks,this.ignoreGlobalPause=r.ignoreGlobalPause,this.loop=r.loop,r.onChange&&this.addEventListener("change",r.onChange),r.override&&i.removeTweens(t)),r&&r.paused?this._paused=!0:o.Tween._register(this,!0),r&&r.position!=null&&this.setPosition(r.position,i.NONE)}var e=o.extend(i,o.EventDispatcher);i.NONE=0,i.LOOP=1,i.REVERSE=2,i.IGNORE={},i._tweens=[],i._plugins={},i.get=function(t,r,n,a){return a&&i.removeTweens(t),new i(t,r,n)},i.tick=function(t,r){for(var n=i._tweens.slice(),a=n.length-1;a>=0;a--){var h=n[a];r&&!h.ignoreGlobalPause||h._paused||h.tick(h._useTicks?1:t)}},i.handleEvent=function(t){t.type=="tick"&&this.tick(t.delta,t.paused)},i.removeTweens=function(t){if(t.tweenjs_count){for(var r=i._tweens,n=r.length-1;n>=0;n--){var a=r[n];a._target==t&&(a._paused=!0,r.splice(n,1))}t.tweenjs_count=0}},i.removeAllTweens=function(){for(var t=i._tweens,r=0,n=t.length;r<n;r++){var a=t[r];a._paused=!0,a.target&&(a.target.tweenjs_count=0)}t.length=0},i.hasActiveTweens=function(t){return t?t.tweenjs_count!=null&&!!t.tweenjs_count:i._tweens&&!!i._tweens.length},i.installPlugin=function(t,r){var n=t.priority;n==null&&(t.priority=n=0);for(var a=0,h=r.length,u=i._plugins;a<h;a++){var c=r[a];if(!u[c])u[c]=[t];else{for(var f=u[c],p=0,_=f.length;p<_&&!(n<f[p].priority);p++);u[c].splice(p,0,t)}}},i._register=function(t,r){var n=t._target,a=i._tweens;if(r&&!t._registered)n&&(n.tweenjs_count=n.tweenjs_count?n.tweenjs_count+1:1),a.push(t),!i._inited&&o.Ticker&&(o.Ticker.addEventListener("tick",i),i._inited=!0);else if(!r&&t._registered){n&&n.tweenjs_count--;for(var h=a.length;h--;)if(a[h]==t){a.splice(h,1);break}}t._registered=r},e.wait=function(t,r){if(t==null||t<=0)return this;var n=this._cloneProps(this._curQueueProps);return this._addStep({d:t,p0:n,e:this._linearEase,p1:n,v:r})},e.to=function(t,r,n){return(isNaN(r)||r<0)&&(r=0),this._addStep({d:r||0,p0:this._cloneProps(this._curQueueProps),e:n,p1:this._cloneProps(this._appendQueueProps(t))})},e.call=function(t,r,n){return this._addAction({f:t,p:r||[this],o:n||this._target})},e.set=function(t,r){return this._addAction({f:this._set,o:this,p:[t,r||this._target]})},e.play=function(t){return t||(t=this),this.call(t.setPaused,[!1],t)},e.pause=function(t){return t||(t=this),this.call(t.setPaused,[!0],t)},e.setPosition=function(t,r){t<0&&(t=0),r==null&&(r=1);var n=t,a=!1;if(n>=this.duration&&(this.loop?n=n%this.duration:(n=this.duration,a=!0)),n==this._prevPos)return a;var h=this._prevPos;if(this.position=this._prevPos=n,this._prevPosition=t,this._target){if(a)this._updateTargetProps(null,1);else if(this._steps.length>0){for(var u=0,c=this._steps.length;u<c&&!(this._steps[u].t>n);u++);var f=this._steps[u-1];this._updateTargetProps(f,(this._stepPosition=n-f.t)/f.d)}}return r!=0&&this._actions.length>0&&(this._useTicks?this._runActions(n,n):r==1&&n<h?(h!=this.duration&&this._runActions(h,this.duration),this._runActions(0,n,!0)):this._runActions(h,n)),a&&this.setPaused(!0),this.dispatchEvent("change"),a},e.tick=function(t){this._paused||this.setPosition(this._prevPosition+t)},e.setPaused=function(t){return this._paused===!!t?this:(this._paused=!!t,i._register(this,!t),this)},e.w=e.wait,e.t=e.to,e.c=e.call,e.s=e.set,e.toString=function(){return"[Tween]"},e.clone=function(){throw"Tween can not be cloned."},e._updateTargetProps=function(t,r){var n,a,h,u,c,f;if(!t&&r==1)this.passive=!1,n=a=this._curQueueProps;else{if(this.passive=!!t.v,this.passive)return;t.e&&(r=t.e(r,0,1,1)),n=t.p0,a=t.p1}for(var p in this._initQueueProps){(u=n[p])==null&&(n[p]=u=this._initQueueProps[p]),(c=a[p])==null&&(a[p]=c=u),u==c||r==0||r==1||typeof u!="number"?h=r==1?c:u:h=u+(c-u)*r;var _=!1;if(f=i._plugins[p])for(var m=0,w=f.length;m<w;m++){var g=f[m].tween(this,p,h,n,a,r,!!t&&n==a,!t);g==i.IGNORE?_=!0:h=g}_||(this._target[p]=h)}},e._runActions=function(t,r,n){var a=t,h=r,u=-1,c=this._actions.length,f=1;for(t>r&&(a=r,h=t,u=c,c=f=-1);(u+=f)!=c;){var p=this._actions[u],_=p.t;(_==h||_>a&&_<h||n&&_==t)&&p.f.apply(p.o,p.p)}},e._appendQueueProps=function(t){var r,n,a,h,u;for(var c in t)if(this._initQueueProps[c]===void 0){if(n=this._target[c],r=i._plugins[c])for(a=0,h=r.length;a<h;a++)n=r[a].init(this,c,n);this._initQueueProps[c]=this._curQueueProps[c]=n===void 0?null:n}else n=this._curQueueProps[c];for(var c in t){if(n=this._curQueueProps[c],r=i._plugins[c])for(u=u||{},a=0,h=r.length;a<h;a++)r[a].step&&r[a].step(this,c,n,t[c],u);this._curQueueProps[c]=t[c]}return u&&this._appendQueueProps(u),this._curQueueProps},e._cloneProps=function(t){var r={};for(var n in t)r[n]=t[n];return r},e._addStep=function(t){return t.d>0&&(this._steps.push(t),t.t=this.duration,this.duration+=t.d),this},e._addAction=function(t){return t.t=this.duration,this._actions.push(t),this},e._set=function(t,r){for(var n in t)r[n]=t[n]},o.Tween=o.promote(i,"EventDispatcher")}(),function(){function i(t,r,n){this.EventDispatcher_constructor(),this.ignoreGlobalPause=!1,this.duration=0,this.loop=!1,this.position=null,this._paused=!1,this._tweens=[],this._labels=null,this._labelList=null,this._prevPosition=0,this._prevPos=-1,this._useTicks=!1,this._registered=!1,n&&(this._useTicks=n.useTicks,this.loop=n.loop,this.ignoreGlobalPause=n.ignoreGlobalPause,n.onChange&&this.addEventListener("change",n.onChange)),t&&this.addTween.apply(this,t),this.setLabels(r),n&&n.paused?this._paused=!0:o.Tween._register(this,!0),n&&n.position!=null&&this.setPosition(n.position,o.Tween.NONE)}var e=o.extend(i,o.EventDispatcher);e.addTween=function(t){var r=arguments.length;if(r>1){for(var n=0;n<r;n++)this.addTween(arguments[n]);return arguments[0]}else if(r==0)return null;return this.removeTween(t),this._tweens.push(t),t.setPaused(!0),t._paused=!1,t._useTicks=this._useTicks,t.duration>this.duration&&(this.duration=t.duration),this._prevPos>=0&&t.setPosition(this._prevPos,o.Tween.NONE),t},e.removeTween=function(t){var r=arguments.length;if(r>1){for(var n=!0,h=0;h<r;h++)n=n&&this.removeTween(arguments[h]);return n}else if(r==0)return!1;for(var a=this._tweens,h=a.length;h--;)if(a[h]==t)return a.splice(h,1),t.duration>=this.duration&&this.updateDuration(),!0;return!1},e.addLabel=function(t,r){this._labels[t]=r;var n=this._labelList;if(n){for(var a=0,h=n.length;a<h&&!(r<n[a].position);a++);n.splice(a,0,{label:t,position:r})}},e.setLabels=function(t){this._labels=t||{}},e.getLabels=function(){var t=this._labelList;if(!t){t=this._labelList=[];var r=this._labels;for(var n in r)t.push({label:n,position:r[n]});t.sort(function(a,h){return a.position-h.position})}return t},e.getCurrentLabel=function(){var t=this.getLabels(),r=this.position,n=t.length;if(n){for(var a=0;a<n&&!(r<t[a].position);a++);return a==0?null:t[a-1].label}return null},e.gotoAndPlay=function(t){this.setPaused(!1),this._goto(t)},e.gotoAndStop=function(t){this.setPaused(!0),this._goto(t)},e.setPosition=function(t,r){var n=this._calcPosition(t),a=!this.loop&&t>=this.duration;if(n==this._prevPos)return a;this._prevPosition=t,this.position=this._prevPos=n;for(var h=0,u=this._tweens.length;h<u;h++)if(this._tweens[h].setPosition(n,r),n!=this._prevPos)return!1;return a&&this.setPaused(!0),this.dispatchEvent("change"),a},e.setPaused=function(t){this._paused=!!t,o.Tween._register(this,!t)},e.updateDuration=function(){this.duration=0;for(var t=0,r=this._tweens.length;t<r;t++){var n=this._tweens[t];n.duration>this.duration&&(this.duration=n.duration)}},e.tick=function(t){this.setPosition(this._prevPosition+t)},e.resolve=function(t){var r=Number(t);return isNaN(r)&&(r=this._labels[t]),r},e.toString=function(){return"[Timeline]"},e.clone=function(){throw"Timeline can not be cloned."},e._goto=function(t){var r=this.resolve(t);r!=null&&this.setPosition(r)},e._calcPosition=function(t){return t<0?0:t<this.duration?t:this.loop?t%this.duration:this.duration},o.Timeline=o.promote(i,"EventDispatcher")}(),function(){function i(){throw"Ease cannot be instantiated."}i.linear=function(e){return e},i.none=i.linear,i.get=function(e){return e<-1&&(e=-1),e>1&&(e=1),function(t){return e==0?t:e<0?t*(t*-e+1+e):t*((2-t)*e+(1-e))}},i.getPowIn=function(e){return function(t){return Math.pow(t,e)}},i.getPowOut=function(e){return function(t){return 1-Math.pow(1-t,e)}},i.getPowInOut=function(e){return function(t){return(t*=2)<1?.5*Math.pow(t,e):1-.5*Math.abs(Math.pow(2-t,e))}},i.quadIn=i.getPowIn(2),i.quadOut=i.getPowOut(2),i.quadInOut=i.getPowInOut(2),i.cubicIn=i.getPowIn(3),i.cubicOut=i.getPowOut(3),i.cubicInOut=i.getPowInOut(3),i.quartIn=i.getPowIn(4),i.quartOut=i.getPowOut(4),i.quartInOut=i.getPowInOut(4),i.quintIn=i.getPowIn(5),i.quintOut=i.getPowOut(5),i.quintInOut=i.getPowInOut(5),i.sineIn=function(e){return 1-Math.cos(e*Math.PI/2)},i.sineOut=function(e){return Math.sin(e*Math.PI/2)},i.sineInOut=function(e){return-.5*(Math.cos(Math.PI*e)-1)},i.getBackIn=function(e){return function(t){return t*t*((e+1)*t-e)}},i.backIn=i.getBackIn(1.7),i.getBackOut=function(e){return function(t){return--t*t*((e+1)*t+e)+1}},i.backOut=i.getBackOut(1.7),i.getBackInOut=function(e){return e*=1.525,function(t){return(t*=2)<1?.5*(t*t*((e+1)*t-e)):.5*((t-=2)*t*((e+1)*t+e)+2)}},i.backInOut=i.getBackInOut(1.7),i.circIn=function(e){return-(Math.sqrt(1-e*e)-1)},i.circOut=function(e){return Math.sqrt(1- --e*e)},i.circInOut=function(e){return(e*=2)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)},i.bounceIn=function(e){return 1-i.bounceOut(1-e)},i.bounceOut=function(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},i.bounceInOut=function(e){return e<.5?i.bounceIn(e*2)*.5:i.bounceOut(e*2-1)*.5+.5},i.getElasticIn=function(e,t){var r=Math.PI*2;return function(n){if(n==0||n==1)return n;var a=t/r*Math.asin(1/e);return-(e*Math.pow(2,10*(n-=1))*Math.sin((n-a)*r/t))}},i.elasticIn=i.getElasticIn(1,.3),i.getElasticOut=function(e,t){var r=Math.PI*2;return function(n){if(n==0||n==1)return n;var a=t/r*Math.asin(1/e);return e*Math.pow(2,-10*n)*Math.sin((n-a)*r/t)+1}},i.elasticOut=i.getElasticOut(1,.3),i.getElasticInOut=function(e,t){var r=Math.PI*2;return function(n){var a=t/r*Math.asin(1/e);return(n*=2)<1?-.5*(e*Math.pow(2,10*(n-=1))*Math.sin((n-a)*r/t)):e*Math.pow(2,-10*(n-=1))*Math.sin((n-a)*r/t)*.5+1}},i.elasticInOut=i.getElasticInOut(1,.3*1.5),o.Ease=i}(),function(){function i(){throw"MotionGuidePlugin cannot be instantiated."}i.priority=0,i._rotOffS,i._rotOffE,i._rotNormS,i._rotNormE,i.install=function(){return o.Tween.installPlugin(i,["guide","x","y","rotation"]),o.Tween.IGNORE},i.init=function(e,t,r){var n=e.target;return n.hasOwnProperty("x")||(n.x=0),n.hasOwnProperty("y")||(n.y=0),n.hasOwnProperty("rotation")||(n.rotation=0),t=="rotation"&&(e.__needsRot=!0),t=="guide"?null:r},i.step=function(e,t,r,n,a){if(t=="rotation"&&(e.__rotGlobalS=r,e.__rotGlobalE=n,i.testRotData(e,a)),t!="guide")return n;var h,u=n;u.hasOwnProperty("path")||(u.path=[]);var c=u.path;if(u.hasOwnProperty("end")||(u.end=1),u.hasOwnProperty("start")||(u.start=r&&r.hasOwnProperty("end")&&r.path===c?r.end:0),u.hasOwnProperty("_segments")&&u._length)return n;var f=c.length,p=10;if(f>=6&&(f-2)%4==0){u._segments=[],u._length=0;for(var _=2;_<f;_+=4){for(var m=c[_-2],w=c[_-1],g=c[_+0],y=c[_+1],E=c[_+2],P=c[_+3],M=m,x=w,T,R,k=0,v=[],S=1;S<=p;S++){var L=S/p,b=1-L;T=b*b*m+2*b*L*g+L*L*E,R=b*b*w+2*b*L*y+L*L*P,k+=v[v.push(Math.sqrt((h=T-M)*h+(h=R-x)*h))-1],M=T,x=R}u._segments.push(k),u._segments.push(v),u._length+=k}}else throw"invalid 'path' data, please see documentation for valid paths";h=u.orient,u.orient=!0;var G={};return i.calc(u,u.start,G),e.__rotPathS=Number(G.rotation.toFixed(5)),i.calc(u,u.end,G),e.__rotPathE=Number(G.rotation.toFixed(5)),u.orient=!1,i.calc(u,u.end,a),u.orient=h,u.orient&&(e.__guideData=u,i.testRotData(e,a)),n},i.testRotData=function(e,t){if(e.__rotGlobalS===void 0||e.__rotGlobalE===void 0){if(e.__needsRot)return;e._curQueueProps.rotation!==void 0?e.__rotGlobalS=e.__rotGlobalE=e._curQueueProps.rotation:e.__rotGlobalS=e.__rotGlobalE=t.rotation=e.target.rotation||0}if(e.__guideData!==void 0){var r=e.__guideData,n=e.__rotGlobalE-e.__rotGlobalS,a=e.__rotPathE-e.__rotPathS,h=n-a;if(r.orient=="auto")h>180?h-=360:h<-180&&(h+=360);else if(r.orient=="cw"){for(;h<0;)h+=360;h==0&&n>0&&n!=180&&(h+=360)}else if(r.orient=="ccw"){for(h=n-(a>180?360-a:a);h>0;)h-=360;h==0&&n<0&&n!=-180&&(h-=360)}r.rotDelta=h,r.rotOffS=e.__rotGlobalS-e.__rotPathS,e.__rotGlobalS=e.__rotGlobalE=e.__guideData=e.__needsRot=void 0}},i.tween=function(e,t,r,n,a,h,u,c){var f=a.guide;if(f==null||f===n.guide)return r;if(f.lastRatio!=h){var p=(f.end-f.start)*(u?f.end:h)+f.start;switch(i.calc(f,p,e.target),f.orient){case"cw":case"ccw":case"auto":e.target.rotation+=f.rotOffS+f.rotDelta*h;break;case"fixed":default:e.target.rotation+=f.rotOffS;break}f.lastRatio=h}return t=="rotation"&&(!f.orient||f.orient=="false")?r:e.target[t]},i.calc=function(e,t,r){if(e._segments==null)throw"Missing critical pre-calculated information, please file a bug";r==null&&(r={x:0,y:0,rotation:0});for(var n=e._segments,a=e.path,h=e._length*t,u=n.length-2,c=0;h>n[c]&&c<u;)h-=n[c],c+=2;var f=n[c+1],p=0;for(u=f.length-1;h>f[p]&&p<u;)h-=f[p],p++;var _=p/++u+h/(u*f[p]);c=c*2+2;var m=1-_;return r.x=m*m*a[c-2]+2*m*_*a[c+0]+_*_*a[c+2],r.y=m*m*a[c-1]+2*m*_*a[c+1]+_*_*a[c+3],e.orient&&(r.rotation=57.2957795*Math.atan2((a[c+1]-a[c-1])*m+(a[c+3]-a[c+1])*_,(a[c+0]-a[c-2])*m+(a[c+2]-a[c+0])*_)),r},o.MotionGuidePlugin=i}(),function(){var i=o.TweenJS=o.TweenJS||{};i.version="0.6.2",i.buildDate="Thu, 26 Nov 2015 20:44:31 GMT"}(),d.exports=Et.createjs})(Jt,Jt.exports);var _t=Jt.exports;const{window:pe}=ti;function Ie(d){let l,o="<h1>Can you draw a perfect circle?</h1>";return{c(){l=zt("div"),l.innerHTML=o,this.h()},l(i){l=Wt(i,"DIV",{class:!0,"data-svelte-h":!0}),Je(l)!=="svelte-10tb08k"&&(l.innerHTML=o),this.h()},h(){It(l,"class","header svelte-noqeui")},m(i,e){bt(i,l,e)},d(i){i&&mt(l)}}}function xe(d){let l,o;return{c(){l=zt("p"),o=Qe(d[6]),this.h()},l(i){l=Wt(i,"P",{class:!0});var e=_e(l);o=Ke(e,d[6]),e.forEach(mt),this.h()},h(){It(l,"class","errMsg svelte-noqeui")},m(i,e){bt(i,l,e),$e(l,o)},p(i,e){e&64&&Ze(o,i[6])},d(i){i&&mt(l)}}}function ts(d){let l,o,i,e,t,r,n,a=!d[2]&&Ie(),h=d[6].length>0&&xe(d);return{c(){l=zt("canvas"),o=ce(),a&&a.c(),i=ce(),h&&h.c(),e=ce(),t=zt("div"),this.h()},l(u){l=Wt(u,"CANVAS",{width:!0,height:!0,class:!0}),_e(l).forEach(mt),o=fe(u),a&&a.l(u),i=fe(u),h&&h.l(u),e=fe(u),t=Wt(u,"DIV",{class:!0}),_e(t).forEach(mt),this.h()},h(){It(l,"width","1000"),It(l,"height","1000"),It(l,"class","svelte-noqeui"),It(t,"class","info")},m(u,c){bt(u,l,c),d[13](l),bt(u,o,c),a&&a.m(u,c),bt(u,i,c),h&&h.m(u,c),bt(u,e,c),bt(u,t,c),r||(n=[de(pe,"mousemove",d[9]),de(pe,"mousedown",d[11]),de(pe,"mouseup",d[12])],r=!0)},p(u,[c]){u[2]?a&&(a.d(1),a=null):a||(a=Ie(),a.c(),a.m(i.parentNode,i)),u[6].length>0?h?h.p(u,c):(h=xe(u),h.c(),h.m(e.parentNode,e)):h&&(h.d(1),h=null)},i:Pe,o:Pe,d(u){u&&(mt(l),mt(o),mt(i),mt(e),mt(t)),d[13](null),a&&a.d(u),h&&h.d(u),r=!1,Ge(n)}}}function es(d,l,o=1e-5){return Math.abs(d-l)<o}function is(d){return d<.5?4*d*d*d:1-Math.pow(-2*d+2,3)/2}function ss(d,l,o){let i=!1,e=!1,t=!1,r,n,a=new _t.Shape,h=new _t.Shape,u=new _t.Container,c=new _t.Text,f=new ot([[0],[0]]),p=0,_="";function m(P){if(i&&!e){let M=[P.clientX-r.offsetLeft,P.clientY];const x=new _t.Shape;if(p==0)f.setColumn(0,M),x.graphics.beginFill("#9A3B3B").drawCircle(M[0],M[1],5),u.addChild(x),n.update();else{const T=f.getColumnVector(f.columns-1);f.addColumn(M),x.graphics.setStrokeStyle(4,"round","round").beginStroke("black").moveTo(T.get(0,0),T.get(1,0)).lineTo(M[0],M[1]).endStroke(),u.addChild(x),n.update()}p+=1}}function w(){if(f.size<=2)return;let P=f.max();f.div(P);let M=f.subMatrixRow([0]),x=f.subMatrixRow([1]),T=ot.columnVector([M.sum()/M.size,x.sum()/x.size]);const R=ot.pow(ot.subtract(M,T.get(0,0)),2),k=ot.pow(ot.subtract(x,T.get(1,0)),2);let v=ot.add(R,k).sqrt().mean();const S=300,L=[],b=.01;for(let at=0;at<S;at++){const U=ot.subtract(M,T.get(0,0)).mul(-1),tt=ot.subtract(x,T.get(1,0)).mul(-1),st=ot.add(ot.pow(U,2),ot.pow(tt,2)),J=ot.subtract(st,Math.pow(v,2)),K=ot.mul(J,U).sum(),Pt=ot.mul(J,tt).sum(),St=-v*J.sum(),Dt=ot.columnVector([K,Pt]);T.subtract(ot.mul(Dt,b)),v=v-St*b;const Ot=st.sqrt().subtract(v).abs().mean();L.push(Ot)}v=v*P,T.mul(P),console.clear();const G=L[L.length-1];let H=1-2*G/(v/P);console.table({r:v,center:`(${T.get(0,0)}, ${T.get(1,0)})`,perfect_rate:H,initial_error:L[0],error:G});const Y=f.getColumnVector(0),V=f.getColumnVector(f.columns-1),W=ot.subtract(Y,V).norm()*P;if(H<=.65?o(6,_="Not a circle at all"):W>=40&&o(6,_="Not a closed loop"),f=new ot([[0],[0]]),p=0,_.length!=0)return;o(1,e=!0);let it=3/2*Math.PI,X=it,j=0;n.setChildIndex(a,n.numChildren-1),n.setChildIndex(h,n.numChildren-1),n.setChildIndex(c,n.numChildren-1),_t.Ticker.on("tick",at=>{if(a.graphics.clear().setStrokeStyle(3,"round","round").beginStroke("#9A3B3B").arc(T.get(0,0),T.get(1,0),v,it,X,!1),h.graphics.clear().setStrokeStyle(3).beginStroke("#9A3B3B").moveTo(T.get(0,0),T.get(1,0)).lineTo(v*Math.cos(X)+T.get(0,0),v*Math.sin(X)+T.get(1,0)).endStroke(),es(j,1)){let U=v/3.5,tt=T.get(1,0);v>220&&(U=45),v<60&&(U=20,tt-=v+15),_t.Ticker.removeAllEventListeners(),o(5,c=new _t.Text(`${(H*100).toFixed(2)}%`,`${U}px "Playpen Sans"`,"black")),o(5,c.x=T.get(0,0),c),o(5,c.y=tt,c),o(5,c.textBaseline="alphabetic",c),o(5,c.textAlign="center",c),n.addChild(c),h.graphics.clear(),o(1,e=!1)}n.update(),X=2*Math.PI*is(j)+it,j+=.004})}He(()=>{o(3,r.width=window.innerWidth*1.4,r),o(3,r.height=window.innerHeight*1.4,r),o(3,r.style.width=`${window.innerWidth}px`,r),o(3,r.style.height=`${window.innerHeight}px`,r),o(4,n=new _t.Stage(r)),o(4,n.scaleX=1.4,n),o(4,n.scaleY=1.4,n),n.addChild(a),n.addChild(h),n.addChild(u),n.addChild(c),_t.Ticker.framerate=20,_t.Ticker.interval=1});const g=()=>{e||(o(2,t=!0),o(0,i=!0),u.removeAllChildren(),a.graphics.clear(),o(6,_=""),o(5,c.text="",c),n.update())},y=()=>{o(0,i=!1),w()};function E(P){Ye[P?"unshift":"push"](()=>{r=P,o(3,r)})}return[i,e,t,r,n,c,_,a,u,m,w,g,y,E]}class hs extends ze{constructor(l){super(),We(this,l,ss,ts,Xe,{})}}export{hs as component,as as universal};
