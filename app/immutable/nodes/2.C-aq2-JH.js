var xs=Object.defineProperty;var Cs=(l,t,e)=>t in l?xs(l,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):l[t]=e;var Ee=(l,t,e)=>(Cs(l,typeof t!="symbol"?t+"":t,e),e),oe=(l,t,e)=>{if(!t.has(l))throw TypeError("Cannot "+e)};var ct=(l,t,e)=>(oe(l,t,"read from private field"),e?e.call(l):t.get(l)),he=(l,t,e)=>{if(t.has(l))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(l):t.set(l,e)},Vt=(l,t,e,s)=>(oe(l,t,"write to private field"),s?s.call(l,e):t.set(l,e),e);var le=(l,t,e)=>(oe(l,t,"access private method"),e);import{h as Is,s as me,n as ce,e as is,r as Rs,o as Ds,f as rs}from"../chunks/scheduler.Cz8KL0TK.js";import{S as ns,i as os,m as Me,j as ut,g as X,y as Ft,z as Lt,d as mt,o as L,A as H,k as jt,e as Dt,s as Xt,u as Te,c as Pt,h as Ut,v as ke,w as xe,B as ae,t as St,a as kt,n as Ce,x as Ie,C as Ps,D as $t,b as Fs,f as Ls,l as js,q as Re}from"../chunks/index.BdbuKrLM.js";const Ns=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global,Bs=!0,Os=!1,nr=Object.freeze(Object.defineProperty({__proto__:null,prerender:Bs,ssr:Os},Symbol.toStringTag,{value:"Module"}));function hs(l){if(l.__esModule)return l;var t=l.default;if(typeof t=="function"){var e=function s(){return this instanceof s?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};e.prototype=t.prototype}else e={};return Object.defineProperty(e,"__esModule",{value:!0}),Object.keys(l).forEach(function(s){var r=Object.getOwnPropertyDescriptor(l,s);Object.defineProperty(e,s,r.get?r:{enumerable:!0,get:function(){return l[s]}})}),e}var A={};const As=Object.prototype.toString;function zt(l){const t=As.call(l);return t.endsWith("Array]")&&!t.includes("Big")}const zs=Object.freeze(Object.defineProperty({__proto__:null,isAnyArray:zt},Symbol.toStringTag,{value:"Module"})),Gs=hs(zs);function qs(l){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!zt(l))throw new TypeError("input must be an array");if(l.length===0)throw new TypeError("input must not be empty");var e=t.fromIndex,s=e===void 0?0:e,r=t.toIndex,n=r===void 0?l.length:r;if(s<0||s>=l.length||!Number.isInteger(s))throw new Error("fromIndex must be a positive integer smaller than length");if(n<=s||n>l.length||!Number.isInteger(n))throw new Error("toIndex must be an integer greater than fromIndex and at most equal to length");for(var o=l[s],h=s+1;h<n;h++)l[h]>o&&(o=l[h]);return o}function Ys(l){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!zt(l))throw new TypeError("input must be an array");if(l.length===0)throw new TypeError("input must not be empty");var e=t.fromIndex,s=e===void 0?0:e,r=t.toIndex,n=r===void 0?l.length:r;if(s<0||s>=l.length||!Number.isInteger(s))throw new Error("fromIndex must be a positive integer smaller than length");if(n<=s||n>l.length||!Number.isInteger(n))throw new Error("toIndex must be an integer greater than fromIndex and at most equal to length");for(var o=l[s],h=s+1;h<n;h++)l[h]<o&&(o=l[h]);return o}function Vs(l){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(zt(l)){if(l.length===0)throw new TypeError("input must not be empty")}else throw new TypeError("input must be an array");var e;if(t.output!==void 0){if(!zt(t.output))throw new TypeError("output option must be an array if specified");e=t.output}else e=new Array(l.length);var s=Ys(l),r=qs(l);if(s===r)throw new RangeError("minimum and maximum input values are equal. Cannot rescale a constant array");var n=t.min,o=n===void 0?t.autoMinMax?s:0:n,h=t.max,a=h===void 0?t.autoMinMax?r:1:h;if(o>=a)throw new RangeError("min option must be smaller than max option");for(var u=(a-o)/(r-s),c=0;c<l.length;c++)e[c]=(l[c]-s)*u+o;return e}const Xs=Object.freeze(Object.defineProperty({__proto__:null,default:Vs},Symbol.toStringTag,{value:"Module"})),Us=hs(Xs);Object.defineProperty(A,"__esModule",{value:!0});var rt=Gs,De=Us;const Wt=" ".repeat(2),ls=" ".repeat(4);function Ws(){return as(this)}function as(l,t={}){const{maxRows:e=15,maxColumns:s=10,maxNumSize:r=8,padMinus:n="auto"}=t;return`${l.constructor.name} {
${Wt}[
${ls}${Qs(l,e,s,r,n)}
${Wt}]
${Wt}rows: ${l.rows}
${Wt}columns: ${l.columns}
}`}function Qs(l,t,e,s,r){const{rows:n,columns:o}=l,h=Math.min(n,t),a=Math.min(o,e),u=[];if(r==="auto"){r=!1;t:for(let c=0;c<h;c++)for(let f=0;f<a;f++)if(l.get(c,f)<0){r=!0;break t}}for(let c=0;c<h;c++){let f=[];for(let g=0;g<a;g++)f.push(Js(l.get(c,g),s,r));u.push(`${f.join(" ")}`)}return a!==o&&(u[u.length-1]+=` ... ${o-e} more columns`),h!==n&&u.push(`... ${n-t} more rows`),u.join(`
${ls}`)}function Js(l,t,e){return(l>=0&&e?` ${Pe(l,t-1)}`:Pe(l,t)).padEnd(t)}function Pe(l,t){let e=l.toString();if(e.length<=t)return e;let s=l.toFixed(t);if(s.length>t&&(s=l.toFixed(Math.max(0,t-(s.length-t)))),s.length<=t&&!s.startsWith("0.000")&&!s.startsWith("-0.000"))return s;let r=l.toExponential(t);return r.length>t&&(r=l.toExponential(Math.max(0,t-(r.length-t)))),r.slice(0)}function Ks(l,t){l.prototype.add=function(s){return typeof s=="number"?this.addS(s):this.addM(s)},l.prototype.addS=function(s){for(let r=0;r<this.rows;r++)for(let n=0;n<this.columns;n++)this.set(r,n,this.get(r,n)+s);return this},l.prototype.addM=function(s){if(s=t.checkMatrix(s),this.rows!==s.rows||this.columns!==s.columns)throw new RangeError("Matrices dimensions must be equal");for(let r=0;r<this.rows;r++)for(let n=0;n<this.columns;n++)this.set(r,n,this.get(r,n)+s.get(r,n));return this},l.add=function(s,r){return new t(s).add(r)},l.prototype.sub=function(s){return typeof s=="number"?this.subS(s):this.subM(s)},l.prototype.subS=function(s){for(let r=0;r<this.rows;r++)for(let n=0;n<this.columns;n++)this.set(r,n,this.get(r,n)-s);return this},l.prototype.subM=function(s){if(s=t.checkMatrix(s),this.rows!==s.rows||this.columns!==s.columns)throw new RangeError("Matrices dimensions must be equal");for(let r=0;r<this.rows;r++)for(let n=0;n<this.columns;n++)this.set(r,n,this.get(r,n)-s.get(r,n));return this},l.sub=function(s,r){return new t(s).sub(r)},l.prototype.subtract=l.prototype.sub,l.prototype.subtractS=l.prototype.subS,l.prototype.subtractM=l.prototype.subM,l.subtract=l.sub,l.prototype.mul=function(s){return typeof s=="number"?this.mulS(s):this.mulM(s)},l.prototype.mulS=function(s){for(let r=0;r<this.rows;r++)for(let n=0;n<this.columns;n++)this.set(r,n,this.get(r,n)*s);return this},l.prototype.mulM=function(s){if(s=t.checkMatrix(s),this.rows!==s.rows||this.columns!==s.columns)throw new RangeError("Matrices dimensions must be equal");for(let r=0;r<this.rows;r++)for(let n=0;n<this.columns;n++)this.set(r,n,this.get(r,n)*s.get(r,n));return this},l.mul=function(s,r){return new t(s).mul(r)},l.prototype.multiply=l.prototype.mul,l.prototype.multiplyS=l.prototype.mulS,l.prototype.multiplyM=l.prototype.mulM,l.multiply=l.mul,l.prototype.div=function(s){return typeof s=="number"?this.divS(s):this.divM(s)},l.prototype.divS=function(s){for(let r=0;r<this.rows;r++)for(let n=0;n<this.columns;n++)this.set(r,n,this.get(r,n)/s);return this},l.prototype.divM=function(s){if(s=t.checkMatrix(s),this.rows!==s.rows||this.columns!==s.columns)throw new RangeError("Matrices dimensions must be equal");for(let r=0;r<this.rows;r++)for(let n=0;n<this.columns;n++)this.set(r,n,this.get(r,n)/s.get(r,n));return this},l.div=function(s,r){return new t(s).div(r)},l.prototype.divide=l.prototype.div,l.prototype.divideS=l.prototype.divS,l.prototype.divideM=l.prototype.divM,l.divide=l.div,l.prototype.mod=function(s){return typeof s=="number"?this.modS(s):this.modM(s)},l.prototype.modS=function(s){for(let r=0;r<this.rows;r++)for(let n=0;n<this.columns;n++)this.set(r,n,this.get(r,n)%s);return this},l.prototype.modM=function(s){if(s=t.checkMatrix(s),this.rows!==s.rows||this.columns!==s.columns)throw new RangeError("Matrices dimensions must be equal");for(let r=0;r<this.rows;r++)for(let n=0;n<this.columns;n++)this.set(r,n,this.get(r,n)%s.get(r,n));return this},l.mod=function(s,r){return new t(s).mod(r)},l.prototype.modulus=l.prototype.mod,l.prototype.modulusS=l.prototype.modS,l.prototype.modulusM=l.prototype.modM,l.modulus=l.mod,l.prototype.and=function(s){return typeof s=="number"?this.andS(s):this.andM(s)},l.prototype.andS=function(s){for(let r=0;r<this.rows;r++)for(let n=0;n<this.columns;n++)this.set(r,n,this.get(r,n)&s);return this},l.prototype.andM=function(s){if(s=t.checkMatrix(s),this.rows!==s.rows||this.columns!==s.columns)throw new RangeError("Matrices dimensions must be equal");for(let r=0;r<this.rows;r++)for(let n=0;n<this.columns;n++)this.set(r,n,this.get(r,n)&s.get(r,n));return this},l.and=function(s,r){return new t(s).and(r)},l.prototype.or=function(s){return typeof s=="number"?this.orS(s):this.orM(s)},l.prototype.orS=function(s){for(let r=0;r<this.rows;r++)for(let n=0;n<this.columns;n++)this.set(r,n,this.get(r,n)|s);return this},l.prototype.orM=function(s){if(s=t.checkMatrix(s),this.rows!==s.rows||this.columns!==s.columns)throw new RangeError("Matrices dimensions must be equal");for(let r=0;r<this.rows;r++)for(let n=0;n<this.columns;n++)this.set(r,n,this.get(r,n)|s.get(r,n));return this},l.or=function(s,r){return new t(s).or(r)},l.prototype.xor=function(s){return typeof s=="number"?this.xorS(s):this.xorM(s)},l.prototype.xorS=function(s){for(let r=0;r<this.rows;r++)for(let n=0;n<this.columns;n++)this.set(r,n,this.get(r,n)^s);return this},l.prototype.xorM=function(s){if(s=t.checkMatrix(s),this.rows!==s.rows||this.columns!==s.columns)throw new RangeError("Matrices dimensions must be equal");for(let r=0;r<this.rows;r++)for(let n=0;n<this.columns;n++)this.set(r,n,this.get(r,n)^s.get(r,n));return this},l.xor=function(s,r){return new t(s).xor(r)},l.prototype.leftShift=function(s){return typeof s=="number"?this.leftShiftS(s):this.leftShiftM(s)},l.prototype.leftShiftS=function(s){for(let r=0;r<this.rows;r++)for(let n=0;n<this.columns;n++)this.set(r,n,this.get(r,n)<<s);return this},l.prototype.leftShiftM=function(s){if(s=t.checkMatrix(s),this.rows!==s.rows||this.columns!==s.columns)throw new RangeError("Matrices dimensions must be equal");for(let r=0;r<this.rows;r++)for(let n=0;n<this.columns;n++)this.set(r,n,this.get(r,n)<<s.get(r,n));return this},l.leftShift=function(s,r){return new t(s).leftShift(r)},l.prototype.signPropagatingRightShift=function(s){return typeof s=="number"?this.signPropagatingRightShiftS(s):this.signPropagatingRightShiftM(s)},l.prototype.signPropagatingRightShiftS=function(s){for(let r=0;r<this.rows;r++)for(let n=0;n<this.columns;n++)this.set(r,n,this.get(r,n)>>s);return this},l.prototype.signPropagatingRightShiftM=function(s){if(s=t.checkMatrix(s),this.rows!==s.rows||this.columns!==s.columns)throw new RangeError("Matrices dimensions must be equal");for(let r=0;r<this.rows;r++)for(let n=0;n<this.columns;n++)this.set(r,n,this.get(r,n)>>s.get(r,n));return this},l.signPropagatingRightShift=function(s,r){return new t(s).signPropagatingRightShift(r)},l.prototype.rightShift=function(s){return typeof s=="number"?this.rightShiftS(s):this.rightShiftM(s)},l.prototype.rightShiftS=function(s){for(let r=0;r<this.rows;r++)for(let n=0;n<this.columns;n++)this.set(r,n,this.get(r,n)>>>s);return this},l.prototype.rightShiftM=function(s){if(s=t.checkMatrix(s),this.rows!==s.rows||this.columns!==s.columns)throw new RangeError("Matrices dimensions must be equal");for(let r=0;r<this.rows;r++)for(let n=0;n<this.columns;n++)this.set(r,n,this.get(r,n)>>>s.get(r,n));return this},l.rightShift=function(s,r){return new t(s).rightShift(r)},l.prototype.zeroFillRightShift=l.prototype.rightShift,l.prototype.zeroFillRightShiftS=l.prototype.rightShiftS,l.prototype.zeroFillRightShiftM=l.prototype.rightShiftM,l.zeroFillRightShift=l.rightShift,l.prototype.not=function(){for(let s=0;s<this.rows;s++)for(let r=0;r<this.columns;r++)this.set(s,r,~this.get(s,r));return this},l.not=function(s){return new t(s).not()},l.prototype.abs=function(){for(let s=0;s<this.rows;s++)for(let r=0;r<this.columns;r++)this.set(s,r,Math.abs(this.get(s,r)));return this},l.abs=function(s){return new t(s).abs()},l.prototype.acos=function(){for(let s=0;s<this.rows;s++)for(let r=0;r<this.columns;r++)this.set(s,r,Math.acos(this.get(s,r)));return this},l.acos=function(s){return new t(s).acos()},l.prototype.acosh=function(){for(let s=0;s<this.rows;s++)for(let r=0;r<this.columns;r++)this.set(s,r,Math.acosh(this.get(s,r)));return this},l.acosh=function(s){return new t(s).acosh()},l.prototype.asin=function(){for(let s=0;s<this.rows;s++)for(let r=0;r<this.columns;r++)this.set(s,r,Math.asin(this.get(s,r)));return this},l.asin=function(s){return new t(s).asin()},l.prototype.asinh=function(){for(let s=0;s<this.rows;s++)for(let r=0;r<this.columns;r++)this.set(s,r,Math.asinh(this.get(s,r)));return this},l.asinh=function(s){return new t(s).asinh()},l.prototype.atan=function(){for(let s=0;s<this.rows;s++)for(let r=0;r<this.columns;r++)this.set(s,r,Math.atan(this.get(s,r)));return this},l.atan=function(s){return new t(s).atan()},l.prototype.atanh=function(){for(let s=0;s<this.rows;s++)for(let r=0;r<this.columns;r++)this.set(s,r,Math.atanh(this.get(s,r)));return this},l.atanh=function(s){return new t(s).atanh()},l.prototype.cbrt=function(){for(let s=0;s<this.rows;s++)for(let r=0;r<this.columns;r++)this.set(s,r,Math.cbrt(this.get(s,r)));return this},l.cbrt=function(s){return new t(s).cbrt()},l.prototype.ceil=function(){for(let s=0;s<this.rows;s++)for(let r=0;r<this.columns;r++)this.set(s,r,Math.ceil(this.get(s,r)));return this},l.ceil=function(s){return new t(s).ceil()},l.prototype.clz32=function(){for(let s=0;s<this.rows;s++)for(let r=0;r<this.columns;r++)this.set(s,r,Math.clz32(this.get(s,r)));return this},l.clz32=function(s){return new t(s).clz32()},l.prototype.cos=function(){for(let s=0;s<this.rows;s++)for(let r=0;r<this.columns;r++)this.set(s,r,Math.cos(this.get(s,r)));return this},l.cos=function(s){return new t(s).cos()},l.prototype.cosh=function(){for(let s=0;s<this.rows;s++)for(let r=0;r<this.columns;r++)this.set(s,r,Math.cosh(this.get(s,r)));return this},l.cosh=function(s){return new t(s).cosh()},l.prototype.exp=function(){for(let s=0;s<this.rows;s++)for(let r=0;r<this.columns;r++)this.set(s,r,Math.exp(this.get(s,r)));return this},l.exp=function(s){return new t(s).exp()},l.prototype.expm1=function(){for(let s=0;s<this.rows;s++)for(let r=0;r<this.columns;r++)this.set(s,r,Math.expm1(this.get(s,r)));return this},l.expm1=function(s){return new t(s).expm1()},l.prototype.floor=function(){for(let s=0;s<this.rows;s++)for(let r=0;r<this.columns;r++)this.set(s,r,Math.floor(this.get(s,r)));return this},l.floor=function(s){return new t(s).floor()},l.prototype.fround=function(){for(let s=0;s<this.rows;s++)for(let r=0;r<this.columns;r++)this.set(s,r,Math.fround(this.get(s,r)));return this},l.fround=function(s){return new t(s).fround()},l.prototype.log=function(){for(let s=0;s<this.rows;s++)for(let r=0;r<this.columns;r++)this.set(s,r,Math.log(this.get(s,r)));return this},l.log=function(s){return new t(s).log()},l.prototype.log1p=function(){for(let s=0;s<this.rows;s++)for(let r=0;r<this.columns;r++)this.set(s,r,Math.log1p(this.get(s,r)));return this},l.log1p=function(s){return new t(s).log1p()},l.prototype.log10=function(){for(let s=0;s<this.rows;s++)for(let r=0;r<this.columns;r++)this.set(s,r,Math.log10(this.get(s,r)));return this},l.log10=function(s){return new t(s).log10()},l.prototype.log2=function(){for(let s=0;s<this.rows;s++)for(let r=0;r<this.columns;r++)this.set(s,r,Math.log2(this.get(s,r)));return this},l.log2=function(s){return new t(s).log2()},l.prototype.round=function(){for(let s=0;s<this.rows;s++)for(let r=0;r<this.columns;r++)this.set(s,r,Math.round(this.get(s,r)));return this},l.round=function(s){return new t(s).round()},l.prototype.sign=function(){for(let s=0;s<this.rows;s++)for(let r=0;r<this.columns;r++)this.set(s,r,Math.sign(this.get(s,r)));return this},l.sign=function(s){return new t(s).sign()},l.prototype.sin=function(){for(let s=0;s<this.rows;s++)for(let r=0;r<this.columns;r++)this.set(s,r,Math.sin(this.get(s,r)));return this},l.sin=function(s){return new t(s).sin()},l.prototype.sinh=function(){for(let s=0;s<this.rows;s++)for(let r=0;r<this.columns;r++)this.set(s,r,Math.sinh(this.get(s,r)));return this},l.sinh=function(s){return new t(s).sinh()},l.prototype.sqrt=function(){for(let s=0;s<this.rows;s++)for(let r=0;r<this.columns;r++)this.set(s,r,Math.sqrt(this.get(s,r)));return this},l.sqrt=function(s){return new t(s).sqrt()},l.prototype.tan=function(){for(let s=0;s<this.rows;s++)for(let r=0;r<this.columns;r++)this.set(s,r,Math.tan(this.get(s,r)));return this},l.tan=function(s){return new t(s).tan()},l.prototype.tanh=function(){for(let s=0;s<this.rows;s++)for(let r=0;r<this.columns;r++)this.set(s,r,Math.tanh(this.get(s,r)));return this},l.tanh=function(s){return new t(s).tanh()},l.prototype.trunc=function(){for(let s=0;s<this.rows;s++)for(let r=0;r<this.columns;r++)this.set(s,r,Math.trunc(this.get(s,r)));return this},l.trunc=function(s){return new t(s).trunc()},l.pow=function(s,r){return new t(s).pow(r)},l.prototype.pow=function(s){return typeof s=="number"?this.powS(s):this.powM(s)},l.prototype.powS=function(s){for(let r=0;r<this.rows;r++)for(let n=0;n<this.columns;n++)this.set(r,n,Math.pow(this.get(r,n),s));return this},l.prototype.powM=function(s){if(s=t.checkMatrix(s),this.rows!==s.rows||this.columns!==s.columns)throw new RangeError("Matrices dimensions must be equal");for(let r=0;r<this.rows;r++)for(let n=0;n<this.columns;n++)this.set(r,n,Math.pow(this.get(r,n),s.get(r,n)));return this}}function ht(l,t,e){let s=e?l.rows:l.rows-1;if(t<0||t>s)throw new RangeError("Row index out of range")}function lt(l,t,e){let s=e?l.columns:l.columns-1;if(t<0||t>s)throw new RangeError("Column index out of range")}function Ct(l,t){if(t.to1DArray&&(t=t.to1DArray()),t.length!==l.columns)throw new RangeError("vector size must be the same as the number of columns");return t}function It(l,t){if(t.to1DArray&&(t=t.to1DArray()),t.length!==l.rows)throw new RangeError("vector size must be the same as the number of rows");return t}function pe(l,t){if(!rt.isAnyArray(t))throw new TypeError("row indices must be an array");for(let e=0;e<t.length;e++)if(t[e]<0||t[e]>=l.rows)throw new RangeError("row indices are out of range")}function we(l,t){if(!rt.isAnyArray(t))throw new TypeError("column indices must be an array");for(let e=0;e<t.length;e++)if(t[e]<0||t[e]>=l.columns)throw new RangeError("column indices are out of range")}function de(l,t,e,s,r){if(arguments.length!==5)throw new RangeError("expected 4 arguments");if(Qt("startRow",t),Qt("endRow",e),Qt("startColumn",s),Qt("endColumn",r),t>e||s>r||t<0||t>=l.rows||e<0||e>=l.rows||s<0||s>=l.columns||r<0||r>=l.columns)throw new RangeError("Submatrix indices are out of range")}function ee(l,t=0){let e=[];for(let s=0;s<l;s++)e.push(t);return e}function Qt(l,t){if(typeof t!="number")throw new TypeError(`${l} must be a number`)}function xt(l){if(l.isEmpty())throw new Error("Empty matrix has no elements to index")}function Zs(l){let t=ee(l.rows);for(let e=0;e<l.rows;++e)for(let s=0;s<l.columns;++s)t[e]+=l.get(e,s);return t}function $s(l){let t=ee(l.columns);for(let e=0;e<l.rows;++e)for(let s=0;s<l.columns;++s)t[s]+=l.get(e,s);return t}function Hs(l){let t=0;for(let e=0;e<l.rows;e++)for(let s=0;s<l.columns;s++)t+=l.get(e,s);return t}function ti(l){let t=ee(l.rows,1);for(let e=0;e<l.rows;++e)for(let s=0;s<l.columns;++s)t[e]*=l.get(e,s);return t}function ei(l){let t=ee(l.columns,1);for(let e=0;e<l.rows;++e)for(let s=0;s<l.columns;++s)t[s]*=l.get(e,s);return t}function si(l){let t=1;for(let e=0;e<l.rows;e++)for(let s=0;s<l.columns;s++)t*=l.get(e,s);return t}function ii(l,t,e){const s=l.rows,r=l.columns,n=[];for(let o=0;o<s;o++){let h=0,a=0,u=0;for(let c=0;c<r;c++)u=l.get(o,c)-e[o],h+=u,a+=u*u;t?n.push((a-h*h/r)/(r-1)):n.push((a-h*h/r)/r)}return n}function ri(l,t,e){const s=l.rows,r=l.columns,n=[];for(let o=0;o<r;o++){let h=0,a=0,u=0;for(let c=0;c<s;c++)u=l.get(c,o)-e[o],h+=u,a+=u*u;t?n.push((a-h*h/s)/(s-1)):n.push((a-h*h/s)/s)}return n}function ni(l,t,e){const s=l.rows,r=l.columns,n=s*r;let o=0,h=0,a=0;for(let u=0;u<s;u++)for(let c=0;c<r;c++)a=l.get(u,c)-e,o+=a,h+=a*a;return t?(h-o*o/n)/(n-1):(h-o*o/n)/n}function oi(l,t){for(let e=0;e<l.rows;e++)for(let s=0;s<l.columns;s++)l.set(e,s,l.get(e,s)-t[e])}function hi(l,t){for(let e=0;e<l.rows;e++)for(let s=0;s<l.columns;s++)l.set(e,s,l.get(e,s)-t[s])}function li(l,t){for(let e=0;e<l.rows;e++)for(let s=0;s<l.columns;s++)l.set(e,s,l.get(e,s)-t)}function ai(l){const t=[];for(let e=0;e<l.rows;e++){let s=0;for(let r=0;r<l.columns;r++)s+=Math.pow(l.get(e,r),2)/(l.columns-1);t.push(Math.sqrt(s))}return t}function ui(l,t){for(let e=0;e<l.rows;e++)for(let s=0;s<l.columns;s++)l.set(e,s,l.get(e,s)/t[e])}function fi(l){const t=[];for(let e=0;e<l.columns;e++){let s=0;for(let r=0;r<l.rows;r++)s+=Math.pow(l.get(r,e),2)/(l.rows-1);t.push(Math.sqrt(s))}return t}function ci(l,t){for(let e=0;e<l.rows;e++)for(let s=0;s<l.columns;s++)l.set(e,s,l.get(e,s)/t[s])}function di(l){const t=l.size-1;let e=0;for(let s=0;s<l.columns;s++)for(let r=0;r<l.rows;r++)e+=Math.pow(l.get(r,s),2)/t;return Math.sqrt(e)}function gi(l,t){for(let e=0;e<l.rows;e++)for(let s=0;s<l.columns;s++)l.set(e,s,l.get(e,s)/t)}class B{static from1DArray(t,e,s){if(t*e!==s.length)throw new RangeError("data length does not match given dimensions");let n=new k(t,e);for(let o=0;o<t;o++)for(let h=0;h<e;h++)n.set(o,h,s[o*e+h]);return n}static rowVector(t){let e=new k(1,t.length);for(let s=0;s<t.length;s++)e.set(0,s,t[s]);return e}static columnVector(t){let e=new k(t.length,1);for(let s=0;s<t.length;s++)e.set(s,0,t[s]);return e}static zeros(t,e){return new k(t,e)}static ones(t,e){return new k(t,e).fill(1)}static rand(t,e,s={}){if(typeof s!="object")throw new TypeError("options must be an object");const{random:r=Math.random}=s;let n=new k(t,e);for(let o=0;o<t;o++)for(let h=0;h<e;h++)n.set(o,h,r());return n}static randInt(t,e,s={}){if(typeof s!="object")throw new TypeError("options must be an object");const{min:r=0,max:n=1e3,random:o=Math.random}=s;if(!Number.isInteger(r))throw new TypeError("min must be an integer");if(!Number.isInteger(n))throw new TypeError("max must be an integer");if(r>=n)throw new RangeError("min must be smaller than max");let h=n-r,a=new k(t,e);for(let u=0;u<t;u++)for(let c=0;c<e;c++){let f=r+Math.round(o()*h);a.set(u,c,f)}return a}static eye(t,e,s){e===void 0&&(e=t),s===void 0&&(s=1);let r=Math.min(t,e),n=this.zeros(t,e);for(let o=0;o<r;o++)n.set(o,o,s);return n}static diag(t,e,s){let r=t.length;e===void 0&&(e=r),s===void 0&&(s=e);let n=Math.min(r,e,s),o=this.zeros(e,s);for(let h=0;h<n;h++)o.set(h,h,t[h]);return o}static min(t,e){t=this.checkMatrix(t),e=this.checkMatrix(e);let s=t.rows,r=t.columns,n=new k(s,r);for(let o=0;o<s;o++)for(let h=0;h<r;h++)n.set(o,h,Math.min(t.get(o,h),e.get(o,h)));return n}static max(t,e){t=this.checkMatrix(t),e=this.checkMatrix(e);let s=t.rows,r=t.columns,n=new this(s,r);for(let o=0;o<s;o++)for(let h=0;h<r;h++)n.set(o,h,Math.max(t.get(o,h),e.get(o,h)));return n}static checkMatrix(t){return B.isMatrix(t)?t:new k(t)}static isMatrix(t){return t!=null&&t.klass==="Matrix"}get size(){return this.rows*this.columns}apply(t){if(typeof t!="function")throw new TypeError("callback must be a function");for(let e=0;e<this.rows;e++)for(let s=0;s<this.columns;s++)t.call(this,e,s);return this}to1DArray(){let t=[];for(let e=0;e<this.rows;e++)for(let s=0;s<this.columns;s++)t.push(this.get(e,s));return t}to2DArray(){let t=[];for(let e=0;e<this.rows;e++){t.push([]);for(let s=0;s<this.columns;s++)t[e].push(this.get(e,s))}return t}toJSON(){return this.to2DArray()}isRowVector(){return this.rows===1}isColumnVector(){return this.columns===1}isVector(){return this.rows===1||this.columns===1}isSquare(){return this.rows===this.columns}isEmpty(){return this.rows===0||this.columns===0}isSymmetric(){if(this.isSquare()){for(let t=0;t<this.rows;t++)for(let e=0;e<=t;e++)if(this.get(t,e)!==this.get(e,t))return!1;return!0}return!1}isDistance(){if(!this.isSymmetric())return!1;for(let t=0;t<this.rows;t++)if(this.get(t,t)!==0)return!1;return!0}isEchelonForm(){let t=0,e=0,s=-1,r=!0,n=!1;for(;t<this.rows&&r;){for(e=0,n=!1;e<this.columns&&n===!1;)this.get(t,e)===0?e++:this.get(t,e)===1&&e>s?(n=!0,s=e):(r=!1,n=!0);t++}return r}isReducedEchelonForm(){let t=0,e=0,s=-1,r=!0,n=!1;for(;t<this.rows&&r;){for(e=0,n=!1;e<this.columns&&n===!1;)this.get(t,e)===0?e++:this.get(t,e)===1&&e>s?(n=!0,s=e):(r=!1,n=!0);for(let o=e+1;o<this.rows;o++)this.get(t,o)!==0&&(r=!1);t++}return r}echelonForm(){let t=this.clone(),e=0,s=0;for(;e<t.rows&&s<t.columns;){let r=e;for(let n=e;n<t.rows;n++)t.get(n,s)>t.get(r,s)&&(r=n);if(t.get(r,s)===0)s++;else{t.swapRows(e,r);let n=t.get(e,s);for(let o=s;o<t.columns;o++)t.set(e,o,t.get(e,o)/n);for(let o=e+1;o<t.rows;o++){let h=t.get(o,s)/t.get(e,s);t.set(o,s,0);for(let a=s+1;a<t.columns;a++)t.set(o,a,t.get(o,a)-t.get(e,a)*h)}e++,s++}}return t}reducedEchelonForm(){let t=this.echelonForm(),e=t.columns,s=t.rows,r=s-1;for(;r>=0;)if(t.maxRow(r)===0)r--;else{let n=0,o=!1;for(;n<s&&o===!1;)t.get(r,n)===1?o=!0:n++;for(let h=0;h<r;h++){let a=t.get(h,n);for(let u=n;u<e;u++){let c=t.get(h,u)-a*t.get(r,u);t.set(h,u,c)}}r--}return t}set(){throw new Error("set method is unimplemented")}get(){throw new Error("get method is unimplemented")}repeat(t={}){if(typeof t!="object")throw new TypeError("options must be an object");const{rows:e=1,columns:s=1}=t;if(!Number.isInteger(e)||e<=0)throw new TypeError("rows must be a positive integer");if(!Number.isInteger(s)||s<=0)throw new TypeError("columns must be a positive integer");let r=new k(this.rows*e,this.columns*s);for(let n=0;n<e;n++)for(let o=0;o<s;o++)r.setSubMatrix(this,this.rows*n,this.columns*o);return r}fill(t){for(let e=0;e<this.rows;e++)for(let s=0;s<this.columns;s++)this.set(e,s,t);return this}neg(){return this.mulS(-1)}getRow(t){ht(this,t);let e=[];for(let s=0;s<this.columns;s++)e.push(this.get(t,s));return e}getRowVector(t){return k.rowVector(this.getRow(t))}setRow(t,e){ht(this,t),e=Ct(this,e);for(let s=0;s<this.columns;s++)this.set(t,s,e[s]);return this}swapRows(t,e){ht(this,t),ht(this,e);for(let s=0;s<this.columns;s++){let r=this.get(t,s);this.set(t,s,this.get(e,s)),this.set(e,s,r)}return this}getColumn(t){lt(this,t);let e=[];for(let s=0;s<this.rows;s++)e.push(this.get(s,t));return e}getColumnVector(t){return k.columnVector(this.getColumn(t))}setColumn(t,e){lt(this,t),e=It(this,e);for(let s=0;s<this.rows;s++)this.set(s,t,e[s]);return this}swapColumns(t,e){lt(this,t),lt(this,e);for(let s=0;s<this.rows;s++){let r=this.get(s,t);this.set(s,t,this.get(s,e)),this.set(s,e,r)}return this}addRowVector(t){t=Ct(this,t);for(let e=0;e<this.rows;e++)for(let s=0;s<this.columns;s++)this.set(e,s,this.get(e,s)+t[s]);return this}subRowVector(t){t=Ct(this,t);for(let e=0;e<this.rows;e++)for(let s=0;s<this.columns;s++)this.set(e,s,this.get(e,s)-t[s]);return this}mulRowVector(t){t=Ct(this,t);for(let e=0;e<this.rows;e++)for(let s=0;s<this.columns;s++)this.set(e,s,this.get(e,s)*t[s]);return this}divRowVector(t){t=Ct(this,t);for(let e=0;e<this.rows;e++)for(let s=0;s<this.columns;s++)this.set(e,s,this.get(e,s)/t[s]);return this}addColumnVector(t){t=It(this,t);for(let e=0;e<this.rows;e++)for(let s=0;s<this.columns;s++)this.set(e,s,this.get(e,s)+t[e]);return this}subColumnVector(t){t=It(this,t);for(let e=0;e<this.rows;e++)for(let s=0;s<this.columns;s++)this.set(e,s,this.get(e,s)-t[e]);return this}mulColumnVector(t){t=It(this,t);for(let e=0;e<this.rows;e++)for(let s=0;s<this.columns;s++)this.set(e,s,this.get(e,s)*t[e]);return this}divColumnVector(t){t=It(this,t);for(let e=0;e<this.rows;e++)for(let s=0;s<this.columns;s++)this.set(e,s,this.get(e,s)/t[e]);return this}mulRow(t,e){ht(this,t);for(let s=0;s<this.columns;s++)this.set(t,s,this.get(t,s)*e);return this}mulColumn(t,e){lt(this,t);for(let s=0;s<this.rows;s++)this.set(s,t,this.get(s,t)*e);return this}max(t){if(this.isEmpty())return NaN;switch(t){case"row":{const e=new Array(this.rows).fill(Number.NEGATIVE_INFINITY);for(let s=0;s<this.rows;s++)for(let r=0;r<this.columns;r++)this.get(s,r)>e[s]&&(e[s]=this.get(s,r));return e}case"column":{const e=new Array(this.columns).fill(Number.NEGATIVE_INFINITY);for(let s=0;s<this.rows;s++)for(let r=0;r<this.columns;r++)this.get(s,r)>e[r]&&(e[r]=this.get(s,r));return e}case void 0:{let e=this.get(0,0);for(let s=0;s<this.rows;s++)for(let r=0;r<this.columns;r++)this.get(s,r)>e&&(e=this.get(s,r));return e}default:throw new Error(`invalid option: ${t}`)}}maxIndex(){xt(this);let t=this.get(0,0),e=[0,0];for(let s=0;s<this.rows;s++)for(let r=0;r<this.columns;r++)this.get(s,r)>t&&(t=this.get(s,r),e[0]=s,e[1]=r);return e}min(t){if(this.isEmpty())return NaN;switch(t){case"row":{const e=new Array(this.rows).fill(Number.POSITIVE_INFINITY);for(let s=0;s<this.rows;s++)for(let r=0;r<this.columns;r++)this.get(s,r)<e[s]&&(e[s]=this.get(s,r));return e}case"column":{const e=new Array(this.columns).fill(Number.POSITIVE_INFINITY);for(let s=0;s<this.rows;s++)for(let r=0;r<this.columns;r++)this.get(s,r)<e[r]&&(e[r]=this.get(s,r));return e}case void 0:{let e=this.get(0,0);for(let s=0;s<this.rows;s++)for(let r=0;r<this.columns;r++)this.get(s,r)<e&&(e=this.get(s,r));return e}default:throw new Error(`invalid option: ${t}`)}}minIndex(){xt(this);let t=this.get(0,0),e=[0,0];for(let s=0;s<this.rows;s++)for(let r=0;r<this.columns;r++)this.get(s,r)<t&&(t=this.get(s,r),e[0]=s,e[1]=r);return e}maxRow(t){if(ht(this,t),this.isEmpty())return NaN;let e=this.get(t,0);for(let s=1;s<this.columns;s++)this.get(t,s)>e&&(e=this.get(t,s));return e}maxRowIndex(t){ht(this,t),xt(this);let e=this.get(t,0),s=[t,0];for(let r=1;r<this.columns;r++)this.get(t,r)>e&&(e=this.get(t,r),s[1]=r);return s}minRow(t){if(ht(this,t),this.isEmpty())return NaN;let e=this.get(t,0);for(let s=1;s<this.columns;s++)this.get(t,s)<e&&(e=this.get(t,s));return e}minRowIndex(t){ht(this,t),xt(this);let e=this.get(t,0),s=[t,0];for(let r=1;r<this.columns;r++)this.get(t,r)<e&&(e=this.get(t,r),s[1]=r);return s}maxColumn(t){if(lt(this,t),this.isEmpty())return NaN;let e=this.get(0,t);for(let s=1;s<this.rows;s++)this.get(s,t)>e&&(e=this.get(s,t));return e}maxColumnIndex(t){lt(this,t),xt(this);let e=this.get(0,t),s=[0,t];for(let r=1;r<this.rows;r++)this.get(r,t)>e&&(e=this.get(r,t),s[0]=r);return s}minColumn(t){if(lt(this,t),this.isEmpty())return NaN;let e=this.get(0,t);for(let s=1;s<this.rows;s++)this.get(s,t)<e&&(e=this.get(s,t));return e}minColumnIndex(t){lt(this,t),xt(this);let e=this.get(0,t),s=[0,t];for(let r=1;r<this.rows;r++)this.get(r,t)<e&&(e=this.get(r,t),s[0]=r);return s}diag(){let t=Math.min(this.rows,this.columns),e=[];for(let s=0;s<t;s++)e.push(this.get(s,s));return e}norm(t="frobenius"){switch(t){case"max":return this.max();case"frobenius":return Math.sqrt(this.dot(this));default:throw new RangeError(`unknown norm type: ${t}`)}}cumulativeSum(){let t=0;for(let e=0;e<this.rows;e++)for(let s=0;s<this.columns;s++)t+=this.get(e,s),this.set(e,s,t);return this}dot(t){B.isMatrix(t)&&(t=t.to1DArray());let e=this.to1DArray();if(e.length!==t.length)throw new RangeError("vectors do not have the same size");let s=0;for(let r=0;r<e.length;r++)s+=e[r]*t[r];return s}mmul(t){t=k.checkMatrix(t);let e=this.rows,s=this.columns,r=t.columns,n=new k(e,r),o=new Float64Array(s);for(let h=0;h<r;h++){for(let a=0;a<s;a++)o[a]=t.get(a,h);for(let a=0;a<e;a++){let u=0;for(let c=0;c<s;c++)u+=this.get(a,c)*o[c];n.set(a,h,u)}}return n}strassen2x2(t){t=k.checkMatrix(t);let e=new k(2,2);const s=this.get(0,0),r=t.get(0,0),n=this.get(0,1),o=t.get(0,1),h=this.get(1,0),a=t.get(1,0),u=this.get(1,1),c=t.get(1,1),f=(s+u)*(r+c),g=(h+u)*r,w=s*(o-c),m=u*(a-r),p=(s+n)*c,b=(h-s)*(r+o),d=(n-u)*(a+c),v=f+m-p+d,M=w+p,C=g+m,P=f-g+w+b;return e.set(0,0,v),e.set(0,1,M),e.set(1,0,C),e.set(1,1,P),e}strassen3x3(t){t=k.checkMatrix(t);let e=new k(3,3);const s=this.get(0,0),r=this.get(0,1),n=this.get(0,2),o=this.get(1,0),h=this.get(1,1),a=this.get(1,2),u=this.get(2,0),c=this.get(2,1),f=this.get(2,2),g=t.get(0,0),w=t.get(0,1),m=t.get(0,2),p=t.get(1,0),b=t.get(1,1),d=t.get(1,2),v=t.get(2,0),M=t.get(2,1),C=t.get(2,2),P=(s+r+n-o-h-c-f)*b,R=(s-o)*(-w+b),E=h*(-g+w+p-b-d-v+C),x=(-s+o+h)*(g-w+b),D=(o+h)*(-g+w),_=s*g,y=(-s+u+c)*(g-m+d),T=(-s+u)*(m-d),S=(u+c)*(-g+m),N=(s+r+n-h-a-u-c)*d,O=c*(-g+m+p-b-d-v+M),j=(-n+c+f)*(b+v-M),I=(n-f)*(b-M),U=n*v,$=(c+f)*(-v+M),q=(-n+h+a)*(d+v-C),it=(n-a)*(d-C),Y=(h+a)*(-v+C),F=r*p,Q=a*M,et=o*m,nt=u*w,J=f*C,_s=_+U+F,ys=P+x+D+_+j+U+$,bs=_+y+S+N+U+q+Y,vs=R+E+x+_+U+q+it,Ss=R+x+D+_+Q,Es=U+q+it+Y+et,Ms=_+y+T+O+j+I+U,Ts=j+I+U+$+nt,ks=_+y+T+S+J;return e.set(0,0,_s),e.set(0,1,ys),e.set(0,2,bs),e.set(1,0,vs),e.set(1,1,Ss),e.set(1,2,Es),e.set(2,0,Ms),e.set(2,1,Ts),e.set(2,2,ks),e}mmulStrassen(t){t=k.checkMatrix(t);let e=this.clone(),s=e.rows,r=e.columns,n=t.rows,o=t.columns;r!==n&&console.warn(`Multiplying ${s} x ${r} and ${n} x ${o} matrix: dimensions do not match.`);function h(f,g,w){let m=f.rows,p=f.columns;if(m===g&&p===w)return f;{let b=B.zeros(g,w);return b=b.setSubMatrix(f,0,0),b}}let a=Math.max(s,n),u=Math.max(r,o);e=h(e,a,u),t=h(t,a,u);function c(f,g,w,m){if(w<=512||m<=512)return f.mmul(g);w%2===1&&m%2===1?(f=h(f,w+1,m+1),g=h(g,w+1,m+1)):w%2===1?(f=h(f,w+1,m),g=h(g,w+1,m)):m%2===1&&(f=h(f,w,m+1),g=h(g,w,m+1));let p=parseInt(f.rows/2,10),b=parseInt(f.columns/2,10),d=f.subMatrix(0,p-1,0,b-1),v=g.subMatrix(0,p-1,0,b-1),M=f.subMatrix(0,p-1,b,f.columns-1),C=g.subMatrix(0,p-1,b,g.columns-1),P=f.subMatrix(p,f.rows-1,0,b-1),R=g.subMatrix(p,g.rows-1,0,b-1),E=f.subMatrix(p,f.rows-1,b,f.columns-1),x=g.subMatrix(p,g.rows-1,b,g.columns-1),D=c(B.add(d,E),B.add(v,x),p,b),_=c(B.add(P,E),v,p,b),y=c(d,B.sub(C,x),p,b),T=c(E,B.sub(R,v),p,b),S=c(B.add(d,M),x,p,b),N=c(B.sub(P,d),B.add(v,C),p,b),O=c(B.sub(M,E),B.add(R,x),p,b),j=B.add(D,T);j.sub(S),j.add(O);let I=B.add(y,S),U=B.add(_,T),$=B.sub(D,_);$.add(y),$.add(N);let q=B.zeros(2*j.rows,2*j.columns);return q=q.setSubMatrix(j,0,0),q=q.setSubMatrix(I,j.rows,0),q=q.setSubMatrix(U,0,j.columns),q=q.setSubMatrix($,j.rows,j.columns),q.subMatrix(0,w-1,0,m-1)}return c(e,t,a,u)}scaleRows(t={}){if(typeof t!="object")throw new TypeError("options must be an object");const{min:e=0,max:s=1}=t;if(!Number.isFinite(e))throw new TypeError("min must be a number");if(!Number.isFinite(s))throw new TypeError("max must be a number");if(e>=s)throw new RangeError("min must be smaller than max");let r=new k(this.rows,this.columns);for(let n=0;n<this.rows;n++){const o=this.getRow(n);o.length>0&&De(o,{min:e,max:s,output:o}),r.setRow(n,o)}return r}scaleColumns(t={}){if(typeof t!="object")throw new TypeError("options must be an object");const{min:e=0,max:s=1}=t;if(!Number.isFinite(e))throw new TypeError("min must be a number");if(!Number.isFinite(s))throw new TypeError("max must be a number");if(e>=s)throw new RangeError("min must be smaller than max");let r=new k(this.rows,this.columns);for(let n=0;n<this.columns;n++){const o=this.getColumn(n);o.length&&De(o,{min:e,max:s,output:o}),r.setColumn(n,o)}return r}flipRows(){const t=Math.ceil(this.columns/2);for(let e=0;e<this.rows;e++)for(let s=0;s<t;s++){let r=this.get(e,s),n=this.get(e,this.columns-1-s);this.set(e,s,n),this.set(e,this.columns-1-s,r)}return this}flipColumns(){const t=Math.ceil(this.rows/2);for(let e=0;e<this.columns;e++)for(let s=0;s<t;s++){let r=this.get(s,e),n=this.get(this.rows-1-s,e);this.set(s,e,n),this.set(this.rows-1-s,e,r)}return this}kroneckerProduct(t){t=k.checkMatrix(t);let e=this.rows,s=this.columns,r=t.rows,n=t.columns,o=new k(e*r,s*n);for(let h=0;h<e;h++)for(let a=0;a<s;a++)for(let u=0;u<r;u++)for(let c=0;c<n;c++)o.set(r*h+u,n*a+c,this.get(h,a)*t.get(u,c));return o}kroneckerSum(t){if(t=k.checkMatrix(t),!this.isSquare()||!t.isSquare())throw new Error("Kronecker Sum needs two Square Matrices");let e=this.rows,s=t.rows,r=this.kroneckerProduct(k.eye(s,s)),n=k.eye(e,e).kroneckerProduct(t);return r.add(n)}transpose(){let t=new k(this.columns,this.rows);for(let e=0;e<this.rows;e++)for(let s=0;s<this.columns;s++)t.set(s,e,this.get(e,s));return t}sortRows(t=Fe){for(let e=0;e<this.rows;e++)this.setRow(e,this.getRow(e).sort(t));return this}sortColumns(t=Fe){for(let e=0;e<this.columns;e++)this.setColumn(e,this.getColumn(e).sort(t));return this}subMatrix(t,e,s,r){de(this,t,e,s,r);let n=new k(e-t+1,r-s+1);for(let o=t;o<=e;o++)for(let h=s;h<=r;h++)n.set(o-t,h-s,this.get(o,h));return n}subMatrixRow(t,e,s){if(e===void 0&&(e=0),s===void 0&&(s=this.columns-1),e>s||e<0||e>=this.columns||s<0||s>=this.columns)throw new RangeError("Argument out of range");let r=new k(t.length,s-e+1);for(let n=0;n<t.length;n++)for(let o=e;o<=s;o++){if(t[n]<0||t[n]>=this.rows)throw new RangeError(`Row index out of range: ${t[n]}`);r.set(n,o-e,this.get(t[n],o))}return r}subMatrixColumn(t,e,s){if(e===void 0&&(e=0),s===void 0&&(s=this.rows-1),e>s||e<0||e>=this.rows||s<0||s>=this.rows)throw new RangeError("Argument out of range");let r=new k(s-e+1,t.length);for(let n=0;n<t.length;n++)for(let o=e;o<=s;o++){if(t[n]<0||t[n]>=this.columns)throw new RangeError(`Column index out of range: ${t[n]}`);r.set(o-e,n,this.get(o,t[n]))}return r}setSubMatrix(t,e,s){if(t=k.checkMatrix(t),t.isEmpty())return this;let r=e+t.rows-1,n=s+t.columns-1;de(this,e,r,s,n);for(let o=0;o<t.rows;o++)for(let h=0;h<t.columns;h++)this.set(e+o,s+h,t.get(o,h));return this}selection(t,e){pe(this,t),we(this,e);let s=new k(t.length,e.length);for(let r=0;r<t.length;r++){let n=t[r];for(let o=0;o<e.length;o++){let h=e[o];s.set(r,o,this.get(n,h))}}return s}trace(){let t=Math.min(this.rows,this.columns),e=0;for(let s=0;s<t;s++)e+=this.get(s,s);return e}clone(){return this.constructor.copy(this,new k(this.rows,this.columns))}static copy(t,e){for(const[s,r,n]of t.entries())e.set(s,r,n);return e}sum(t){switch(t){case"row":return Zs(this);case"column":return $s(this);case void 0:return Hs(this);default:throw new Error(`invalid option: ${t}`)}}product(t){switch(t){case"row":return ti(this);case"column":return ei(this);case void 0:return si(this);default:throw new Error(`invalid option: ${t}`)}}mean(t){const e=this.sum(t);switch(t){case"row":{for(let s=0;s<this.rows;s++)e[s]/=this.columns;return e}case"column":{for(let s=0;s<this.columns;s++)e[s]/=this.rows;return e}case void 0:return e/this.size;default:throw new Error(`invalid option: ${t}`)}}variance(t,e={}){if(typeof t=="object"&&(e=t,t=void 0),typeof e!="object")throw new TypeError("options must be an object");const{unbiased:s=!0,mean:r=this.mean(t)}=e;if(typeof s!="boolean")throw new TypeError("unbiased must be a boolean");switch(t){case"row":{if(!rt.isAnyArray(r))throw new TypeError("mean must be an array");return ii(this,s,r)}case"column":{if(!rt.isAnyArray(r))throw new TypeError("mean must be an array");return ri(this,s,r)}case void 0:{if(typeof r!="number")throw new TypeError("mean must be a number");return ni(this,s,r)}default:throw new Error(`invalid option: ${t}`)}}standardDeviation(t,e){typeof t=="object"&&(e=t,t=void 0);const s=this.variance(t,e);if(t===void 0)return Math.sqrt(s);for(let r=0;r<s.length;r++)s[r]=Math.sqrt(s[r]);return s}center(t,e={}){if(typeof t=="object"&&(e=t,t=void 0),typeof e!="object")throw new TypeError("options must be an object");const{center:s=this.mean(t)}=e;switch(t){case"row":{if(!rt.isAnyArray(s))throw new TypeError("center must be an array");return oi(this,s),this}case"column":{if(!rt.isAnyArray(s))throw new TypeError("center must be an array");return hi(this,s),this}case void 0:{if(typeof s!="number")throw new TypeError("center must be a number");return li(this,s),this}default:throw new Error(`invalid option: ${t}`)}}scale(t,e={}){if(typeof t=="object"&&(e=t,t=void 0),typeof e!="object")throw new TypeError("options must be an object");let s=e.scale;switch(t){case"row":{if(s===void 0)s=ai(this);else if(!rt.isAnyArray(s))throw new TypeError("scale must be an array");return ui(this,s),this}case"column":{if(s===void 0)s=fi(this);else if(!rt.isAnyArray(s))throw new TypeError("scale must be an array");return ci(this,s),this}case void 0:{if(s===void 0)s=di(this);else if(typeof s!="number")throw new TypeError("scale must be a number");return gi(this,s),this}default:throw new Error(`invalid option: ${t}`)}}toString(t){return as(this,t)}[Symbol.iterator](){return this.entries()}*entries(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)yield[t,e,this.get(t,e)]}*values(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)yield this.get(t,e)}}B.prototype.klass="Matrix";typeof Symbol<"u"&&(B.prototype[Symbol.for("nodejs.util.inspect.custom")]=Ws);function Fe(l,t){return l-t}function mi(l){return l.every(t=>typeof t=="number")}B.random=B.rand;B.randomInt=B.randInt;B.diagonal=B.diag;B.prototype.diagonal=B.prototype.diag;B.identity=B.eye;B.prototype.negate=B.prototype.neg;B.prototype.tensorProduct=B.prototype.kroneckerProduct;var Yt,ge,Nt;let k=(Nt=class extends B{constructor(e,s){super();he(this,Yt);Ee(this,"data");if(Nt.isMatrix(e))le(this,Yt,ge).call(this,e.rows,e.columns),Nt.copy(e,this);else if(Number.isInteger(e)&&e>=0)le(this,Yt,ge).call(this,e,s);else if(rt.isAnyArray(e)){const r=e;if(e=r.length,s=e?r[0].length:0,typeof s!="number")throw new TypeError("Data must be a 2D array with at least one element");this.data=[];for(let n=0;n<e;n++){if(r[n].length!==s)throw new RangeError("Inconsistent array dimensions");if(!mi(r[n]))throw new TypeError("Input data contains non-numeric values");this.data.push(Float64Array.from(r[n]))}this.rows=e,this.columns=s}else throw new TypeError("First argument must be a positive number or an array")}set(e,s,r){return this.data[e][s]=r,this}get(e,s){return this.data[e][s]}removeRow(e){return ht(this,e),this.data.splice(e,1),this.rows-=1,this}addRow(e,s){return s===void 0&&(s=e,e=this.rows),ht(this,e,!0),s=Float64Array.from(Ct(this,s)),this.data.splice(e,0,s),this.rows+=1,this}removeColumn(e){lt(this,e);for(let s=0;s<this.rows;s++){const r=new Float64Array(this.columns-1);for(let n=0;n<e;n++)r[n]=this.data[s][n];for(let n=e+1;n<this.columns;n++)r[n-1]=this.data[s][n];this.data[s]=r}return this.columns-=1,this}addColumn(e,s){typeof s>"u"&&(s=e,e=this.columns),lt(this,e,!0),s=It(this,s);for(let r=0;r<this.rows;r++){const n=new Float64Array(this.columns+1);let o=0;for(;o<e;o++)n[o]=this.data[r][o];for(n[o++]=s[r];o<this.columns+1;o++)n[o]=this.data[r][o-1];this.data[r]=n}return this.columns+=1,this}},Yt=new WeakSet,ge=function(e,s){if(this.data=[],Number.isInteger(s)&&s>=0)for(let r=0;r<e;r++)this.data.push(new Float64Array(s));else throw new TypeError("nColumns must be a positive integer");this.rows=e,this.columns=s},Nt);Ks(B,k);var tt;const te=class te extends B{constructor(e){super();he(this,tt,void 0);if(k.isMatrix(e)){if(!e.isSymmetric())throw new TypeError("not symmetric data");Vt(this,tt,k.copy(e,new k(e.rows,e.rows)))}else if(Number.isInteger(e)&&e>=0)Vt(this,tt,new k(e,e));else if(Vt(this,tt,new k(e)),!this.isSymmetric())throw new TypeError("not symmetric data")}get size(){return ct(this,tt).size}get rows(){return ct(this,tt).rows}get columns(){return ct(this,tt).columns}get diagonalSize(){return this.rows}static isSymmetricMatrix(e){return k.isMatrix(e)&&e.klassType==="SymmetricMatrix"}static zeros(e){return new this(e)}static ones(e){return new this(e).fill(1)}clone(){const e=new te(this.diagonalSize);for(const[s,r,n]of this.upperRightEntries())e.set(s,r,n);return e}toMatrix(){return new k(this)}get(e,s){return ct(this,tt).get(e,s)}set(e,s,r){return ct(this,tt).set(e,s,r),ct(this,tt).set(s,e,r),this}removeCross(e){return ct(this,tt).removeRow(e),ct(this,tt).removeColumn(e),this}addCross(e,s){s===void 0&&(s=e,e=this.diagonalSize);const r=s.slice();return r.splice(e,1),ct(this,tt).addRow(e,r),ct(this,tt).addColumn(e,s),this}applyMask(e){if(e.length!==this.diagonalSize)throw new RangeError("Mask size do not match with matrix size");const s=[];for(const[r,n]of e.entries())n||s.push(r);s.reverse();for(const r of s)this.removeCross(r);return this}toCompact(){const{diagonalSize:e}=this,s=new Array(e*(e+1)/2);for(let r=0,n=0,o=0;o<s.length;o++)s[o]=this.get(n,r),++r>=e&&(r=++n);return s}static fromCompact(e){const s=e.length,r=(Math.sqrt(8*s+1)-1)/2;if(!Number.isInteger(r))throw new TypeError(`This array is not a compact representation of a Symmetric Matrix, ${JSON.stringify(e)}`);const n=new te(r);for(let o=0,h=0,a=0;a<s;a++)n.set(o,h,e[a]),++o>=r&&(o=++h);return n}*upperRightEntries(){for(let e=0,s=0;e<this.diagonalSize;void 0){const r=this.get(e,s);yield[e,s,r],++s>=this.diagonalSize&&(s=++e)}}*upperRightValues(){for(let e=0,s=0;e<this.diagonalSize;void 0)yield this.get(e,s),++s>=this.diagonalSize&&(s=++e)}};tt=new WeakMap;let Mt=te;Mt.prototype.klassType="SymmetricMatrix";class se extends Mt{static isDistanceMatrix(t){return Mt.isSymmetricMatrix(t)&&t.klassSubType==="DistanceMatrix"}constructor(t){if(super(t),!this.isDistance())throw new TypeError("Provided arguments do no produce a distance matrix")}set(t,e,s){return t===e&&(s=0),super.set(t,e,s)}addCross(t,e){return e===void 0&&(e=t,t=this.diagonalSize),e=e.slice(),e[t]=0,super.addCross(t,e)}toSymmetricMatrix(){return new Mt(this)}clone(){const t=new se(this.diagonalSize);for(const[e,s,r]of this.upperRightEntries())e!==s&&t.set(e,s,r);return t}toCompact(){const{diagonalSize:t}=this,e=(t-1)*t/2,s=new Array(e);for(let r=1,n=0,o=0;o<s.length;o++)s[o]=this.get(n,r),++r>=t&&(r=++n+1);return s}static fromCompact(t){const e=t.length,s=(Math.sqrt(8*e+1)+1)/2;if(!Number.isInteger(s))throw new TypeError(`This array is not a compact representation of a DistanceMatrix, ${JSON.stringify(t)}`);const r=new this(s);for(let n=1,o=0,h=0;h<e;h++)r.set(n,o,t[h]),++n>=s&&(n=++o+1);return r}}se.prototype.klassSubType="DistanceMatrix";class _t extends B{constructor(t,e,s){super(),this.matrix=t,this.rows=e,this.columns=s}}class pi extends _t{constructor(t,e){lt(t,e),super(t,t.rows,1),this.column=e}set(t,e,s){return this.matrix.set(t,this.column,s),this}get(t){return this.matrix.get(t,this.column)}}class wi extends _t{constructor(t,e){we(t,e),super(t,t.rows,e.length),this.columnIndices=e}set(t,e,s){return this.matrix.set(t,this.columnIndices[e],s),this}get(t,e){return this.matrix.get(t,this.columnIndices[e])}}class _i extends _t{constructor(t){super(t,t.rows,t.columns)}set(t,e,s){return this.matrix.set(t,this.columns-e-1,s),this}get(t,e){return this.matrix.get(t,this.columns-e-1)}}class yi extends _t{constructor(t){super(t,t.rows,t.columns)}set(t,e,s){return this.matrix.set(this.rows-t-1,e,s),this}get(t,e){return this.matrix.get(this.rows-t-1,e)}}class bi extends _t{constructor(t,e){ht(t,e),super(t,1,t.columns),this.row=e}set(t,e,s){return this.matrix.set(this.row,e,s),this}get(t,e){return this.matrix.get(this.row,e)}}class vi extends _t{constructor(t,e){pe(t,e),super(t,e.length,t.columns),this.rowIndices=e}set(t,e,s){return this.matrix.set(this.rowIndices[t],e,s),this}get(t,e){return this.matrix.get(this.rowIndices[t],e)}}class Kt extends _t{constructor(t,e,s){pe(t,e),we(t,s),super(t,e.length,s.length),this.rowIndices=e,this.columnIndices=s}set(t,e,s){return this.matrix.set(this.rowIndices[t],this.columnIndices[e],s),this}get(t,e){return this.matrix.get(this.rowIndices[t],this.columnIndices[e])}}class Si extends _t{constructor(t,e,s,r,n){de(t,e,s,r,n),super(t,s-e+1,n-r+1),this.startRow=e,this.startColumn=r}set(t,e,s){return this.matrix.set(this.startRow+t,this.startColumn+e,s),this}get(t,e){return this.matrix.get(this.startRow+t,this.startColumn+e)}}class Ei extends _t{constructor(t){super(t,t.columns,t.rows)}set(t,e,s){return this.matrix.set(e,t,s),this}get(t,e){return this.matrix.get(e,t)}}class us extends B{constructor(t,e={}){const{rows:s=1}=e;if(t.length%s!==0)throw new Error("the data length is not divisible by the number of rows");super(),this.rows=s,this.columns=t.length/s,this.data=t}set(t,e,s){let r=this._calculateIndex(t,e);return this.data[r]=s,this}get(t,e){let s=this._calculateIndex(t,e);return this.data[s]}_calculateIndex(t,e){return t*this.columns+e}}class ot extends B{constructor(t){super(),this.data=t,this.rows=t.length,this.columns=t[0].length}set(t,e,s){return this.data[t][e]=s,this}get(t,e){return this.data[t][e]}}function Mi(l,t){if(rt.isAnyArray(l))return l[0]&&rt.isAnyArray(l[0])?new ot(l):new us(l,t);throw new Error("the argument is not an array")}class ie{constructor(t){t=ot.checkMatrix(t);let e=t.clone(),s=e.rows,r=e.columns,n=new Float64Array(s),o=1,h,a,u,c,f,g,w,m,p;for(h=0;h<s;h++)n[h]=h;for(m=new Float64Array(s),a=0;a<r;a++){for(h=0;h<s;h++)m[h]=e.get(h,a);for(h=0;h<s;h++){for(p=Math.min(h,a),f=0,u=0;u<p;u++)f+=e.get(h,u)*m[u];m[h]-=f,e.set(h,a,m[h])}for(c=a,h=a+1;h<s;h++)Math.abs(m[h])>Math.abs(m[c])&&(c=h);if(c!==a){for(u=0;u<r;u++)g=e.get(c,u),e.set(c,u,e.get(a,u)),e.set(a,u,g);w=n[c],n[c]=n[a],n[a]=w,o=-o}if(a<s&&e.get(a,a)!==0)for(h=a+1;h<s;h++)e.set(h,a,e.get(h,a)/e.get(a,a))}this.LU=e,this.pivotVector=n,this.pivotSign=o}isSingular(){let t=this.LU,e=t.columns;for(let s=0;s<e;s++)if(t.get(s,s)===0)return!0;return!1}solve(t){t=k.checkMatrix(t);let e=this.LU;if(e.rows!==t.rows)throw new Error("Invalid matrix dimensions");if(this.isSingular())throw new Error("LU matrix is singular");let r=t.columns,n=t.subMatrixRow(this.pivotVector,0,r-1),o=e.columns,h,a,u;for(u=0;u<o;u++)for(h=u+1;h<o;h++)for(a=0;a<r;a++)n.set(h,a,n.get(h,a)-n.get(u,a)*e.get(h,u));for(u=o-1;u>=0;u--){for(a=0;a<r;a++)n.set(u,a,n.get(u,a)/e.get(u,u));for(h=0;h<u;h++)for(a=0;a<r;a++)n.set(h,a,n.get(h,a)-n.get(u,a)*e.get(h,u))}return n}get determinant(){let t=this.LU;if(!t.isSquare())throw new Error("Matrix must be square");let e=this.pivotSign,s=t.columns;for(let r=0;r<s;r++)e*=t.get(r,r);return e}get lowerTriangularMatrix(){let t=this.LU,e=t.rows,s=t.columns,r=new k(e,s);for(let n=0;n<e;n++)for(let o=0;o<s;o++)n>o?r.set(n,o,t.get(n,o)):n===o?r.set(n,o,1):r.set(n,o,0);return r}get upperTriangularMatrix(){let t=this.LU,e=t.rows,s=t.columns,r=new k(e,s);for(let n=0;n<e;n++)for(let o=0;o<s;o++)n<=o?r.set(n,o,t.get(n,o)):r.set(n,o,0);return r}get pivotPermutationVector(){return Array.from(this.pivotVector)}}function wt(l,t){let e=0;return Math.abs(l)>Math.abs(t)?(e=t/l,Math.abs(l)*Math.sqrt(1+e*e)):t!==0?(e=l/t,Math.abs(t)*Math.sqrt(1+e*e)):0}class _e{constructor(t){t=ot.checkMatrix(t);let e=t.clone(),s=t.rows,r=t.columns,n=new Float64Array(r),o,h,a,u;for(a=0;a<r;a++){let c=0;for(o=a;o<s;o++)c=wt(c,e.get(o,a));if(c!==0){for(e.get(a,a)<0&&(c=-c),o=a;o<s;o++)e.set(o,a,e.get(o,a)/c);for(e.set(a,a,e.get(a,a)+1),h=a+1;h<r;h++){for(u=0,o=a;o<s;o++)u+=e.get(o,a)*e.get(o,h);for(u=-u/e.get(a,a),o=a;o<s;o++)e.set(o,h,e.get(o,h)+u*e.get(o,a))}}n[a]=-c}this.QR=e,this.Rdiag=n}solve(t){t=k.checkMatrix(t);let e=this.QR,s=e.rows;if(t.rows!==s)throw new Error("Matrix row dimensions must agree");if(!this.isFullRank())throw new Error("Matrix is rank deficient");let r=t.columns,n=t.clone(),o=e.columns,h,a,u,c;for(u=0;u<o;u++)for(a=0;a<r;a++){for(c=0,h=u;h<s;h++)c+=e.get(h,u)*n.get(h,a);for(c=-c/e.get(u,u),h=u;h<s;h++)n.set(h,a,n.get(h,a)+c*e.get(h,u))}for(u=o-1;u>=0;u--){for(a=0;a<r;a++)n.set(u,a,n.get(u,a)/this.Rdiag[u]);for(h=0;h<u;h++)for(a=0;a<r;a++)n.set(h,a,n.get(h,a)-n.get(u,a)*e.get(h,u))}return n.subMatrix(0,o-1,0,r-1)}isFullRank(){let t=this.QR.columns;for(let e=0;e<t;e++)if(this.Rdiag[e]===0)return!1;return!0}get upperTriangularMatrix(){let t=this.QR,e=t.columns,s=new k(e,e),r,n;for(r=0;r<e;r++)for(n=0;n<e;n++)r<n?s.set(r,n,t.get(r,n)):r===n?s.set(r,n,this.Rdiag[r]):s.set(r,n,0);return s}get orthogonalMatrix(){let t=this.QR,e=t.rows,s=t.columns,r=new k(e,s),n,o,h,a;for(h=s-1;h>=0;h--){for(n=0;n<e;n++)r.set(n,h,0);for(r.set(h,h,1),o=h;o<s;o++)if(t.get(h,h)!==0){for(a=0,n=h;n<e;n++)a+=t.get(n,h)*r.get(n,o);for(a=-a/t.get(h,h),n=h;n<e;n++)r.set(n,o,r.get(n,o)+a*t.get(n,h))}}return r}}class Bt{constructor(t,e={}){if(t=ot.checkMatrix(t),t.isEmpty())throw new Error("Matrix must be non-empty");let s=t.rows,r=t.columns;const{computeLeftSingularVectors:n=!0,computeRightSingularVectors:o=!0,autoTranspose:h=!1}=e;let a=!!n,u=!!o,c=!1,f;if(s<r)if(!h)f=t.clone(),console.warn("Computing SVD on a matrix with more columns than rows. Consider enabling autoTranspose");else{f=t.transpose(),s=f.rows,r=f.columns,c=!0;let _=a;a=u,u=_}else f=t.clone();let g=Math.min(s,r),w=Math.min(s+1,r),m=new Float64Array(w),p=new k(s,g),b=new k(r,r),d=new Float64Array(r),v=new Float64Array(s),M=new Float64Array(w);for(let _=0;_<w;_++)M[_]=_;let C=Math.min(s-1,r),P=Math.max(0,Math.min(r-2,s)),R=Math.max(C,P);for(let _=0;_<R;_++){if(_<C){m[_]=0;for(let y=_;y<s;y++)m[_]=wt(m[_],f.get(y,_));if(m[_]!==0){f.get(_,_)<0&&(m[_]=-m[_]);for(let y=_;y<s;y++)f.set(y,_,f.get(y,_)/m[_]);f.set(_,_,f.get(_,_)+1)}m[_]=-m[_]}for(let y=_+1;y<r;y++){if(_<C&&m[_]!==0){let T=0;for(let S=_;S<s;S++)T+=f.get(S,_)*f.get(S,y);T=-T/f.get(_,_);for(let S=_;S<s;S++)f.set(S,y,f.get(S,y)+T*f.get(S,_))}d[y]=f.get(_,y)}if(a&&_<C)for(let y=_;y<s;y++)p.set(y,_,f.get(y,_));if(_<P){d[_]=0;for(let y=_+1;y<r;y++)d[_]=wt(d[_],d[y]);if(d[_]!==0){d[_+1]<0&&(d[_]=0-d[_]);for(let y=_+1;y<r;y++)d[y]/=d[_];d[_+1]+=1}if(d[_]=-d[_],_+1<s&&d[_]!==0){for(let y=_+1;y<s;y++)v[y]=0;for(let y=_+1;y<s;y++)for(let T=_+1;T<r;T++)v[y]+=d[T]*f.get(y,T);for(let y=_+1;y<r;y++){let T=-d[y]/d[_+1];for(let S=_+1;S<s;S++)f.set(S,y,f.get(S,y)+T*v[S])}}if(u)for(let y=_+1;y<r;y++)b.set(y,_,d[y])}}let E=Math.min(r,s+1);if(C<r&&(m[C]=f.get(C,C)),s<E&&(m[E-1]=0),P+1<E&&(d[P]=f.get(P,E-1)),d[E-1]=0,a){for(let _=C;_<g;_++){for(let y=0;y<s;y++)p.set(y,_,0);p.set(_,_,1)}for(let _=C-1;_>=0;_--)if(m[_]!==0){for(let y=_+1;y<g;y++){let T=0;for(let S=_;S<s;S++)T+=p.get(S,_)*p.get(S,y);T=-T/p.get(_,_);for(let S=_;S<s;S++)p.set(S,y,p.get(S,y)+T*p.get(S,_))}for(let y=_;y<s;y++)p.set(y,_,-p.get(y,_));p.set(_,_,1+p.get(_,_));for(let y=0;y<_-1;y++)p.set(y,_,0)}else{for(let y=0;y<s;y++)p.set(y,_,0);p.set(_,_,1)}}if(u)for(let _=r-1;_>=0;_--){if(_<P&&d[_]!==0)for(let y=_+1;y<r;y++){let T=0;for(let S=_+1;S<r;S++)T+=b.get(S,_)*b.get(S,y);T=-T/b.get(_+1,_);for(let S=_+1;S<r;S++)b.set(S,y,b.get(S,y)+T*b.get(S,_))}for(let y=0;y<r;y++)b.set(y,_,0);b.set(_,_,1)}let x=E-1,D=Number.EPSILON;for(;E>0;){let _,y;for(_=E-2;_>=-1&&_!==-1;_--){const T=Number.MIN_VALUE+D*Math.abs(m[_]+Math.abs(m[_+1]));if(Math.abs(d[_])<=T||Number.isNaN(d[_])){d[_]=0;break}}if(_===E-2)y=4;else{let T;for(T=E-1;T>=_&&T!==_;T--){let S=(T!==E?Math.abs(d[T]):0)+(T!==_+1?Math.abs(d[T-1]):0);if(Math.abs(m[T])<=D*S){m[T]=0;break}}T===_?y=3:T===E-1?y=1:(y=2,_=T)}switch(_++,y){case 1:{let T=d[E-2];d[E-2]=0;for(let S=E-2;S>=_;S--){let N=wt(m[S],T),O=m[S]/N,j=T/N;if(m[S]=N,S!==_&&(T=-j*d[S-1],d[S-1]=O*d[S-1]),u)for(let I=0;I<r;I++)N=O*b.get(I,S)+j*b.get(I,E-1),b.set(I,E-1,-j*b.get(I,S)+O*b.get(I,E-1)),b.set(I,S,N)}break}case 2:{let T=d[_-1];d[_-1]=0;for(let S=_;S<E;S++){let N=wt(m[S],T),O=m[S]/N,j=T/N;if(m[S]=N,T=-j*d[S],d[S]=O*d[S],a)for(let I=0;I<s;I++)N=O*p.get(I,S)+j*p.get(I,_-1),p.set(I,_-1,-j*p.get(I,S)+O*p.get(I,_-1)),p.set(I,S,N)}break}case 3:{const T=Math.max(Math.abs(m[E-1]),Math.abs(m[E-2]),Math.abs(d[E-2]),Math.abs(m[_]),Math.abs(d[_])),S=m[E-1]/T,N=m[E-2]/T,O=d[E-2]/T,j=m[_]/T,I=d[_]/T,U=((N+S)*(N-S)+O*O)/2,$=S*O*(S*O);let q=0;(U!==0||$!==0)&&(U<0?q=0-Math.sqrt(U*U+$):q=Math.sqrt(U*U+$),q=$/(U+q));let it=(j+S)*(j-S)+q,Y=j*I;for(let F=_;F<E-1;F++){let Q=wt(it,Y);Q===0&&(Q=Number.MIN_VALUE);let et=it/Q,nt=Y/Q;if(F!==_&&(d[F-1]=Q),it=et*m[F]+nt*d[F],d[F]=et*d[F]-nt*m[F],Y=nt*m[F+1],m[F+1]=et*m[F+1],u)for(let J=0;J<r;J++)Q=et*b.get(J,F)+nt*b.get(J,F+1),b.set(J,F+1,-nt*b.get(J,F)+et*b.get(J,F+1)),b.set(J,F,Q);if(Q=wt(it,Y),Q===0&&(Q=Number.MIN_VALUE),et=it/Q,nt=Y/Q,m[F]=Q,it=et*d[F]+nt*m[F+1],m[F+1]=-nt*d[F]+et*m[F+1],Y=nt*d[F+1],d[F+1]=et*d[F+1],a&&F<s-1)for(let J=0;J<s;J++)Q=et*p.get(J,F)+nt*p.get(J,F+1),p.set(J,F+1,-nt*p.get(J,F)+et*p.get(J,F+1)),p.set(J,F,Q)}d[E-2]=it;break}case 4:{if(m[_]<=0&&(m[_]=m[_]<0?-m[_]:0,u))for(let T=0;T<=x;T++)b.set(T,_,-b.get(T,_));for(;_<x&&!(m[_]>=m[_+1]);){let T=m[_];if(m[_]=m[_+1],m[_+1]=T,u&&_<r-1)for(let S=0;S<r;S++)T=b.get(S,_+1),b.set(S,_+1,b.get(S,_)),b.set(S,_,T);if(a&&_<s-1)for(let S=0;S<s;S++)T=p.get(S,_+1),p.set(S,_+1,p.get(S,_)),p.set(S,_,T);_++}E--;break}}}if(c){let _=b;b=p,p=_}this.m=s,this.n=r,this.s=m,this.U=p,this.V=b}solve(t){let e=t,s=this.threshold,r=this.s.length,n=k.zeros(r,r);for(let g=0;g<r;g++)Math.abs(this.s[g])<=s?n.set(g,g,0):n.set(g,g,1/this.s[g]);let o=this.U,h=this.rightSingularVectors,a=h.mmul(n),u=h.rows,c=o.rows,f=k.zeros(u,c);for(let g=0;g<u;g++)for(let w=0;w<c;w++){let m=0;for(let p=0;p<r;p++)m+=a.get(g,p)*o.get(w,p);f.set(g,w,m)}return f.mmul(e)}solveForDiagonal(t){return this.solve(k.diag(t))}inverse(){let t=this.V,e=this.threshold,s=t.rows,r=t.columns,n=new k(s,this.s.length);for(let c=0;c<s;c++)for(let f=0;f<r;f++)Math.abs(this.s[f])>e&&n.set(c,f,t.get(c,f)/this.s[f]);let o=this.U,h=o.rows,a=o.columns,u=new k(s,h);for(let c=0;c<s;c++)for(let f=0;f<h;f++){let g=0;for(let w=0;w<a;w++)g+=n.get(c,w)*o.get(f,w);u.set(c,f,g)}return u}get condition(){return this.s[0]/this.s[Math.min(this.m,this.n)-1]}get norm2(){return this.s[0]}get rank(){let t=Math.max(this.m,this.n)*this.s[0]*Number.EPSILON,e=0,s=this.s;for(let r=0,n=s.length;r<n;r++)s[r]>t&&e++;return e}get diagonal(){return Array.from(this.s)}get threshold(){return Number.EPSILON/2*Math.max(this.m,this.n)*this.s[0]}get leftSingularVectors(){return this.U}get rightSingularVectors(){return this.V}get diagonalMatrix(){return k.diag(this.s)}}function Ti(l,t=!1){return l=ot.checkMatrix(l),t?new Bt(l).inverse():fs(l,k.eye(l.rows))}function fs(l,t,e=!1){return l=ot.checkMatrix(l),t=ot.checkMatrix(t),e?new Bt(l).solve(t):l.isSquare()?new ie(l).solve(t):new _e(l).solve(t)}function Zt(l){if(l=k.checkMatrix(l),l.isSquare()){if(l.columns===0)return 1;let t,e,s,r;if(l.columns===2)return t=l.get(0,0),e=l.get(0,1),s=l.get(1,0),r=l.get(1,1),t*r-e*s;if(l.columns===3){let n,o,h;return n=new Kt(l,[1,2],[1,2]),o=new Kt(l,[1,2],[0,2]),h=new Kt(l,[1,2],[0,1]),t=l.get(0,0),e=l.get(0,1),s=l.get(0,2),t*Zt(n)-e*Zt(o)+s*Zt(h)}else return new ie(l).determinant}else throw Error("determinant can only be calculated for a square matrix")}function ki(l,t){let e=[];for(let s=0;s<l;s++)s!==t&&e.push(s);return e}function xi(l,t,e,s=1e-9,r=1e-9){if(l>r)return new Array(t.rows+1).fill(0);{let n=t.addRow(e,[0]);for(let o=0;o<n.rows;o++)Math.abs(n.get(o,0))<s&&n.set(o,0,0);return n.to1DArray()}}function Ci(l,t={}){const{thresholdValue:e=1e-9,thresholdError:s=1e-9}=t;l=k.checkMatrix(l);let r=l.rows,n=new k(r,r);for(let o=0;o<r;o++){let h=k.columnVector(l.getRow(o)),a=l.subMatrixRow(ki(r,o)).transpose(),c=new Bt(a).solve(h),f=k.sub(h,a.mmul(c)).abs().max();n.setRow(o,xi(f,c,o,e,s))}return n}function Ii(l,t=Number.EPSILON){if(l=k.checkMatrix(l),l.isEmpty())return l.transpose();let e=new Bt(l,{autoTranspose:!0}),s=e.leftSingularVectors,r=e.rightSingularVectors,n=e.diagonal;for(let o=0;o<n.length;o++)Math.abs(n[o])>t?n[o]=1/n[o]:n[o]=0;return r.mmul(k.diag(n).mmul(s.transpose()))}function Ri(l,t=l,e={}){l=new k(l);let s=!1;if(typeof t=="object"&&!k.isMatrix(t)&&!rt.isAnyArray(t)?(e=t,t=l,s=!0):t=new k(t),l.rows!==t.rows)throw new TypeError("Both matrices must have the same number of rows");const{center:r=!0}=e;r&&(l=l.center("column"),s||(t=t.center("column")));const n=l.transpose().mmul(t);for(let o=0;o<n.rows;o++)for(let h=0;h<n.columns;h++)n.set(o,h,n.get(o,h)*(1/(l.rows-1)));return n}function Di(l,t=l,e={}){l=new k(l);let s=!1;if(typeof t=="object"&&!k.isMatrix(t)&&!rt.isAnyArray(t)?(e=t,t=l,s=!0):t=new k(t),l.rows!==t.rows)throw new TypeError("Both matrices must have the same number of rows");const{center:r=!0,scale:n=!0}=e;r&&(l.center("column"),s||t.center("column")),n&&(l.scale("column"),s||t.scale("column"));const o=l.standardDeviation("column",{unbiased:!0}),h=s?o:t.standardDeviation("column",{unbiased:!0}),a=l.transpose().mmul(t);for(let u=0;u<a.rows;u++)for(let c=0;c<a.columns;c++)a.set(u,c,a.get(u,c)*(1/(o[u]*h[c]))*(1/(l.rows-1)));return a}class cs{constructor(t,e={}){const{assumeSymmetric:s=!1}=e;if(t=ot.checkMatrix(t),!t.isSquare())throw new Error("Matrix is not a square matrix");if(t.isEmpty())throw new Error("Matrix must be non-empty");let r=t.columns,n=new k(r,r),o=new Float64Array(r),h=new Float64Array(r),a=t,u,c,f=!1;if(s?f=!0:f=t.isSymmetric(),f){for(u=0;u<r;u++)for(c=0;c<r;c++)n.set(u,c,a.get(u,c));Pi(r,h,o,n),Fi(r,h,o,n)}else{let g=new k(r,r),w=new Float64Array(r);for(c=0;c<r;c++)for(u=0;u<r;u++)g.set(u,c,a.get(u,c));Li(r,g,w,n),ji(r,h,o,n,g)}this.n=r,this.e=h,this.d=o,this.V=n}get realEigenvalues(){return Array.from(this.d)}get imaginaryEigenvalues(){return Array.from(this.e)}get eigenvectorMatrix(){return this.V}get diagonalMatrix(){let t=this.n,e=this.e,s=this.d,r=new k(t,t),n,o;for(n=0;n<t;n++){for(o=0;o<t;o++)r.set(n,o,0);r.set(n,n,s[n]),e[n]>0?r.set(n,n+1,e[n]):e[n]<0&&r.set(n,n-1,e[n])}return r}}function Pi(l,t,e,s){let r,n,o,h,a,u,c,f;for(a=0;a<l;a++)e[a]=s.get(l-1,a);for(h=l-1;h>0;h--){for(f=0,o=0,u=0;u<h;u++)f=f+Math.abs(e[u]);if(f===0)for(t[h]=e[h-1],a=0;a<h;a++)e[a]=s.get(h-1,a),s.set(h,a,0),s.set(a,h,0);else{for(u=0;u<h;u++)e[u]/=f,o+=e[u]*e[u];for(r=e[h-1],n=Math.sqrt(o),r>0&&(n=-n),t[h]=f*n,o=o-r*n,e[h-1]=r-n,a=0;a<h;a++)t[a]=0;for(a=0;a<h;a++){for(r=e[a],s.set(a,h,r),n=t[a]+s.get(a,a)*r,u=a+1;u<=h-1;u++)n+=s.get(u,a)*e[u],t[u]+=s.get(u,a)*r;t[a]=n}for(r=0,a=0;a<h;a++)t[a]/=o,r+=t[a]*e[a];for(c=r/(o+o),a=0;a<h;a++)t[a]-=c*e[a];for(a=0;a<h;a++){for(r=e[a],n=t[a],u=a;u<=h-1;u++)s.set(u,a,s.get(u,a)-(r*t[u]+n*e[u]));e[a]=s.get(h-1,a),s.set(h,a,0)}}e[h]=o}for(h=0;h<l-1;h++){if(s.set(l-1,h,s.get(h,h)),s.set(h,h,1),o=e[h+1],o!==0){for(u=0;u<=h;u++)e[u]=s.get(u,h+1)/o;for(a=0;a<=h;a++){for(n=0,u=0;u<=h;u++)n+=s.get(u,h+1)*s.get(u,a);for(u=0;u<=h;u++)s.set(u,a,s.get(u,a)-n*e[u])}}for(u=0;u<=h;u++)s.set(u,h+1,0)}for(a=0;a<l;a++)e[a]=s.get(l-1,a),s.set(l-1,a,0);s.set(l-1,l-1,1),t[0]=0}function Fi(l,t,e,s){let r,n,o,h,a,u,c,f,g,w,m,p,b,d,v,M;for(o=1;o<l;o++)t[o-1]=t[o];t[l-1]=0;let C=0,P=0,R=Number.EPSILON;for(u=0;u<l;u++){for(P=Math.max(P,Math.abs(e[u])+Math.abs(t[u])),c=u;c<l&&!(Math.abs(t[c])<=R*P);)c++;if(c>u)do{for(r=e[u],f=(e[u+1]-r)/(2*t[u]),g=wt(f,1),f<0&&(g=-g),e[u]=t[u]/(f+g),e[u+1]=t[u]*(f+g),w=e[u+1],n=r-e[u],o=u+2;o<l;o++)e[o]-=n;for(C=C+n,f=e[c],m=1,p=m,b=m,d=t[u+1],v=0,M=0,o=c-1;o>=u;o--)for(b=p,p=m,M=v,r=m*t[o],n=m*f,g=wt(f,t[o]),t[o+1]=v*g,v=t[o]/g,m=f/g,f=m*e[o]-v*r,e[o+1]=n+v*(m*r+v*e[o]),a=0;a<l;a++)n=s.get(a,o+1),s.set(a,o+1,v*s.get(a,o)+m*n),s.set(a,o,m*s.get(a,o)-v*n);f=-v*M*b*d*t[u]/w,t[u]=v*f,e[u]=m*f}while(Math.abs(t[u])>R*P);e[u]=e[u]+C,t[u]=0}for(o=0;o<l-1;o++){for(a=o,f=e[o],h=o+1;h<l;h++)e[h]<f&&(a=h,f=e[h]);if(a!==o)for(e[a]=e[o],e[o]=f,h=0;h<l;h++)f=s.get(h,o),s.set(h,o,s.get(h,a)),s.set(h,a,f)}}function Li(l,t,e,s){let r=0,n=l-1,o,h,a,u,c,f,g;for(f=r+1;f<=n-1;f++){for(g=0,u=f;u<=n;u++)g=g+Math.abs(t.get(u,f-1));if(g!==0){for(a=0,u=n;u>=f;u--)e[u]=t.get(u,f-1)/g,a+=e[u]*e[u];for(h=Math.sqrt(a),e[f]>0&&(h=-h),a=a-e[f]*h,e[f]=e[f]-h,c=f;c<l;c++){for(o=0,u=n;u>=f;u--)o+=e[u]*t.get(u,c);for(o=o/a,u=f;u<=n;u++)t.set(u,c,t.get(u,c)-o*e[u])}for(u=0;u<=n;u++){for(o=0,c=n;c>=f;c--)o+=e[c]*t.get(u,c);for(o=o/a,c=f;c<=n;c++)t.set(u,c,t.get(u,c)-o*e[c])}e[f]=g*e[f],t.set(f,f-1,g*h)}}for(u=0;u<l;u++)for(c=0;c<l;c++)s.set(u,c,u===c?1:0);for(f=n-1;f>=r+1;f--)if(t.get(f,f-1)!==0){for(u=f+1;u<=n;u++)e[u]=t.get(u,f-1);for(c=f;c<=n;c++){for(h=0,u=f;u<=n;u++)h+=e[u]*s.get(u,c);for(h=h/e[f]/t.get(f,f-1),u=f;u<=n;u++)s.set(u,c,s.get(u,c)+h*e[u])}}}function ji(l,t,e,s,r){let n=l-1,o=0,h=l-1,a=Number.EPSILON,u=0,c=0,f=0,g=0,w=0,m=0,p=0,b=0,d,v,M,C,P,R,E,x,D,_,y,T,S,N,O;for(d=0;d<l;d++)for((d<o||d>h)&&(e[d]=r.get(d,d),t[d]=0),v=Math.max(d-1,0);v<l;v++)c=c+Math.abs(r.get(d,v));for(;n>=o;){for(C=n;C>o&&(m=Math.abs(r.get(C-1,C-1))+Math.abs(r.get(C,C)),m===0&&(m=c),!(Math.abs(r.get(C,C-1))<a*m));)C--;if(C===n)r.set(n,n,r.get(n,n)+u),e[n]=r.get(n,n),t[n]=0,n--,b=0;else if(C===n-1){if(E=r.get(n,n-1)*r.get(n-1,n),f=(r.get(n-1,n-1)-r.get(n,n))/2,g=f*f+E,p=Math.sqrt(Math.abs(g)),r.set(n,n,r.get(n,n)+u),r.set(n-1,n-1,r.get(n-1,n-1)+u),x=r.get(n,n),g>=0){for(p=f>=0?f+p:f-p,e[n-1]=x+p,e[n]=e[n-1],p!==0&&(e[n]=x-E/p),t[n-1]=0,t[n]=0,x=r.get(n,n-1),m=Math.abs(x)+Math.abs(p),f=x/m,g=p/m,w=Math.sqrt(f*f+g*g),f=f/w,g=g/w,v=n-1;v<l;v++)p=r.get(n-1,v),r.set(n-1,v,g*p+f*r.get(n,v)),r.set(n,v,g*r.get(n,v)-f*p);for(d=0;d<=n;d++)p=r.get(d,n-1),r.set(d,n-1,g*p+f*r.get(d,n)),r.set(d,n,g*r.get(d,n)-f*p);for(d=o;d<=h;d++)p=s.get(d,n-1),s.set(d,n-1,g*p+f*s.get(d,n)),s.set(d,n,g*s.get(d,n)-f*p)}else e[n-1]=x+f,e[n]=x+f,t[n-1]=p,t[n]=-p;n=n-2,b=0}else{if(x=r.get(n,n),D=0,E=0,C<n&&(D=r.get(n-1,n-1),E=r.get(n,n-1)*r.get(n-1,n)),b===10){for(u+=x,d=o;d<=n;d++)r.set(d,d,r.get(d,d)-x);m=Math.abs(r.get(n,n-1))+Math.abs(r.get(n-1,n-2)),x=D=.75*m,E=-.4375*m*m}if(b===30&&(m=(D-x)/2,m=m*m+E,m>0)){for(m=Math.sqrt(m),D<x&&(m=-m),m=x-E/((D-x)/2+m),d=o;d<=n;d++)r.set(d,d,r.get(d,d)-m);u+=m,x=D=E=.964}for(b=b+1,P=n-2;P>=C&&(p=r.get(P,P),w=x-p,m=D-p,f=(w*m-E)/r.get(P+1,P)+r.get(P,P+1),g=r.get(P+1,P+1)-p-w-m,w=r.get(P+2,P+1),m=Math.abs(f)+Math.abs(g)+Math.abs(w),f=f/m,g=g/m,w=w/m,!(P===C||Math.abs(r.get(P,P-1))*(Math.abs(g)+Math.abs(w))<a*(Math.abs(f)*(Math.abs(r.get(P-1,P-1))+Math.abs(p)+Math.abs(r.get(P+1,P+1))))));)P--;for(d=P+2;d<=n;d++)r.set(d,d-2,0),d>P+2&&r.set(d,d-3,0);for(M=P;M<=n-1&&(N=M!==n-1,M!==P&&(f=r.get(M,M-1),g=r.get(M+1,M-1),w=N?r.get(M+2,M-1):0,x=Math.abs(f)+Math.abs(g)+Math.abs(w),x!==0&&(f=f/x,g=g/x,w=w/x)),x!==0);M++)if(m=Math.sqrt(f*f+g*g+w*w),f<0&&(m=-m),m!==0){for(M!==P?r.set(M,M-1,-m*x):C!==P&&r.set(M,M-1,-r.get(M,M-1)),f=f+m,x=f/m,D=g/m,p=w/m,g=g/f,w=w/f,v=M;v<l;v++)f=r.get(M,v)+g*r.get(M+1,v),N&&(f=f+w*r.get(M+2,v),r.set(M+2,v,r.get(M+2,v)-f*p)),r.set(M,v,r.get(M,v)-f*x),r.set(M+1,v,r.get(M+1,v)-f*D);for(d=0;d<=Math.min(n,M+3);d++)f=x*r.get(d,M)+D*r.get(d,M+1),N&&(f=f+p*r.get(d,M+2),r.set(d,M+2,r.get(d,M+2)-f*w)),r.set(d,M,r.get(d,M)-f),r.set(d,M+1,r.get(d,M+1)-f*g);for(d=o;d<=h;d++)f=x*s.get(d,M)+D*s.get(d,M+1),N&&(f=f+p*s.get(d,M+2),s.set(d,M+2,s.get(d,M+2)-f*w)),s.set(d,M,s.get(d,M)-f),s.set(d,M+1,s.get(d,M+1)-f*g)}}}if(c!==0){for(n=l-1;n>=0;n--)if(f=e[n],g=t[n],g===0)for(C=n,r.set(n,n,1),d=n-1;d>=0;d--){for(E=r.get(d,d)-f,w=0,v=C;v<=n;v++)w=w+r.get(d,v)*r.get(v,n);if(t[d]<0)p=E,m=w;else if(C=d,t[d]===0?r.set(d,n,E!==0?-w/E:-w/(a*c)):(x=r.get(d,d+1),D=r.get(d+1,d),g=(e[d]-f)*(e[d]-f)+t[d]*t[d],R=(x*m-p*w)/g,r.set(d,n,R),r.set(d+1,n,Math.abs(x)>Math.abs(p)?(-w-E*R)/x:(-m-D*R)/p)),R=Math.abs(r.get(d,n)),a*R*R>1)for(v=d;v<=n;v++)r.set(v,n,r.get(v,n)/R)}else if(g<0)for(C=n-1,Math.abs(r.get(n,n-1))>Math.abs(r.get(n-1,n))?(r.set(n-1,n-1,g/r.get(n,n-1)),r.set(n-1,n,-(r.get(n,n)-f)/r.get(n,n-1))):(O=Jt(0,-r.get(n-1,n),r.get(n-1,n-1)-f,g),r.set(n-1,n-1,O[0]),r.set(n-1,n,O[1])),r.set(n,n-1,0),r.set(n,n,1),d=n-2;d>=0;d--){for(_=0,y=0,v=C;v<=n;v++)_=_+r.get(d,v)*r.get(v,n-1),y=y+r.get(d,v)*r.get(v,n);if(E=r.get(d,d)-f,t[d]<0)p=E,w=_,m=y;else if(C=d,t[d]===0?(O=Jt(-_,-y,E,g),r.set(d,n-1,O[0]),r.set(d,n,O[1])):(x=r.get(d,d+1),D=r.get(d+1,d),T=(e[d]-f)*(e[d]-f)+t[d]*t[d]-g*g,S=(e[d]-f)*2*g,T===0&&S===0&&(T=a*c*(Math.abs(E)+Math.abs(g)+Math.abs(x)+Math.abs(D)+Math.abs(p))),O=Jt(x*w-p*_+g*y,x*m-p*y-g*_,T,S),r.set(d,n-1,O[0]),r.set(d,n,O[1]),Math.abs(x)>Math.abs(p)+Math.abs(g)?(r.set(d+1,n-1,(-_-E*r.get(d,n-1)+g*r.get(d,n))/x),r.set(d+1,n,(-y-E*r.get(d,n)-g*r.get(d,n-1))/x)):(O=Jt(-w-D*r.get(d,n-1),-m-D*r.get(d,n),p,g),r.set(d+1,n-1,O[0]),r.set(d+1,n,O[1]))),R=Math.max(Math.abs(r.get(d,n-1)),Math.abs(r.get(d,n))),a*R*R>1)for(v=d;v<=n;v++)r.set(v,n-1,r.get(v,n-1)/R),r.set(v,n,r.get(v,n)/R)}for(d=0;d<l;d++)if(d<o||d>h)for(v=d;v<l;v++)s.set(d,v,r.get(d,v));for(v=l-1;v>=o;v--)for(d=o;d<=h;d++){for(p=0,M=o;M<=Math.min(v,h);M++)p=p+s.get(d,M)*r.get(M,v);s.set(d,v,p)}}}function Jt(l,t,e,s){let r,n;return Math.abs(e)>Math.abs(s)?(r=s/e,n=e+r*s,[(l+r*t)/n,(t-r*l)/n]):(r=e/s,n=s+r*e,[(r*l+t)/n,(r*t-l)/n])}class ds{constructor(t){if(t=ot.checkMatrix(t),!t.isSymmetric())throw new Error("Matrix is not symmetric");let e=t,s=e.rows,r=new k(s,s),n=!0,o,h,a;for(h=0;h<s;h++){let u=0;for(a=0;a<h;a++){let c=0;for(o=0;o<a;o++)c+=r.get(a,o)*r.get(h,o);c=(e.get(h,a)-c)/r.get(a,a),r.set(h,a,c),u=u+c*c}for(u=e.get(h,h)-u,n&=u>0,r.set(h,h,Math.sqrt(Math.max(u,0))),a=h+1;a<s;a++)r.set(h,a,0)}this.L=r,this.positiveDefinite=!!n}isPositiveDefinite(){return this.positiveDefinite}solve(t){t=ot.checkMatrix(t);let e=this.L,s=e.rows;if(t.rows!==s)throw new Error("Matrix dimensions do not match");if(this.isPositiveDefinite()===!1)throw new Error("Matrix is not positive definite");let r=t.columns,n=t.clone(),o,h,a;for(a=0;a<s;a++)for(h=0;h<r;h++){for(o=0;o<a;o++)n.set(a,h,n.get(a,h)-n.get(o,h)*e.get(a,o));n.set(a,h,n.get(a,h)/e.get(a,a))}for(a=s-1;a>=0;a--)for(h=0;h<r;h++){for(o=a+1;o<s;o++)n.set(a,h,n.get(a,h)-n.get(o,h)*e.get(o,a));n.set(a,h,n.get(a,h)/e.get(a,a))}return n}get lowerTriangularMatrix(){return this.L}}class gs{constructor(t,e={}){t=ot.checkMatrix(t);let{Y:s}=e;const{scaleScores:r=!1,maxIterations:n=1e3,terminationCriteria:o=1e-10}=e;let h;if(s){if(rt.isAnyArray(s)&&typeof s[0]=="number"?s=k.columnVector(s):s=ot.checkMatrix(s),s.rows!==t.rows)throw new Error("Y should have the same number of rows as X");h=s.getColumnVector(0)}else h=t.getColumnVector(0);let a=1,u,c,f,g;for(let w=0;w<n&&a>o;w++)f=t.transpose().mmul(h).div(h.transpose().mmul(h).get(0,0)),f=f.div(f.norm()),u=t.mmul(f).div(f.transpose().mmul(f).get(0,0)),w>0&&(a=u.clone().sub(g).pow(2).sum()),g=u.clone(),s?(c=s.transpose().mmul(u).div(u.transpose().mmul(u).get(0,0)),c=c.div(c.norm()),h=s.mmul(c).div(c.transpose().mmul(c).get(0,0))):h=u;if(s){let w=t.transpose().mmul(u).div(u.transpose().mmul(u).get(0,0));w=w.div(w.norm());let m=t.clone().sub(u.clone().mmul(w.transpose())),p=h.transpose().mmul(u).div(u.transpose().mmul(u).get(0,0)),b=s.clone().sub(u.clone().mulS(p.get(0,0)).mmul(c.transpose()));this.t=u,this.p=w.transpose(),this.w=f.transpose(),this.q=c,this.u=h,this.s=u.transpose().mmul(u),this.xResidual=m,this.yResidual=b,this.betas=p}else this.w=f.transpose(),this.s=u.transpose().mmul(u).sqrt(),r?this.t=u.clone().div(this.s.get(0,0)):this.t=u,this.xResidual=t.sub(u.mmul(f.transpose()))}}A.AbstractMatrix=B;A.CHO=ds;A.CholeskyDecomposition=ds;A.DistanceMatrix=se;A.EVD=cs;A.EigenvalueDecomposition=cs;A.LU=ie;A.LuDecomposition=ie;var ms=A.Matrix=k;A.MatrixColumnSelectionView=wi;A.MatrixColumnView=pi;A.MatrixFlipColumnView=_i;A.MatrixFlipRowView=yi;A.MatrixRowSelectionView=vi;A.MatrixRowView=bi;A.MatrixSelectionView=Kt;A.MatrixSubView=Si;A.MatrixTransposeView=Ei;A.NIPALS=gs;A.Nipals=gs;A.QR=_e;A.QrDecomposition=_e;A.SVD=Bt;A.SingularValueDecomposition=Bt;A.SymmetricMatrix=Mt;A.WrapperMatrix1D=us;A.WrapperMatrix2D=ot;A.correlation=Di;A.covariance=Ri;var Le=A.default=k;A.determinant=Zt;A.inverse=Ti;A.linearDependencies=Ci;A.pseudoInverse=Ii;A.solve=fs;A.wrap=Mi;const W=ms;Le.Matrix&&Le.Matrix;/**
 * @license Event
 * Visit http://createjs.com/ for documentation, updates and examples.
 *
 * Copyright (c) 2017 gskinner.com, inc.
 *
 * Permission is hereby granted, free of charge, to any person
 * obtaining a copy of this software and associated documentation
 * files (the "Software"), to deal in the Software without
 * restriction, including without limitation the rights to use,
 * copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the
 * Software is furnished to do so, subject to the following
 * conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES
 * OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT
 * HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,
 * WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR
 * OTHER DEALINGS IN THE SOFTWARE.
 */class yt{constructor(t,e=!1,s=!1){this.type=t,this.target=null,this.currentTarget=null,this.eventPhase=0,this.bubbles=e,this.cancelable=s,this.timeStamp=new Date().getTime(),this.defaultPrevented=!1,this.propagationStopped=!1,this.immediatePropagationStopped=!1,this.removed=!1}preventDefault(){return this.defaultPrevented=this.cancelable,this}stopPropagation(){return this.propagationStopped=!0,this}stopImmediatePropagation(){return this.immediatePropagationStopped=this.propagationStopped=!0,this}remove(){return this.removed=!0,this}clone(){const t=new yt(this.type,this.bubbles,this.cancelable);for(let e in this)this.hasOwnProperty(e)&&(t[e]=this[e]);return t}set(t){for(let e in t)this[e]=t[e];return this}toString(){return`[${this.constructor.name} (type=${this.type})]`}}/**
 * @license EventDispatcher
 * Visit http://createjs.com/ for documentation, updates and examples.
 *
 * Copyright (c) 2017 gskinner.com, inc.
 *
 * Permission is hereby granted, free of charge, to any person
 * obtaining a copy of this software and associated documentation
 * files (the "Software"), to deal in the Software without
 * restriction, including without limitation the rights to use,
 * copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the
 * Software is furnished to do so, subject to the following
 * conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES
 * OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT
 * HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,
 * WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR
 * OTHER DEALINGS IN THE SOFTWARE.
 */class vt{static initialize(t){const e=vt.prototype;t.addEventListener=e.addEventListener,t.on=e.on,t.removeEventListener=t.off=e.removeEventListener,t.removeAllEventListeners=e.removeAllEventListeners,t.hasEventListener=e.hasEventListener,t.dispatchEvent=e.dispatchEvent,t._dispatchEvent=e._dispatchEvent,t.willTrigger=e.willTrigger}constructor(){this._listeners=null,this._captureListeners=null}addEventListener(t,e,s=!1){let r;s?r=this._captureListeners=this._captureListeners||{}:r=this._listeners=this._listeners||{};let n=r[t];return n&&(this.removeEventListener(t,e,s),n=r[t]),n?n.push(e):r[t]=[e],e}on(t,e,s=null,r=!1,n={},o=!1){return e.handleEvent&&(s=s||e,e=e.handleEvent),s=s||this,this.addEventListener(t,h=>{e.call(s,h,n),r&&h.remove()},o)}removeEventListener(t,e,s=!1){const r=s?this._captureListeners:this._listeners;if(!r)return;const n=r[t];if(!n)return;const o=n.length;for(let h=0;h<o;h++)if(n[h]===e){o===1?delete r[t]:n.splice(h,1);break}}off(t,e,s=!1){this.removeEventListener(t,e,s)}removeAllEventListeners(t=null){t?(this._listeners&&delete this._listeners[t],this._captureListeners&&delete this._captureListeners[t]):this._listeners=this._captureListeners=null}dispatchEvent(t,e=!1,s=!1){if(typeof t=="string"){const r=this._listeners;if(!e&&(!r||!r[t]))return!0;t=new yt(t,e,s)}else t.target&&t.clone&&(t=t.clone());try{t.target=this}catch{}if(!t.bubbles||!this.parent)this._dispatchEvent(t,2);else{let r=this;const n=[r];for(;r.parent;)n.push(r=r.parent);const o=n.length;let h;for(h=o-1;h>=0&&!t.propagationStopped;h--)n[h]._dispatchEvent(t,1+(h==0));for(h=1;h<o&&!t.propagationStopped;h++)n[h]._dispatchEvent(t,3)}return!t.defaultPrevented}hasEventListener(t){const e=this._listeners,s=this._captureListeners;return!!(e&&e[t]||s&&s[t])}willTrigger(t){let e=this;for(;e;){if(e.hasEventListener(t))return!0;e=e.parent}return!1}toString(){return`[${this.constructor.name+this.name?` ${this.name}`:""}]`}_dispatchEvent(t,e){const s=e===1?this._captureListeners:this._listeners;if(t&&s){let r=s[t.type],n;if(!r||(n=r.length)===0)return;try{t.currentTarget=this}catch{}try{t.eventPhase=e}catch{}t.removed=!1,r=r.slice();for(let o=0;o<n&&!t.immediatePropagationStopped;o++){let h=r[o];h.handleEvent?h.handleEvent(t):h(t),t.removed&&(this.off(t.type,h,e===1),t.removed=!1)}}}}/**
 * @license Ticker
 * Visit http://createjs.com/ for documentation, updates and examples.
 *
 * Copyright (c) 2017 gskinner.com, inc.
 *
 * Permission is hereby granted, free of charge, to any person
 * obtaining a copy of this software and associated documentation
 * files (the "Software"), to deal in the Software without
 * restriction, including without limitation the rights to use,
 * copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the
 * Software is furnished to do so, subject to the following
 * conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES
 * OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT
 * HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,
 * WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR
 * OTHER DEALINGS IN THE SOFTWARE.
 */class gt extends vt{static get RAF_SYNCHED(){return"synched"}static get RAF(){return"raf"}static get TIMEOUT(){return"timeout"}constructor(t){super(),this.name=t,this.timingMode=gt.TIMEOUT,this.maxDelta=0,this.paused=!1,this._inited=!1,this._startTime=0,this._pausedTime=0,this._ticks=0,this._pausedTicks=0,this._interval=50,this._lastTime=0,this._times=null,this._tickTimes=null,this._timerId=null,this._raf=!0}get interval(){return this._interval}set interval(t){this._interval=t,this._inited&&this._setupTick()}get framerate(){return 1e3/this._interval}set framerate(t){this.interval=1e3/t}init(){this._inited||(this._inited=!0,this._times=[],this._tickTimes=[],this._startTime=this._getTime(),this._times.push(this._lastTime=0),this._setupTick())}reset(){if(this._raf){let t=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.oCancelAnimationFrame||window.msCancelAnimationFrame;t&&t(this._timerId)}else clearTimeout(this._timerId);this.removeAllEventListeners("tick"),this._timerId=this._times=this._tickTimes=null,this._startTime=this._lastTime=this._ticks=0,this._inited=!1}addEventListener(t,e,s){return!this._inited&&this.init(),super.addEventListener(t,e,s)}getMeasuredTickTime(t=null){const e=this._tickTimes;return!e||e.length<1?-1:(t=Math.min(e.length,t||this.framerate|0),e.reduce((s,r)=>s+r,0)/t)}getMeasuredFPS(t=null){const e=this._times;return!e||e.length<2?-1:(t=Math.min(e.length-1,t||this.framerate|0),1e3/((e[0]-e[t])/t))}getTime(t=!1){return this._startTime?this._getTime()-(t?this._pausedTime:0):-1}getEventTime(t=!1){return this._startTime?(this._lastTime||this._startTime)-(t?this._pausedTime:0):-1}getTicks(t=!1){return this._ticks-(t?this._pausedTicks:0)}_handleSynch(){this._timerId=null,this._setupTick(),this._getTime()-this._lastTime>=(this._interval-1)*.97&&this._tick()}_handleRAF(){this._timerId=null,this._setupTick(),this._tick()}_handleTimeout(){this._timerId=null,this._setupTick(),this._tick()}_setupTick(){if(this._timerId!=null)return;const t=this.timingMode||this._raf&&gt.RAF;if(t===gt.RAF_SYNCHED||t===gt.RAF){const e=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame;if(e){this._timerId=e(t===gt.RAF?this._handleRAF.bind(this):this._handleSynch.bind(this)),this._raf=!0;return}}this._raf=!1,this._timerId=setTimeout(this._handleTimeout.bind(this),this._interval)}_tick(){const t=this.paused,e=this._getTime(),s=e-this._lastTime;if(this._lastTime=e,this._ticks++,t&&(this._pausedTicks++,this._pausedTime+=s),this.hasEventListener("tick")){const r=new yt("tick"),n=this.maxDelta;r.delta=n&&s>n?n:s,r.paused=t,r.time=e,r.runTime=e-this._pausedTime,this.dispatchEvent(r)}for(this._tickTimes.unshift(this._getTime()-e);this._tickTimes.length>100;)this._tickTimes.pop();for(this._times.unshift(e);this._times.length>100;)this._times.pop()}_getTime(){const t=window.performance&&window.performance.now;return(t&&t.call(performance)||new Date().getTime())-this._startTime}static on(t,e,s,r,n,o){return G.on(t,e,s,r,n,o)}static removeEventListener(t,e,s){G.removeEventListener(t,e,s)}static off(t,e,s){G.off(t,e,s)}static removeAllEventListeners(t){G.removeAllEventListeners(t)}static dispatchEvent(t,e,s){return G.dispatchEvent(t,e,s)}static hasEventListener(t){return G.hasEventListener(t)}static willTrigger(t){return G.willTrigger(t)}static toString(){return G.toString()}static init(){G.init()}static reset(){G.reset()}static addEventListener(t,e,s){G.addEventListener(t,e,s)}static getMeasuredTickTime(t){return G.getMeasuredTickTime(t)}static getMeasuredFPS(t){return G.getMeasuredFPS(t)}static getTime(t){return G.getTime(t)}static getEventTime(t){return G.getEventTime(t)}static getTicks(t){return G.getTicks(t)}static get interval(){return G.interval}static set interval(t){G.interval=t}static get framerate(){return G.framerate}static set framerate(t){G.framerate=t}static get name(){return G.name}static set name(t){G.name=t}static get timingMode(){return G.timingMode}static set timingMode(t){G.timingMode=t}static get maxDelta(){return G.maxDelta}static set maxDelta(t){G.maxDelta=t}static get paused(){return G.paused}static set paused(t){G.paused=t}}const G=new gt("createjs.global");/**
 * @license
 *
 * StageGL
 * Visit http://createjs.com/ for documentation, updates and examples.
 *
 * Copyright (c) 2017 gskinner.com, inc.
 *
 * Permission is hereby granted, free of charge, to any person
 * obtaining a copy of this software and associated documentation
 * files (the "Software"), to deal in the Software without
 * restriction, including without limitation the rights to use,
 * copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the
 * Software is furnished to do so, subject to the following
 * conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES
 * OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT
 * HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,
 * WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR
 * OTHER DEALINGS IN THE SOFTWARE.
 */class je{constructor(){throw new Error(`
			StageGL is not currently supported on the EaselJS 2.0 branch.
			End of Q1 2018 is targetted for StageGL support.
			Follow @CreateJS on Twitter for updates.
		`)}}/**
 * @license Shadow
 * Visit http://createjs.com/ for documentation, updates and examples.
 *
 * Copyright (c) 2017 gskinner.com, inc.
 *
 * Permission is hereby granted, free of charge, to any person
 * obtaining a copy of this software and associated documentation
 * files (the "Software"), to deal in the Software without
 * restriction, including without limitation the rights to use,
 * copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the
 * Software is furnished to do so, subject to the following
 * conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES
 * OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT
 * HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,
 * WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR
 * OTHER DEALINGS IN THE SOFTWARE.
 */class Gt{constructor(t="black",e=0,s=0,r=0){this.color=t,this.offsetX=e,this.offsetY=s,this.blur=r}toString(){return`[${this.constructor.name}]`}clone(){return new Gt(this.color,this.offsetX,this.offsetY,this.blur)}}Gt.identity=new Gt("transparent");/**
 * @license uid
 * Visit http://createjs.com/ for documentation, updates and examples.
 *
 * Copyright (c) 2017 gskinner.com, inc.
 *
 * Permission is hereby granted, free of charge, to any person
 * obtaining a copy of this software and associated documentation
 * files (the "Software"), to deal in the Software without
 * restriction, including without limitation the rights to use,
 * copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the
 * Software is furnished to do so, subject to the following
 * conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES
 * OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT
 * HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,
 * WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR
 * OTHER DEALINGS IN THE SOFTWARE.
 */let Ni=0;function Bi(){return Ni++}/**
 * @license Point
 * Visit http://createjs.com/ for documentation, updates and examples.
 *
 * Copyright (c) 2017 gskinner.com, inc.
 *
 * Permission is hereby granted, free of charge, to any person
 * obtaining a copy of this software and associated documentation
 * files (the "Software"), to deal in the Software without
 * restriction, including without limitation the rights to use,
 * copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the
 * Software is furnished to do so, subject to the following
 * conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES
 * OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT
 * HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,
 * WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR
 * OTHER DEALINGS IN THE SOFTWARE.
 */class qt{constructor(t,e){this.setValues(t,e)}setValues(t=0,e=0){return this.x=t,this.y=e,this}copy(t){return this.x=t.x,this.y=t.y,this}clone(){return new qt(this.x,this.y)}toString(){return`[${this.constructor.name} (x=${this.x} y=${this.y})]`}}/**
 * @license Matrix2D
 * Visit http://createjs.com/ for documentation, updates and examples.
 *
 * Copyright (c) 2017 gskinner.com, inc.
 *
 * Permission is hereby granted, free of charge, to any person
 * obtaining a copy of this software and associated documentation
 * files (the "Software"), to deal in the Software without
 * restriction, including without limitation the rights to use,
 * copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the
 * Software is furnished to do so, subject to the following
 * conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES
 * OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT
 * HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,
 * WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR
 * OTHER DEALINGS IN THE SOFTWARE.
 */class K{constructor(t,e,s,r,n,o){this.setValues(t,e,s,r,n,o)}setValues(t=1,e=0,s=0,r=1,n=0,o=0){return this.a=t,this.b=e,this.c=s,this.d=r,this.tx=n,this.ty=o,this}append(t,e,s,r,n,o){let h=this.a,a=this.b,u=this.c,c=this.d;return(t!=1||e!=0||s!=0||r!=1)&&(this.a=h*t+u*e,this.b=a*t+c*e,this.c=h*s+u*r,this.d=a*s+c*r),this.tx=h*n+u*o+this.tx,this.ty=a*n+c*o+this.ty,this}prepend(t,e,s,r,n,o){let h=this.a,a=this.c,u=this.tx;return this.a=t*h+s*this.b,this.b=e*h+r*this.b,this.c=t*a+s*this.d,this.d=e*a+r*this.d,this.tx=t*u+s*this.ty+n,this.ty=e*u+r*this.ty+o,this}appendMatrix(t){return this.append(t.a,t.b,t.c,t.d,t.tx,t.ty)}prependMatrix(t){return this.prepend(t.a,t.b,t.c,t.d,t.tx,t.ty)}appendTransform(t,e,s,r,n,o,h,a,u){let c,f,g;return n%360?(c=n*K.DEG_TO_RAD,f=Math.cos(c),g=Math.sin(c)):(f=1,g=0),o||h?(o*=K.DEG_TO_RAD,h*=K.DEG_TO_RAD,this.append(Math.cos(h),Math.sin(h),-Math.sin(o),Math.cos(o),t,e),this.append(f*s,g*s,-g*r,f*r,0,0)):this.append(f*s,g*s,-g*r,f*r,t,e),(a||u)&&(this.tx-=a*this.a+u*this.c,this.ty-=a*this.b+u*this.d),this}prependTransform(t,e,s,r,n,o,h,a,u){let c,f,g;return n%360?(c=n*K.DEG_TO_RAD,f=Math.cos(c),g=Math.sin(c)):(f=1,g=0),(a||u)&&(this.tx-=a,this.ty-=u),o||h?(o*=K.DEG_TO_RAD,h*=K.DEG_TO_RAD,this.prepend(f*s,g*s,-g*r,f*r,0,0),this.prepend(Math.cos(h),Math.sin(h),-Math.sin(o),Math.cos(o),t,e)):this.prepend(f*s,g*s,-g*r,f*r,t,e),this}rotate(t){t*=K.DEG_TO_RAD;let e=Math.cos(t),s=Math.sin(t),r=this.a,n=this.b;return this.a=r*e+this.c*s,this.b=n*e+this.d*s,this.c=-r*s+this.c*e,this.d=-n*s+this.d*e,this}skew(t,e){return t*=K.DEG_TO_RAD,e*=K.DEG_TO_RAD,this.append(Math.cos(e),Math.sin(e),-Math.sin(t),Math.cos(t),0,0),this}scale(t,e){return this.a*=t,this.b*=t,this.c*=e,this.d*=e,this}translate(t,e){return this.tx+=this.a*t+this.c*e,this.ty+=this.b*t+this.d*e,this}identity(){return this.a=this.d=1,this.b=this.c=this.tx=this.ty=0,this}invert(){let t=this.a,e=this.b,s=this.c,r=this.d,n=this.tx,o=t*r-e*s;return this.a=r/o,this.b=-e/o,this.c=-s/o,this.d=t/o,this.tx=(s*this.ty-r*n)/o,this.ty=-(t*this.ty-e*n)/o,this}isIdentity(){return this.tx===0&&this.ty===0&&this.a===1&&this.b===0&&this.c===0&&this.d===1}equals(t){return this.tx===t.tx&&this.ty===t.ty&&this.a===t.a&&this.b===t.b&&this.c===t.c&&this.d===t.d}transformPoint(t,e,s=new qt){return s.x=t*this.a+e*this.c+this.tx,s.y=t*this.b+e*this.d+this.ty,s}decompose(t={}){t.x=this.tx,t.y=this.ty,t.scaleX=Math.sqrt(this.a*this.a+this.b*this.b),t.scaleY=Math.sqrt(this.c*this.c+this.d*this.d);let e=Math.atan2(-this.c,this.d),s=Math.atan2(this.b,this.a);return Math.abs(1-e/s)<1e-5?(t.rotation=s/K.DEG_TO_RAD,this.a<0&&this.d>=0&&(t.rotation+=t.rotation<=0?180:-180),t.skewX=t.skewY=0):(t.skewX=e/K.DEG_TO_RAD,t.skewY=s/K.DEG_TO_RAD),t}copy(t){return this.setValues(t.a,t.b,t.c,t.d,t.tx,t.ty)}clone(){return new K(this.a,this.b,this.c,this.d,this.tx,this.ty)}toString(){return`[${this.constructor.name} (a=${this.a} b=${this.b} c=${this.c} d=${this.d} tx=${this.tx} ty=${this.ty})]`}}K.DEG_TO_RAD=Math.PI/180;K.identity=new K;/**
 * @license DisplayProps
 * Visit http://createjs.com/ for documentation, updates and examples.
 *
 * Copyright (c) 2017 gskinner.com, inc.
 *
 * Permission is hereby granted, free of charge, to any person
 * obtaining a copy of this software and associated documentation
 * files (the "Software"), to deal in the Software without
 * restriction, including without limitation the rights to use,
 * copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the
 * Software is furnished to do so, subject to the following
 * conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES
 * OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT
 * HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,
 * WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR
 * OTHER DEALINGS IN THE SOFTWARE.
 */class Ht{constructor(t,e,s,r,n){this.setValues(t,e,s,r,n)}setValues(t=!0,e=1,s,r,n){return this.visible=t,this.alpha=e,this.shadow=s,this.compositeOperation=r,this.matrix=n||this.matrix&&this.matrix.identity()||new K,this}append(t,e,s,r,n){return this.alpha*=e,this.shadow=s||this.shadow,this.compositeOperation=r||this.compositeOperation,this.visible=this.visible&&t,n&&this.matrix.appendMatrix(n),this}prepend(t,e,s,r,n){return this.alpha*=e,this.shadow=this.shadow||s,this.compositeOperation=this.compositeOperation||r,this.visible=this.visible&&t,n&&this.matrix.prependMatrix(n),this}identity(){return this.visible=!0,this.alpha=1,this.shadow=this.compositeOperation=null,this.matrix.identity(),this}clone(){return new Ht(this.alpha,this.shadow,this.compositeOperation,this.visible,this.matrix.clone())}}/**
 * @license Rectangle
 * Visit http://createjs.com/ for documentation, updates and examples.
 *
 * Copyright (c) 2017 gskinner.com, inc.
 *
 * Permission is hereby granted, free of charge, to any person
 * obtaining a copy of this software and associated documentation
 * files (the "Software"), to deal in the Software without
 * restriction, including without limitation the rights to use,
 * copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the
 * Software is furnished to do so, subject to the following
 * conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES
 * OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT
 * HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,
 * WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR
 * OTHER DEALINGS IN THE SOFTWARE.
 */class ft{constructor(t,e,s,r){this.setValues(t,e,s,r)}setValues(t=0,e=0,s=0,r=0){return this.x=t,this.y=e,this.width=s,this.height=r,this}extend(t,e,s=0,r=0){return t+s>this.x+this.width&&(this.width=t+s-this.x),e+r>this.y+this.height&&(this.height=e+r-this.y),t<this.x&&(this.width+=this.x-t,this.x=t),e<this.y&&(this.height+=this.y-e,this.y=e),this}pad(t,e,s,r){return this.x-=e,this.y-=t,this.width+=e+r,this.height+=t+s,this}copy(t){return this.setValues(t.x,t.y,t.width,t.height)}contains(t,e,s=0,r=0){return t>=this.x&&t+s<=this.x+this.width&&e>=this.y&&e+r<=this.y+this.height}union(t){return this.clone().extend(t.x,t.y,t.width,t.height)}intersection(t){let e=t.x,s=t.y,r=e+t.width,n=s+t.height;return this.x>e&&(e=this.x),this.y>s&&(s=this.y),this.x+this.width<r&&(r=this.x+this.width),this.y+this.height<n&&(n=this.y+this.height),r<=e||n<=s?null:new ft(e,s,r-e,n-s)}intersects(t){return t.x<=this.x+this.width&&this.x<=t.x+t.width&&t.y<=this.y+this.height&&this.y<=t.y+t.height}isEmpty(){return this.width<=0||this.height<=0}clone(){return new ft(this.x,this.y,this.width,this.height)}toString(){return`[${this.constructor.name} (x=${this.x} y=${this.y} width=${this.width} height=${this.height})]`}}/**
 * @license Filter
 * Visit http://createjs.com/ for documentation, updates and examples.
 *
 * Copyright (c) 2017 gskinner.com, inc.
 *
 * Permission is hereby granted, free of charge, to any person
 * obtaining a copy of this software and associated documentation
 * files (the "Software"), to deal in the Software without
 * restriction, including without limitation the rights to use,
 * copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the
 * Software is furnished to do so, subject to the following
 * conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES
 * OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT
 * HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,
 * WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR
 * OTHER DEALINGS IN THE SOFTWARE.
 */class re{constructor(){this.usesContext=!1,this._multiPass=null,this.VTX_SHADER_BODY=null,this.FRAG_SHADER_BODY=null}getBounds(t){}shaderParamSetup(t,e,s){}applyFilter(t,e,s,r,n,o,h,a){o=o||t,h==null&&(h=e),a==null&&(a=s);try{let u=t.getImageData(e,s,r,n);if(this._applyFilter(u))return o.putImageData(u,h,a),!0}catch{}return!1}toString(){return`[${this.constructor.name}]`}clone(){return new re}_applyFilter(t){}}/**
 * @license BitmapCache
 * Visit http://createjs.com/ for documentation, updates and examples.
 *
 * Copyright (c) 2017 gskinner.com, inc.
 *
 * Permission is hereby granted, free of charge, to any person
 * obtaining a copy of this software and associated documentation
 * files (the "Software"), to deal in the Software without
 * restriction, including without limitation the rights to use,
 * copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the
 * Software is furnished to do so, subject to the following
 * conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES
 * OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT
 * HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,
 * WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR
 * OTHER DEALINGS IN THE SOFTWARE.
 */class ye extends re{constructor(){super(),this.width=void 0,this.height=void 0,this.x=void 0,this.y=void 0,this.scale=1,this.offX=0,this.offY=0,this.cacheID=0,this._filterOffX=0,this._filterOffY=0,this._cacheDataURLID=0,this._cacheDataURL=null,this._drawWidth=0,this._drawHeight=0,this._boundRect=new ft}static getFilterBounds(t,e=new ft){let s=t.filters,r=s&&s.length;if(!!r<=0)return e;for(let n=0;n<r;n++){let o=s[n];if(!o||!o.getBounds)continue;let h=o.getBounds();h&&(n==0?e.setValues(h.x,h.y,h.width,h.height):e.extend(h.x,h.y,h.width,h.height))}return e}define(t,e=0,s=0,r=1,n=1,o=1,h){if(!t)throw"No symbol to cache";this._options=h,this._useWebGL=h!==void 0,this.target=t,this.width=r>=1?r:1,this.height=n>=1?n:1,this.x=e,this.y=s,this.scale=o,this.update()}update(t){if(!this.target)throw"define() must be called before update()";let e=ye.getFilterBounds(this.target),s=this.target.cacheCanvas;this._drawWidth=Math.ceil(this.width*this.scale)+e.width,this._drawHeight=Math.ceil(this.height*this.scale)+e.height,(!s||this._drawWidth!=s.width||this._drawHeight!=s.height)&&this._updateSurface(),this._filterOffX=e.x,this._filterOffY=e.y,this.offX=this.x*this.scale+this._filterOffX,this.offY=this.y*this.scale+this._filterOffY,this._drawToCache(t),this.cacheID=this.cacheID?this.cacheID+1:1}release(){let t=this.target.stage;this._useWebGL&&this._webGLCache?(this._webGLCache.isCacheControlled||(this.__lastRT&&(this.__lastRT=void 0),this.__rtA&&this._webGLCache._killTextureObject(this.__rtA),this.__rtB&&this._webGLCache._killTextureObject(this.__rtB),this.target&&this.target.cacheCanvas&&this._webGLCache._killTextureObject(this.target.cacheCanvas)),this._webGLCache=!1):t instanceof je&&t.releaseTexture(this.target.cacheCanvas),this.target=this.target.cacheCanvas=null,this.cacheID=this._cacheDataURLID=this._cacheDataURL=void 0,this.width=this.height=this.x=this.y=this.offX=this.offY=0,this.scale=1}getCacheDataURL(){let t=this.target&&this.target.cacheCanvas;return t?(this.cacheID!=this._cacheDataURLID&&(this._cacheDataURLID=this.cacheID,this._cacheDataURL=t.toDataURL?t.toDataURL():null),this._cacheDataURL):null}draw(t){return this.target?(t.drawImage(this.target.cacheCanvas,this.x+this._filterOffX/this.scale,this.y+this._filterOffY/this.scale,this._drawWidth/this.scale,this._drawHeight/this.scale),!0):!1}getBounds(){const t=this.scale;return this._boundRect.setValue(this._filterOffX/t,this._filterOffY/t,this.width/t,this.height/t)}_updateSurface(){let t;if(!this._useWebGL){t=this.target.cacheCanvas,t||(t=this.target.cacheCanvas=window.createjs&&createjs.createCanvas?createjs.createCanvas():document.createElement("canvas")),t.width=this._drawWidth,t.height=this._drawHeight;return}if(!this._webGLCache)if(this._options.useGL==="stage"){if(!(this.target.stage!=null&&this.target.stage.isWebGL))throw`Cannot use 'stage' for cache because the object's parent stage is ${this.target.stage!=null?"non WebGL.":"not set, please addChild to the correct stage."}`;this.target.cacheCanvas=!0,this._webGLCache=this.target.stage}else if(this._options.useGL==="new")this.target.cacheCanvas=document.createElement("canvas"),this._webGLCache=new je(this.target.cacheCanvas,{antialias:!0,transparent:!0,autoPurge:-1}),this._webGLCache.isCacheControlled=!0;else throw"Invalid option provided to useGL, expected ['stage', 'new', StageGL, undefined], got "+this._options.useGL;let e=this._webGLCache;t=this.target.cacheCanvas,e.isCacheControlled&&(t.width=this._drawWidth,t.height=this._drawHeight,e.updateViewport(this._drawWidth,this._drawHeight)),this.target.filters?(e.getTargetRenderTexture(this.target,this._drawWidth,this._drawHeight),e.getTargetRenderTexture(this.target,this._drawWidth,this._drawHeight)):e.isCacheControlled||e.getTargetRenderTexture(this.target,this._drawWidth,this._drawHeight)}_drawToCache(t){let e=this.target,s=e.cacheCanvas,r=this._webGLCache;if(!this._useWebGL||!r){let n=s.getContext("2d");t||n.clearRect(0,0,this._drawWidth+1,this._drawHeight+1),n.save(),n.globalCompositeOperation=t,n.setTransform(this.scale,0,0,this.scale,-this._filterOffX,-this._filterOffY),n.translate(-this.x,-this.y),e.draw(n,!0),n.restore(),e.filters&&e.filters.length&&this._applyFilters(e),s._invalid=!0;return}this._webGLCache.cacheDraw(e,e.filters,this),s=this.target.cacheCanvas,s.width=this._drawWidth,s.height=this._drawHeight,s._invalid=!0}_applyFilters(){let t=this.target.cacheCanvas,e=this.target.filters,s=this._drawWidth,r=this._drawHeight,n=t.getContext("2d").getImageData(0,0,s,r),o=e.length;for(let h=0;h<o;h++)e[h]._applyFilter(n);t.getContext("2d").putImageData(n,0,0)}}/**
 * @license DisplayObject
 * Visit http://createjs.com/ for documentation, updates and examples.
 *
 * Copyright (c) 2017 gskinner.com, inc.
 *
 * Permission is hereby granted, free of charge, to any person
 * obtaining a copy of this software and associated documentation
 * files (the "Software"), to deal in the Software without
 * restriction, including without limitation the rights to use,
 * copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the
 * Software is furnished to do so, subject to the following
 * conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES
 * OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT
 * HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,
 * WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR
 * OTHER DEALINGS IN THE SOFTWARE.
 */class V extends vt{constructor(){super(),this.alpha=1,this.cacheCanvas=null,this.bitmapCache=null,this.id=Bi(),this.mouseEnabled=!0,this.tickEnabled=!0,this.name=null,this.parent=null,this.regX=0,this.regY=0,this.rotation=0,this.scaleX=1,this.scaleY=1,this.skewX=0,this.skewY=0,this.shadow=null,this.visible=!0,this.x=0,this.y=0,this.transformMatrix=null,this.compositeOperation=null,this.snapToPixel=!0,this.filters=null,this.mask=null,this.hitArea=null,this.cursor=null,this._props=new Ht,this._rectangle=new ft,this._bounds=null,this._webGLRenderStyle=V._StageGL_NONE}get stage(){let t=this;for(;t.parent;)t=t.parent;return/^\[Stage(GL)?(\s\(name=\w+\))?\]$/.test(t.toString())?t:null}set scale(t){this.scaleX=this.scaleY=t}get scale(){return this.scaleX}isVisible(){return!!(this.visible&&this.alpha>0&&this.scaleX!=0&&this.scaleY!=0)}draw(t,e=!1){return this.drawCache(t,e)}drawCache(t,e=!1){let s=this.bitmapCache;return s&&!e?s.draw(t):!1}updateContext(t){let e=this,s=e.mask,r=e._props.matrix;s&&s.graphics&&!s.graphics.isEmpty()&&(s.getMatrix(r),t.transform(r.a,r.b,r.c,r.d,r.tx,r.ty),s.graphics.drawAsPath(t),t.clip(),r.invert(),t.transform(r.a,r.b,r.c,r.d,r.tx,r.ty)),this.getMatrix(r);let n=r.tx,o=r.ty;V._snapToPixelEnabled&&e.snapToPixel&&(n=n+(n<0?-.5:.5)|0,o=o+(o<0?-.5:.5)|0),t.transform(r.a,r.b,r.c,r.d,n,o),t.globalAlpha*=e.alpha,e.compositeOperation&&(t.globalCompositeOperation=e.compositeOperation),e.shadow&&this._applyShadow(t,e.shadow)}cache(t,e,s,r,n=1,o){this.bitmapCache||(this.bitmapCache=new ye),this.bitmapCache.define(this,t,e,s,r,n,o)}updateCache(t){if(!this.bitmapCache)throw"No cache found. cache() must be called before updateCache()";this.bitmapCache.update(t)}uncache(){this.bitmapCache&&(this.bitmapCache.release(),this.bitmapCache=void 0)}getCacheDataURL(){return this.bitmapCache?this.bitmapCache.getDataURL():null}localToGlobal(t,e,s=new qt){return this.getConcatenatedMatrix(this._props.matrix).transformPoint(t,e,s)}globalToLocal(t,e,s=new qt){return this.getConcatenatedMatrix(this._props.matrix).invert().transformPoint(t,e,s)}localToLocal(t,e,s,r){return r=this.localToGlobal(t,e,r),s.globalToLocal(r.x,r.y,r)}setTransform(t=0,e=0,s=1,r=1,n=0,o=0,h=0,a=0,u=0){return this.x=t,this.y=e,this.scaleX=s,this.scaleY=r,this.rotation=n,this.skewX=o,this.skewY=h,this.regX=a,this.regY=u,this}getMatrix(t){let e=this,s=t&&t.identity()||new K;return e.transformMatrix?s.copy(e.transformMatrix):s.appendTransform(e.x,e.y,e.scaleX,e.scaleY,e.rotation,e.skewX,e.skewY,e.regX,e.regY)}getConcatenatedMatrix(t){let e=this,s=this.getMatrix(t);for(;e=e.parent;)s.prependMatrix(e.getMatrix(e._props.matrix));return s}getConcatenatedDisplayProps(t){t=t?t.identity():new Ht;let e=this,s=e.getMatrix(t.matrix);do t.prepend(e.visible,e.alpha,e.shadow,e.compositeOperation),e!=this&&s.prependMatrix(e.getMatrix(e._props.matrix));while(e=e.parent);return t}hitTest(t,e){let s=V._hitTestContext;s.setTransform(1,0,0,1,-t,-e),this.draw(s);let r=this._testHit(s);return s.setTransform(1,0,0,1,0,0),s.clearRect(0,0,2,2),r}set(t){for(let e in t)this[e]=t[e];return this}getBounds(){if(this._bounds)return this._rectangle.copy(this._bounds);let t=this.cacheCanvas;if(t){let e=this._cacheScale;return this._rectangle.setValues(this._cacheOffsetX,this._cacheOffsetY,t.width/e,t.height/e)}return null}getTransformedBounds(){return this._getBounds()}setBounds(t,e,s,r){t==null&&(this._bounds=null),this._bounds=(this._bounds||new ft).setValues(t,e,s,r)}clone(){return this._cloneProps(new V)}toString(){return`[${this.constructor.name}${this.name?` (name=${this.name})`:""}]`}_cloneProps(t){return t.alpha=this.alpha,t.mouseEnabled=this.mouseEnabled,t.tickEnabled=this.tickEnabled,t.name=this.name,t.regX=this.regX,t.regY=this.regY,t.rotation=this.rotation,t.scaleX=this.scaleX,t.scaleY=this.scaleY,t.shadow=this.shadow,t.skewX=this.skewX,t.skewY=this.skewY,t.visible=this.visible,t.x=this.x,t.y=this.y,t.compositeOperation=this.compositeOperation,t.snapToPixel=this.snapToPixel,t.filters=this.filters==null?null:this.filters.slice(0),t.mask=this.mask,t.hitArea=this.hitArea,t.cursor=this.cursor,t._bounds=this._bounds,t}_applyShadow(t,e=Gt.identity){e=e,t.shadowColor=e.color,t.shadowOffsetX=e.offsetX,t.shadowOffsetY=e.offsetY,t.shadowBlur=e.blur}_tick(t){let e=this._listeners;e&&e.tick&&(t.target=null,t.propagationStopped=t.immediatePropagationStopped=!1,this.dispatchEvent(t))}_testHit(t){try{return t.getImageData(0,0,1,1).data[3]>1}catch{if(!V.suppressCrossDomainErrors)throw"An error has occurred. This is most likely due to security restrictions on reading canvas pixel data with local or cross-domain images.";return!1}}_getBounds(t,e){return this._transformBounds(this.getBounds(),t,e)}_transformBounds(t,e,s){if(!t)return t;let{x:r,y:n,width:o,height:h}=t,a=this._props.matrix;a=s?a.identity():this.getMatrix(a),(r||n)&&a.appendTransform(0,0,1,1,0,0,0,-r,-n),e&&a.prependMatrix(e);let u=o*a.a,c=o*a.b,f=h*a.c,g=h*a.d,w=a.tx,m=a.ty,p=w,b=w,d=m,v=m;return(r=u+w)<p?p=r:r>b&&(b=r),(r=u+f+w)<p?p=r:r>b&&(b=r),(r=f+w)<p?p=r:r>b&&(b=r),(n=c+m)<d?d=n:n>v&&(v=n),(n=c+g+m)<d?d=n:n>v&&(v=n),(n=g+m)<d?d=n:n>v&&(v=n),t.setValues(p,d,b-p,v-d)}_hasMouseEventListener(){let t=V._MOUSE_EVENTS;for(let e=0,s=t.length;e<s;e++)if(this.hasEventListener(t[e]))return!0;return!!this.cursor}}{let l=window.createjs&&createjs.createCanvas?createjs.createCanvas():document.createElement("canvas");l.getContext&&(V._hitTestCanvas=l,V._hitTestContext=l.getContext("2d"),l.width=l.height=1)}V._MOUSE_EVENTS=["click","dblclick","mousedown","mouseout","mouseover","pressmove","pressup","rollout","rollover"];V.suppressCrossDomainErrors=!1;V.snapToPixelEnabled=!1;V._StageGL_NONE=0;V._StageGL_SPRITE=1;V._StageGL_BITMAP=2;/**
 * @license Container
 * Visit http://createjs.com/ for documentation, updates and examples.
 *
 * Copyright (c) 2017 gskinner.com, inc.
 *
 * Permission is hereby granted, free of charge, to any person
 * obtaining a copy of this software and associated documentation
 * files (the "Software"), to deal in the Software without
 * restriction, including without limitation the rights to use,
 * copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the
 * Software is furnished to do so, subject to the following
 * conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES
 * OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT
 * HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,
 * WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR
 * OTHER DEALINGS IN THE SOFTWARE.
 */class Tt extends V{constructor(){super(),this.children=[],this.mouseChildren=!0,this.tickChildren=!0}get numChildren(){return this.children.length}isVisible(){let t=this.cacheCanvas||this.children.length;return!!(this.visible&&this.alpha>0&&this.scaleX!=0&&this.scaleY!=0&&t)}draw(t,e=!1){if(super.draw(t,e))return!0;let s=this.children.slice();for(let r=0,n=s.length;r<n;r++){let o=s[r];o.isVisible()&&(t.save(),o.updateContext(t),o.draw(t),t.restore())}return!0}addChild(...t){const e=t.length;if(e===0)return null;let s=t[0];if(e>1){for(let o=0;o<e;o++)s=this.addChild(t[o]);return s}let r=s.parent,n=r===this;return r&&r._removeChildAt(r.children.indexOf(s),n),s.parent=this,this.children.push(s),n||s.dispatchEvent("added"),s}addChildAt(...t){const e=t.length;if(e===0)return null;let s=t.pop();if(s<0||s>this.children.length)return t[e-2];if(e>2){for(let h=0;h<e-1;h++)this.addChildAt(t[h],s++);return t[e-2]}let r=t[0],n=r.parent,o=n===this;return n&&n._removeChildAt(n.children.indexOf(r),o),r.parent=this,this.children.splice(s++,0,r),o||r.dispatchEvent("added"),r}removeChild(...t){const e=t.length;if(e===0)return!0;if(e>1){let s=!0;for(let r=0;r<e;r++)s=s&&this.removeChild(t[r]);return s}return this._removeChildAt(this.children.indexOf(t[0]))}removeChildAt(...t){const e=t.length;if(e===0)return!0;if(e>1){t.sort((r,n)=>n-r);let s=!0;for(let r=0;r<e;r++)s=s&&this._removeChildAt(t[r]);return s}return this._removeChildAt(t[0])}removeAllChildren(){let t=this.children;for(;t.length;)this._removeChildAt(0)}getChildAt(t){return this.children[t]}getChildByName(t){let e=this.children;const s=e.length;for(let r=0;r<s;r++)if(e[r].name===t)return e[r];return null}sortChildren(t){this.children.sort(t)}getChildIndex(t){return this.children.indexOf(t)}swapChildrenAt(t,e){let s=this.children,r=s[t],n=s[e];!r||!n||(s[t]=n,s[e]=r)}swapChildren(t,e){let s=this.children;const r=s.length;let n,o;for(var h=0;h<r&&(s[h]===t&&(n=h),s[h]===e&&(o=h),!(n!=null&&o!=null));h++);h!==r&&(s[n]=e,s[o]=t)}setChildIndex(t,e){let s=this.children;const r=s.length;if(!(t.parent!=this||e<0||e>=r)){for(var n=0;n<r&&s[n]!==t;n++);n===r||n===e||(s.splice(n,1),s.splice(e,0,t))}}contains(t){for(;t;){if(t===this)return!0;t=t.parent}return!1}hitTest(t,e){return this.getObjectUnderPoint(t,e)!=null}getObjectsUnderPoint(t,e,s=0){let r=[],n=this.localToGlobal(t,e);return this._getObjectsUnderPoint(n.x,n.y,r,s>0,s===1),r}getObjectUnderPoint(t,e,s=0){let r=this.localToGlobal(t,e);return this._getObjectsUnderPoint(r.x,r.y,null,s>0,s===1)}getBounds(){return this._getBounds(null,!0)}getTransformedBounds(){return this._getBounds()}clone(t=!1){let e=this._cloneProps(new Tt);return t&&this._cloneChildren(e),e}_tick(t){if(this.tickChildren)for(let e=this.children.length-1;e>=0;e--){let s=this.children[e];s.tickEnabled&&s._tick&&s._tick(t)}super._tick(t)}_cloneChildren(t){t.children.length&&t.removeAllChildren();let e=t.children;const s=this.children.length;for(let r=0;r<s;r++){let n=this.children[r].clone(!0);n.parent=t,e.push(n)}}_removeChildAt(t,e=!1){if(t<0||t>this.children.length-1)return!1;let s=this.children[t];return s&&(s.parent=null),this.children.splice(t,1),e||s.dispatchEvent("removed"),!0}_getObjectsUnderPoint(t,e,s,r,n,o=0){if(!o&&!this._testMask(this,t,e))return null;let h,a=V._hitTestContext;n=n||r&&this._hasMouseEventListener();let u=this.children;const c=u.length;for(let f=c-1;f>=0;f--){let g=u[f],w=g.hitArea;if(!(!g.visible||!w&&!g.isVisible()||r&&!g.mouseEnabled)&&!(!w&&!this._testMask(g,t,e)))if(!w&&g instanceof Tt){let m=g._getObjectsUnderPoint(t,e,s,r,n,o+1);if(!s&&m)return r&&!this.mouseChildren?this:m}else{if(r&&!n&&!g._hasMouseEventListener())continue;let m=g.getConcatenatedDisplayProps(g._props);if(h=m.matrix,w&&(h.appendMatrix(w.getMatrix(w._props.matrix)),m.alpha=w.alpha),a.globalAlpha=m.alpha,a.setTransform(h.a,h.b,h.c,h.d,h.tx-t,h.ty-e),(w||g).draw(a),!this._testHit(a))continue;if(a.setTransform(1,0,0,1,0,0),a.clearRect(0,0,2,2),s)s.push(g);else return r&&!this.mouseChildren?this:g}}return null}_testMask(t,e,s){let r=t.mask;if(!r||!r.graphics||r.graphics.isEmpty())return!0;let n=this._props.matrix,o=t.parent;n=o?o.getConcatenatedMatrix(n):n.identity(),n=r.getMatrix(r._props.matrix).prependMatrix(n);let h=V._hitTestContext;return h.setTransform(n.a,n.b,n.c,n.d,n.tx-e,n.ty-s),r.graphics.drawAsPath(h),h.fillStyle="#000",h.fill(),this._testHit(h)?(h.setTransform(1,0,0,1,0,0),h.clearRect(0,0,2,2),!0):!1}_getBounds(t,e){let s=super.getBounds();if(s)return this._transformBounds(s,t,e);let r=this._props.matrix;r=e?r.identity():this.getMatrix(r),t&&r.prependMatrix(t);const n=this.children.length;let o=null;for(let h=0;h<n;h++){let a=this.children[h];!a.visible||!(s=a._getBounds(r))||(o?o.extend(s.x,s.y,s.width,s.height):o=s.clone())}return o}}/**
 * @license MouseEvent
 * Visit http://createjs.com/ for documentation, updates and examples.
 *
 * Copyright (c) 2017 gskinner.com, inc.
 *
 * Permission is hereby granted, free of charge, to any person
 * obtaining a copy of this software and associated documentation
 * files (the "Software"), to deal in the Software without
 * restriction, including without limitation the rights to use,
 * copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the
 * Software is furnished to do so, subject to the following
 * conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES
 * OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT
 * HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,
 * WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR
 * OTHER DEALINGS IN THE SOFTWARE.
 */class be extends yt{constructor(t,e,s,r,n,o,h,a,u,c,f){super(t,e,s),this.stageX=r,this.stageY=n,this.rawX=u??r,this.rawY=c??n,this.nativeEvent=o,this.pointerID=h,this.primary=!!a,this.relatedTarget=f}get localX(){return this.currentTarget.globalToLocal(this.rawX,this.rawY).x}get localY(){return this.currentTarget.globalToLocal(this.rawX,this.rawY).y}get isTouch(){return this.pointerID!==-1}clone(){return new be(this.type,this.bubbles,this.cancelable,this.stageX,this.stageY,this.nativeEvent,this.pointerID,this.primary,this.rawX,this.rawY)}toString(){return`[${this.constructor.name} (type=${this.type} stageX=${this.stageX} stageY=${this.stageY})]`}}/**
 * @license Stage
 * Visit http://createjs.com/ for documentation, updates and examples.
 *
 * Copyright (c) 2017 gskinner.com, inc.
 *
 * Permission is hereby granted, free of charge, to any person
 * obtaining a copy of this software and associated documentation
 * files (the "Software"), to deal in the Software without
 * restriction, including without limitation the rights to use,
 * copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the
 * Software is furnished to do so, subject to the following
 * conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES
 * OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT
 * HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,
 * WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR
 * OTHER DEALINGS IN THE SOFTWARE.
 */class Oi extends Tt{constructor(t){super(),this.autoClear=!0,this.canvas=typeof t=="string"?document.getElementById(t):t,this.mouseX=0,this.mouseY=0,this.drawRect=null,this.snapToPixelEnabled=!1,this.mouseInBounds=!1,this.tickOnUpdate=!0,this.mouseMoveOutside=!1,this.preventSelection=!0,this._pointerData={},this._pointerCount=0,this._primaryPointerID=null,this._mouseOverIntervalID=null,this._nextStage=null,this._prevStage=null,this.enableDOMEvents(!0)}get nextStage(){return this._nextStage}set nextStage(t){this._nextStage&&(this._nextStage._prevStage=null),t&&(t._prevStage=this),this._nextStage=t}update(t){if(!this.canvas||(this.tickOnUpdate&&this.tick(t),this.dispatchEvent("drawstart",!1,!0)===!1))return;V._snapToPixelEnabled=this.snapToPixelEnabled;let e=this.drawRect,s=this.canvas.getContext("2d");s.setTransform(1,0,0,1,0,0),this.autoClear&&(e?s.clearRect(e.x,e.y,e.width,e.height):s.clearRect(0,0,this.canvas.width+1,this.canvas.height+1)),s.save(),this.drawRect&&(s.beginPath(),s.rect(e.x,e.y,e.width,e.height),s.clip()),this.updateContext(s),this.draw(s,!1),s.restore(),this.dispatchEvent("drawend")}tick(t){if(!this.tickEnabled||this.dispatchEvent("tickstart",!1,!0)===!1)return;let e=new yt("tick");if(t)for(let s in t)t.hasOwnProperty(s)&&(e[s]=t[s]);this._tick(e),this.dispatchEvent("tickend")}handleEvent(t){t.type==="tick"&&this.update(t)}clear(){if(!this.canvas)return;let t=this.canvas.getContext("2d");t.setTransform(1,0,0,1,0,0),t.clearRect(0,0,this.canvas.width+1,this.canvas.height+1)}toDataURL(t,e="image/png"){let s,r=this.canvas.getContext("2d"),n=this.canvas.width,o=this.canvas.height;if(t){s=r.getImageData(0,0,n,o);var h=r.globalCompositeOperation;r.globalCompositeOperation="destination-over",r.fillStyle=t,r.fillRect(0,0,n,o)}let a=this.canvas.toDataURL(e);return t&&(r.putImageData(s,0,0),r.globalCompositeOperation=h),a}enableMouseOver(t=20){this._mouseOverIntervalID&&(clearInterval(this._mouseOverIntervalID),this._mouseOverIntervalID=null,t===0&&this._testMouseOver(!0)),!(t<=0)&&(this._mouseOverIntervalID=setInterval(()=>this._testMouseOver(),1e3/Math.min(50,t)))}enableDOMEvents(t=!0){let e=this._eventListeners;if(!t&&e){for(let s in e){let r=e[s];r.t.removeEventListener(s,r.f,!1)}this._eventListeners=null}else if(t&&!e&&this.canvas){let s=window.addEventListener?window:document;e=this._eventListeners={mouseup:{t:s,f:r=>this._handleMouseUp(r)},mousemove:{t:s,f:r=>this._handleMouseMove(r)},dblclick:{t:this.canvas,f:r=>this._handleDoubleClick(r)},mousedown:{t:this.canvas,f:r=>this._handleMouseDown(r)}};for(let r in e){let n=e[r];n.t.addEventListener&&n.t.addEventListener(r,n.f,!1)}}}clone(){throw"Stage cannot be cloned."}_getElementRect(t){let e;try{e=t.getBoundingClientRect()}catch{e={top:t.offsetTop,left:t.offsetLeft,width:t.offsetWidth,height:t.offsetHeight}}let s=(window.pageXOffset||document.scrollLeft||0)-(document.clientLeft||document.body.clientLeft||0),r=(window.pageYOffset||document.scrollTop||0)-(document.clientTop||document.body.clientTop||0),n=window.getComputedStyle?getComputedStyle(t,null):t.currentStyle,o=parseInt(n.paddingLeft)+parseInt(n.borderLeftWidth),h=parseInt(n.paddingTop)+parseInt(n.borderTopWidth),a=parseInt(n.paddingRight)+parseInt(n.borderRightWidth),u=parseInt(n.paddingBottom)+parseInt(n.borderBottomWidth);return{left:e.left+s+o,right:e.right+s-a,top:e.top+r+h,bottom:e.bottom+r-u}}_getPointerData(t){let e=this._pointerData[t];return e||(e=this._pointerData[t]={x:0,y:0}),e}_handleMouseMove(t=window.event){this._handlePointerMove(-1,t,t.pageX,t.pageY)}_handlePointerMove(t,e,s,r,n){if(this._prevStage&&n===void 0||!this.canvas)return;let o=this._nextStage,h=this._getPointerData(t),a=h.inBounds;this._updatePointerPosition(t,e,s,r),(a||h.inBounds||this.mouseMoveOutside)&&(t===-1&&h.inBounds===!a&&this._dispatchMouseEvent(this,a?"mouseleave":"mouseenter",!1,t,h,e),this._dispatchMouseEvent(this,"stagemousemove",!1,t,h,e),this._dispatchMouseEvent(h.target,"pressmove",!0,t,h,e)),o&&o._handlePointerMove(t,e,s,r,null)}_updatePointerPosition(t,e,s,r){let n=this._getElementRect(this.canvas);s-=n.left,r-=n.top;let o=this.canvas.width,h=this.canvas.height;s/=(n.right-n.left)/o,r/=(n.bottom-n.top)/h;let a=this._getPointerData(t);(a.inBounds=s>=0&&r>=0&&s<=o-1&&r<=h-1)?(a.x=s,a.y=r):this.mouseMoveOutside&&(a.x=s<0?0:s>o-1?o-1:s,a.y=r<0?0:r>h-1?h-1:r),a.posEvtObj=e,a.rawX=s,a.rawY=r,(t===this._primaryPointerID||t===-1)&&(this.mouseX=a.x,this.mouseY=a.y,this.mouseInBounds=a.inBounds)}_handleMouseUp(t){this._handlePointerUp(-1,t,!1)}_handlePointerUp(t,e,s,r){let n=this._nextStage,o=this._getPointerData(t);if(this._prevStage&&r===void 0)return;let h=null,a=o.target;!r&&(a||n)&&(h=this._getObjectsUnderPoint(o.x,o.y,null,!0)),o.down&&(this._dispatchMouseEvent(this,"stagemouseup",!1,t,o,e,h),o.down=!1),h===a&&this._dispatchMouseEvent(a,"click",!0,t,o,e),this._dispatchMouseEvent(a,"pressup",!0,t,o,e),s?(t==this._primaryPointerID&&(this._primaryPointerID=null),delete this._pointerData[t]):o.target=null,n&&n._handlePointerUp(t,e,s,r||h&&this)}_handleMouseDown(t){this._handlePointerDown(-1,t,t.pageX,t.pageY)}_handlePointerDown(t,e,s,r,n){this.preventSelection&&e.preventDefault(),(this._primaryPointerID==null||t===-1)&&(this._primaryPointerID=t),r!=null&&this._updatePointerPosition(t,e,s,r);let o=null,h=this._nextStage,a=this._getPointerData(t);n||(o=a.target=this._getObjectsUnderPoint(a.x,a.y,null,!0)),a.inBounds&&(this._dispatchMouseEvent(this,"stagemousedown",!1,t,a,e,o),a.down=!0),this._dispatchMouseEvent(o,"mousedown",!0,t,a,e),h&&h._handlePointerDown(t,e,s,r,n||o&&this)}_testMouseOver(t,e,s){if(this._prevStage&&e===void 0)return;let r=this._nextStage;if(!this._mouseOverIntervalID){r&&r._testMouseOver(t,e,s);return}let n=this._getPointerData(-1);if(!n||!t&&this.mouseX===this._mouseOverX&&this.mouseY===this._mouseOverY&&this.mouseInBounds)return;let o=n.posEvtObj,h=s||o&&o.target===this.canvas,a=null,u=-1,c="";!e&&(t||this.mouseInBounds&&h)&&(a=this._getObjectsUnderPoint(this.mouseX,this.mouseY,null,!0),this._mouseOverX=this.mouseX,this._mouseOverY=this.mouseY);let f=this._mouseOverTarget||[],g=f[f.length-1],w=this._mouseOverTarget=[],m=a;for(;m;)w.unshift(m),c||(c=m.cursor),m=m.parent;this.canvas.style.cursor=c,!e&&s&&(s.canvas.style.cursor=c);for(let p=0,b=w.length;p<b&&w[p]==f[p];p++)u=p;g!=a&&this._dispatchMouseEvent(g,"mouseout",!0,-1,n,o,a);for(let p=f.length-1;p>u;p--)this._dispatchMouseEvent(f[p],"rollout",!1,-1,n,o,a);for(let p=w.length-1;p>u;p--)this._dispatchMouseEvent(w[p],"rollover",!1,-1,n,o,g);g!=a&&this._dispatchMouseEvent(a,"mouseover",!0,-1,n,o,g),r&&r._testMouseOver(t,e||a&&this,s||h&&this)}_handleDoubleClick(t,e){let s=null,r=this._nextStage,n=this._getPointerData(-1);e||(s=this._getObjectsUnderPoint(n.x,n.y,null,!0),this._dispatchMouseEvent(s,"dblclick",!0,-1,n,t)),r&&r._handleDoubleClick(t,e||s&&this)}_dispatchMouseEvent(t,e,s,r,n,o,h){if(!t||!s&&!t.hasEventListener(e))return;let a=new be(e,s,!1,n.x,n.y,o,r,r===this._primaryPointerID||r===-1,n.rawX,n.rawY,h);t.dispatchEvent(a)}}/**
 * @license Canvas
 * Visit http://createjs.com/ for documentation, updates and examples.
 *
 * Copyright (c) 2017 gskinner.com, inc.
 *
 * Permission is hereby granted, free of charge, to any person
 * obtaining a copy of this software and associated documentation
 * files (the "Software"), to deal in the Software without
 * restriction, including without limitation the rights to use,
 * copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the
 * Software is furnished to do so, subject to the following
 * conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES
 * OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT
 * HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,
 * WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR
 * OTHER DEALINGS IN THE SOFTWARE.
 */function ve(l=1,t=1){let e;if(window.createjs!==void 0&&window.createjs.createCanvas!==void 0&&(e=window.createjs.createCanvas()),window.document!==void 0&&window.document.createElement!==void 0&&(e=document.createElement("canvas")),e!==void 0)return e.width=l,e.height=t,e;throw"Canvas not supported in this environment."}/**
 * @license Sprite
 * Visit http://createjs.com/ for documentation, updates and examples.
 *
 * Copyright (c) 2017 gskinner.com, inc.
 *
 * Permission is hereby granted, free of charge, to any person
 * obtaining a copy of this software and associated documentation
 * files (the "Software"), to deal in the Software without
 * restriction, including without limitation the rights to use,
 * copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the
 * Software is furnished to do so, subject to the following
 * conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES
 * OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT
 * HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,
 * WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR
 * OTHER DEALINGS IN THE SOFTWARE.
 */class Se extends V{constructor(t,e){super(),this.currentFrame=0,this.currentAnimation=null,this.paused=!0,this.spriteSheet=t,this.currentAnimationFrame=0,this.framerate=0,this._animation=null,this._currentFrame=null,this._skipAdvance=!1,this._webGLRenderStyle=V._StageGL_SPRITE,e!=null&&this.gotoAndPlay(e)}isVisible(){let t=this.cacheCanvas||this.spriteSheet.complete;return!!(this.visible&&this.alpha>0&&this.scaleX!=0&&this.scaleY!=0&&t)}draw(t,e){if(super.draw(t,e))return!0;this._normalizeFrame();let s=this.spriteSheet.getFrame(this._currentFrame|0);if(!s)return!1;let r=s.rect;return r.width&&r.height&&t.drawImage(s.image,r.x,r.y,r.width,r.height,-s.regX,-s.regY,r.width,r.height),!0}play(){this.paused=!1}stop(){this.paused=!0}gotoAndPlay(t){this.paused=!1,this._skipAdvance=!0,this._goto(t)}gotoAndStop(t){this.paused=!0,this._goto(t)}advance(t){let e=this.framerate||this.spriteSheet.framerate,s=e&&t!=null?t/(1e3/e):1;this._normalizeFrame(s)}getBounds(){return super.getBounds()||this.spriteSheet.getFrameBounds(this.currentFrame,this._rectangle)}clone(){return this._cloneProps(new Se(this.spriteSheet))}_cloneProps(t){return super._cloneProps(t),t.currentFrame=this.currentFrame,t.currentAnimation=this.currentAnimation,t.paused=this.paused,t.currentAnimationFrame=this.currentAnimationFrame,t.framerate=this.framerate,t._animation=this._animation,t._currentFrame=this._currentFrame,t._skipAdvance=this._skipAdvance,t}_tick(t){this.paused||(this._skipAdvance||this.advance(t&&t.delta),this._skipAdvance=!1),super._tick(t)}_normalizeFrame(t=0){let e=this._animation,s=this.paused,r=this._currentFrame;if(e){let n=e.speed||1,o=this.currentAnimationFrame,h=e.frames.length;if(o+t*n>=h){let a=e.next;if(this._dispatchAnimationEnd(e,r,s,a,h-1))return;if(a)return this._goto(a,t-(h-o)/n);this.paused=!0,o=e.frames.length-1}else o+=t*n;this.currentAnimationFrame=o,this._currentFrame=e.frames[o|0]}else{r=this._currentFrame+=t;let n=this.spriteSheet.getNumFrames();if(r>=n&&n>0&&!this._dispatchAnimationEnd(e,r,s,n-1)&&(this._currentFrame-=n)>=n)return this._normalizeFrame()}r=this._currentFrame|0,this.currentFrame!=r&&(this.currentFrame=r,this.dispatchEvent("change"))}_dispatchAnimationEnd(t,e,s,r,n){let o=t?t.name:null;if(this.hasEventListener("animationend")){let a=new yt("animationend");a.name=o,a.next=r,this.dispatchEvent(a)}let h=this._animation!=t||this._currentFrame!=e;return!h&&!s&&this.paused&&(this.currentAnimationFrame=n,h=!0),h}_goto(t,e=0){if(this.currentAnimationFrame=0,isNaN(t)){let s=this.spriteSheet.getAnimation(t);s&&(this._animation=s,this.currentAnimation=t,this._normalizeFrame(e))}else this.currentAnimation=this._animation=null,this._currentFrame=t,this._normalizeFrame()}}/**
 * @license BitmapText
 * Visit http://createjs.com/ for documentation, updates and examples.
 *
 * Copyright (c) 2017 gskinner.com, inc.
 *
 * Permission is hereby granted, free of charge, to any person
 * obtaining a copy of this software and associated documentation
 * files (the "Software"), to deal in the Software without
 * restriction, including without limitation the rights to use,
 * copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the
 * Software is furnished to do so, subject to the following
 * conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES
 * OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT
 * HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,
 * WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR
 * OTHER DEALINGS IN THE SOFTWARE.
 */class Et extends Tt{constructor(t="",e=null){super(),this.text=t,this.spriteSheet=e,this.lineHeight=0,this.letterSpacing=0,this.spaceWidth=0,this._oldProps={text:0,spriteSheet:0,lineHeight:0,letterSpacing:0,spaceWidth:0},this._oldStage=null,this._drawAction=null}draw(t,e){this.drawCache(t,e)||(this._updateState(),super.draw(t,e))}getBounds(){return this._updateText(),super.getBounds()}isVisible(){let t=this.cacheCanvas||this.spriteSheet&&this.spriteSheet.complete&&this.text;return!!(this.visible&&this.alpha>0&&this.scaleX!==0&&this.scaleY!==0&&t)}clone(){return this._cloneProps(new Et(this.text,this.spriteSheet))}addChild(){}addChildAt(){}removeChild(){}removeChildAt(){}removeAllChildren(){}_updateState(){this._updateText()}_cloneProps(t){return super._cloneProps(t),t.lineHeight=this.lineHeight,t.letterSpacing=this.letterSpacing,t.spaceWidth=this.spaceWidth,t}_getFrameIndex(t,e){let s,r=e.getAnimation(t);return r||(t!=(s=t.toUpperCase())||t!=(s=t.toLowerCase())||(s=null),s&&(r=e.getAnimation(s))),r&&r.frames[0]}_getFrame(t,e){let s=this._getFrameIndex(t,e);return s==null?s:e.getFrame(s)}_getLineHeight(t){let e=this._getFrame("1",t)||this._getFrame("T",t)||this._getFrame("L",t)||t.getFrame(0);return e?e.rect.height:1}_getSpaceWidth(t){let e=this._getFrame("1",t)||this._getFrame("l",t)||this._getFrame("e",t)||this._getFrame("a",t)||t.getFrame(0);return e?e.rect.width:1}_tick(t){let e=this.stage;e&&e.on("drawstart",this._updateText,this,!0),super._tick(t)}_updateText(){let t=0,e=0,s=this._oldProps,r=!1,n=this.spaceWidth,o=this.lineHeight,h=this.spriteSheet,a=Et._spritePool,u=this.children,c=0,f=u.length,g;for(let m in s)s[m]!=this[m]&&(s[m]=this[m],r=!0);if(!r)return;let w=!!this._getFrame(" ",h);!w&&!n&&(n=this._getSpaceWidth(h)),o||(o=this._getLineHeight(h));for(let m=0,p=this.text.length;m<p;m++){let b=this.text.charAt(m);if(b===" "&&!w){t+=n;continue}else if(b===`
`||b==="\r"){b==="\r"&&this.text.charAt(m+1)===`
`&&m++,t=0,e+=o;continue}let d=this._getFrameIndex(b,h);d!=null&&(c<f?g=u[c]:(u.push(g=a.length?a.pop():new Se),g.parent=this,f++),g.spriteSheet=h,g.gotoAndStop(d),g.x=t,g.y=e,c++,t+=g.getBounds().width+this.letterSpacing)}for(;f>c;)a.push(g=u.pop()),g.parent=null,f--;a.length>Et.maxPoolSize&&(a.length=Et.maxPoolSize)}}Et.maxPoolSize=100;Et._spritePool=[];/**
 * @license Graphics
 * Visit http://createjs.com/ for documentation, updates and examples.
 *
 * Copyright (c) 2017 gskinner.com, inc.
 *
 * Permission is hereby granted, free of charge, to any person
 * obtaining a copy of this software and associated documentation
 * files (the "Software"), to deal in the Software without
 * restriction, including without limitation the rights to use,
 * copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the
 * Software is furnished to do so, subject to the following
 * conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES
 * OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT
 * HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,
 * WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR
 * OTHER DEALINGS IN THE SOFTWARE.
 */class st{constructor(){this.command=null,this._stroke=null,this._strokeStyle=null,this._oldStrokeStyle=null,this._strokeDash=null,this._oldStrokeDash=null,this._fill=null,this._strokeIgnoreScale=!1,this._commitIndex=0,this._instructions=[],this._activeInstructions=[],this._dirty=!1,this._storeIndex=0,this.curveTo=this.quadraticCurveTo,this.drawRect=this.rect,this.mt=this.moveTo,this.lt=this.lineTo,this.at=this.arcTo,this.bt=this.bezierCurveTo,this.qt=this.quadraticCurveTo,this.a=this.arc,this.r=this.rect,this.cp=this.closePath,this.c=this.clear,this.f=this.beginFill,this.lf=this.beginLinearGradientFill,this.rf=this.beginRadialGradientFill,this.bf=this.beginBitmapFill,this.ef=this.endFill,this.ss=this.setStrokeStyle,this.sd=this.setStrokeDash,this.s=this.beginStroke,this.ls=this.beginLinearGradientStroke,this.rs=this.beginRadialGradientStroke,this.bs=this.beginBitmapStroke,this.es=this.endStroke,this.dr=this.drawRect,this.rr=this.drawRoundRect,this.rc=this.drawRoundRectComplex,this.dc=this.drawCircle,this.de=this.drawEllipse,this.dp=this.drawPolyStar,this.p=this.decodePath,this.clear()}static getRGB(t,e,s,r){return t!=null&&s==null&&(r=e,s=t&255,e=t>>8&255,t=t>>16&255),r==null?`rgb(${t},${e},${s})`:`rgba(${t},${e},${s},${r})`}static getHSL(t,e,s,r){return r==null?`hsl(${t%360},${e}%,${s}%)`:`hsl(${t%360},${e}%,${s}%,${r})`}get instructions(){return this._updateInstructions(),this._instructions}isEmpty(){return!(this._instructions.length||this._activeInstructions.length)}draw(t,e){this._updateInstructions();let s=this._instructions;const r=s.length;for(let n=this._storeIndex;n<r;n++)s[n].exec(t,e)}drawAsPath(t){this._updateInstructions();let e,s=this._instructions;const r=s.length;for(let n=this._storeIndex;n<r;n++)(e=s[n]).path!==!1&&e.exec(t)}moveTo(t,e){return this.append(new Be(t,e),!0)}lineTo(t,e){return this.append(new Ne(t,e))}arcTo(t,e,s,r,n){return this.append(new Oe(t,e,s,r,n))}arc(t,e,s,r,n,o){return this.append(new Ae(t,e,s,r,n,o))}quadraticCurveTo(t,e,s,r){return this.append(new ze(t,e,s,r))}bezierCurveTo(t,e,s,r,n,o){return this.append(new Ge(t,e,s,r,n,o))}rect(t,e,s,r){return this.append(new qe(t,e,s,r))}closePath(){return this._activeInstructions.length?this.append(new Ye):this}clear(){return this._instructions.length=this._activeInstructions.length=this._commitIndex=0,this._strokeStyle=this._oldStrokeStyle=this._stroke=this._fill=this._strokeDash=this._oldStrokeDash=null,this._dirty=this._strokeIgnoreScale=!1,this}beginFill(t){return this._setFill(t?new Rt(t):null)}beginLinearGradientFill(t,e,s,r,n,o){return this._setFill(new Rt().linearGradient(t,e,s,r,n,o))}beginRadialGradientFill(t,e,s,r,n,o,h,a){return this._setFill(new Rt().radialGradient(t,e,s,r,n,o,h,a))}beginBitmapFill(t,e,s){return this._setFill(new Rt(null,s).bitmap(t,e))}endFill(){return this.beginFill()}setStrokeStyle(t,e=0,s=0,r=10,n=!1){return this._updateInstructions(!0),this._strokeStyle=this.command=new Ve(t,e,s,r,n),this._stroke&&(this._stroke.ignoreScale=n),this._strokeIgnoreScale=n,this}setStrokeDash(t,e=0){return this._updateInstructions(!0),this._strokeDash=this.command=new Xe(t,e),this}beginStroke(t){return this._setStroke(t?new Ot(t):null)}beginLinearGradientStroke(t,e,s,r,n,o){return this._setStroke(new Ot().linearGradient(t,e,s,r,n,o))}beginRadialGradientStroke(t,e,s,r,n,o,h,a){return this._setStroke(new Ot().radialGradient(t,e,s,r,n,o,h,a))}beginBitmapStroke(t,e="repeat"){return this._setStroke(new Ot().bitmap(t,e))}endStroke(){return this.beginStroke()}drawRoundRect(t,e,s,r,n){return this.drawRoundRectComplex(t,e,s,r,n,n,n,n)}drawRoundRectComplex(t,e,s,r,n,o,h,a){return this.append(new Ue(t,e,s,r,n,o,h,a))}drawCircle(t,e,s){return this.append(new We(t,e,s))}drawEllipse(t,e,s,r){return this.append(new Qe(t,e,s,r))}drawPolyStar(t,e,s,r,n,o){return this.append(new Je(t,e,s,r,n,o))}append(t,e){return this._activeInstructions.push(t),this.command=t,e||(this._dirty=!0),this}decodePath(t){let e=[this.moveTo,this.lineTo,this.quadraticCurveTo,this.bezierCurveTo,this.closePath],s=[2,2,4,6,0],r=0;const n=t.length;let o=[],h=0,a=0,u=st._BASE_64;for(;r<n;){let c=t.charAt(r),f=u[c],g=f>>3,w=e[g];if(!w||f&3)throw`Bad path data (@${r}):c`;const m=s[g];g||(h=a=0),o.length=0,r++;let p=(f>>2&1)+2;for(let b=0;b<m;b++){let d=u[t.charAt(r)],v=d>>5?-1:1;d=(d&31)<<6|u[t.charAt(r+1)],p===3&&(d=d<<6|u[t.charAt(r+2)]),d=v*d/10,b%2?h=d+=h:a=d+=a,o[b]=d,r+=p}w.apply(this,o)}return this}store(){return this._updateInstructions(!0),this._storeIndex=this._instructions.length,this}unstore(){return this._storeIndex=0,this}clone(){let t=new st;return t.command=this.command,t._stroke=this._stroke,t._strokeStyle=this._strokeStyle,t._strokeDash=this._strokeDash,t._strokeIgnoreScale=this._strokeIgnoreScale,t._fill=this._fill,t._instructions=this._instructions.slice(),t._commitIndex=this._commitIndex,t._activeInstructions=this._activeInstructions.slice(),t._dirty=this._dirty,t._storeIndex=this._storeIndex,t}toString(){return`[${this.constructor.name}]`}_updateInstructions(t){let e=this._instructions,s=this._activeInstructions,r=this._commitIndex;if(this._dirty&&s.length){e.length=r,e.push(st.beginCmd);const n=s.length,o=e.length;e.length=o+n;for(let h=0;h<n;h++)e[h+o]=s[h];this._fill&&e.push(this._fill),this._stroke&&(this._strokeDash!==this._oldStrokeDash&&e.push(this._strokeDash),this._strokeStyle!==this._oldStrokeStyle&&e.push(this._strokeStyle),t&&(this._oldStrokeDash=this._strokeDash,this._oldStrokeStyle=this._strokeStyle),e.push(this._stroke)),this._dirty=!1}t&&(s.length=0,this._commitIndex=e.length)}_setFill(t){return this._updateInstructions(!0),this.command=this._fill=t,this}_setStroke(t){return this._updateInstructions(!0),(this.command=this._stroke=t)&&(t.ignoreScale=this._strokeIgnoreScale),this}static get LineTo(){return Ne}static get MoveTo(){return Be}static get ArcTo(){return Oe}static get Arc(){return Ae}static get QuadraticCurveTo(){return ze}static get BezierCurveTo(){return Ge}static get Rect(){return qe}static get ClosePath(){return Ye}static get BeginPath(){return ps}static get Fill(){return Rt}static get Stroke(){return Ot}static get StrokeStyle(){return Ve}static get StrokeDash(){return Xe}static get RoundRect(){return Ue}static get Circle(){return We}static get Ellipse(){return Qe}static get PolyStar(){return Je}}class Ne{constructor(t,e){this.x=t,this.y=e}exec(t){t.lineTo(this.x,this.y)}}class Be{constructor(t,e){this.x=t,this.y=e}exec(t){t.moveTo(this.x,this.y)}}class Oe{constructor(t,e,s,r,n){this.x1=t,this.y1=e,this.x2=s,this.y2=r,this.radius=n}exec(t){t.arcTo(this.x1,this.y1,this.x2,this.y2,this.radius)}}class Ae{constructor(t,e,s,r,n,o=!1){this.x=t,this.y=e,this.radius=s,this.startAngle=r,this.endAngle=n,this.anticlockwise=o}exec(t){t.arc(this.x,this.y,this.radius,this.startAngle,this.endAngle,this.anticlockwise)}}class ze{constructor(t,e,s,r){this.cpx=t,this.cpy=e,this.x=s,this.y=r}exec(t){t.quadraticCurveTo(this.cpx,this.cpy,this.x,this.y)}}class Ge{constructor(t,e,s,r,n,o){this.cp1x=t,this.cp1y=e,this.cp2x=s,this.cp2y=r,this.x=n,this.y=o}exec(t){t.bezierCurveTo(this.cp1x,this.cp1y,this.cp2x,this.cp2y,this.x,this.y)}}class qe{constructor(t,e,s,r){this.x=t,this.y=e,this.w=s,this.h=r}exec(t){t.rect(this.x,this.y,this.w,this.h)}}class Ye{constructor(){}exec(t){t.closePath()}}class ps{constructor(){}exec(t){t.beginPath()}}class Rt{constructor(t,e){this.style=t,this.matrix=e,this.path=!1}exec(t){if(!this.style)return;t.fillStyle=this.style;let e=this.matrix;e&&(t.save(),t.transform(e.a,e.b,e.c,e.d,e.tx,e.ty)),t.fill(),e&&t.restore()}linearGradient(t,e,s,r,n,o){let h=this.style=st._ctx.createLinearGradient(s,r,n,o);const a=t.length;for(let u=0;u<a;u++)h.addColorStop(e[u],t[u]);return h.props={colors:t,ratios:e,x0:s,y0:r,x1:n,y1:o,type:"linear"},this}radialGradient(t,e,s,r,n,o,h,a){let u=this.style=st._ctx.createRadialGradient(s,r,n,o,h,a);const c=t.length;for(let f=0;f<c;f++)u.addColorStop(e[f],t[f]);return u.props={colors:t,ratios:e,x0:s,y0:r,r0:n,x1:o,y1:h,r1:a,type:"radial"},this}bitmap(t,e=""){if(t.naturalWidth||t.getContext||t.readyState>=2){let s=this.style=st._ctx.createPattern(t,e);s.props={image:t,repetition:e,type:"bitmap"}}return this}}class Ot extends Rt{constructor(t,e){super(),this.style=t,this.ignoreScale=e,this.path=!1}exec(t){this.style&&(t.strokeStyle=this.style,this.ignoreScale&&(t.save(),t.setTransform(1,0,0,1,0,0)),t.stroke(),this.ignoreScale&&t.restore())}}class Ve{constructor(t=1,e="butt",s="miter",r=10,n=!1){this.width=t,this.caps=e,this.joints=s,this.miterLimit=r,this.ignoreScale=n,this.path=!1}exec(t){t.lineWidth=this.width,t.lineCap=isNaN(this.caps)?this.caps:st._STROKE_CAPS_MAP[this.caps],t.lineJoin=isNaN(this.joints)?this.joints:st._STROKE_JOINTS_MAP[this.joints],t.miterLimit=this.miterLimit,t.ignoreScale=this.ignoreScale}}class Xe{constructor(t=[],e=0){this.segments=t,this.offset=e}exec(t){t.setLineDash&&(t.setLineDash(this.segments),t.lineDashOffset=this.offset)}}class Ue{constructor(t,e,s,r,n,o,h,a){this.x=t,this.y=e,this.w=s,this.h=r,this.radiusTL=n,this.radiusTR=o,this.radiusBR=h,this.radiusBL=a}exec(t){let e=(this.w<this.h?this.w:this.h)/2,s=0,r=0,n=0,o=0,h=this.x,a=this.y,u=this.w,c=this.h,f=this.radiusTL,g=this.radiusTR,w=this.radiusBR,m=this.radiusBL;f<0&&(f*=s=-1),f>e&&(f=e),g<0&&(g*=r=-1),g>e&&(g=e),w<0&&(w*=n=-1),w>e&&(w=e),m<0&&(m*=o=-1),m>e&&(m=e),t.moveTo(h+u-g,a),t.arcTo(h+u+g*r,a-g*r,h+u,a+g,g),t.lineTo(h+u,a+c-w),t.arcTo(h+u+w*n,a+c+w*n,h+u-w,a+c,w),t.lineTo(h+m,a+c),t.arcTo(h-m*o,a+c+m*o,h,a+c-m,m),t.lineTo(h,a+f),t.arcTo(h-f*s,a-f*s,h+f,a,f),t.closePath()}}class We{constructor(t,e,s){this.x=t,this.y=e,this.radius=s}exec(t){t.arc(this.x,this.y,this.radius,0,Math.PI*2)}}class Qe{constructor(t,e,s,r){this.x=t,this.y=e,this.w=s,this.h=r}exec(t){let e=this.x,s=this.y,r=this.w,n=this.h,o=.5522848,h=r/2*o,a=n/2*o,u=e+r,c=s+n,f=e+r/2,g=s+n/2;t.moveTo(e,g),t.bezierCurveTo(e,g-a,f-h,s,f,s),t.bezierCurveTo(f+h,s,u,g-a,u,g),t.bezierCurveTo(u,g+a,f+h,c,f,c),t.bezierCurveTo(f-h,c,e,g+a,e,g)}}class Je{constructor(t,e,s,r,n=0,o=0){this.x=t,this.y=e,this.radius=s,this.sides=r,this.pointSize=n,this.angle=o}exec(t){let e=this.x,s=this.y,r=this.radius,n=this.angle/180*Math.PI,o=this.sides,h=1-this.pointSize,a=Math.PI/o;t.moveTo(e+Math.cos(n)*r,s+Math.sin(n)*r);for(let u=0;u<o;u++)n+=a,h!=1&&t.lineTo(e+Math.cos(n)*r*h,s+Math.sin(n)*r*h),n+=a,t.lineTo(e+Math.cos(n)*r,s+Math.sin(n)*r);t.closePath()}}st.beginCmd=new ps;st._BASE_64={A:0,B:1,C:2,D:3,E:4,F:5,G:6,H:7,I:8,J:9,K:10,L:11,M:12,N:13,O:14,P:15,Q:16,R:17,S:18,T:19,U:20,V:21,W:22,X:23,Y:24,Z:25,a:26,b:27,c:28,d:29,e:30,f:31,g:32,h:33,i:34,j:35,k:36,l:37,m:38,n:39,o:40,p:41,q:42,r:43,s:44,t:45,u:46,v:47,w:48,x:49,y:50,z:51,0:52,1:53,2:54,3:55,4:56,5:57,6:58,7:59,8:60,9:61,"+":62,"/":63};st._STROKE_CAPS_MAP=["butt","round","square"];st._STROKE_JOINTS_MAP=["miter","round","bevel"];st._ctx=ve().getContext("2d");/**
 * @license AbstractTween
 * Visit http://createjs.com/ for documentation, updates and examples.
 *
 * Copyright (c) 2017 gskinner.com, inc.
 *
 * Permission is hereby granted, free of charge, to any person
 * obtaining a copy of this software and associated documentation
 * files (the "Software"), to deal in the Software without
 * restriction, including without limitation the rights to use,
 * copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the
 * Software is furnished to do so, subject to the following
 * conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES
 * OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT
 * HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,
 * WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR
 * OTHER DEALINGS IN THE SOFTWARE.
 */class ws extends vt{constructor(t){super(),this.ignoreGlobalPause=!1,this.loop=0,this.useTicks=!1,this.reversed=!1,this.bounce=!1,this.timeScale=1,this.duration=0,this.position=0,this.rawPosition=-1,this._paused=!0,this._next=null,this._prev=null,this._parent=null,this._labels=null,this._labelList=null,t&&(this.useTicks=!!t.useTicks,this.ignoreGlobalPause=!!t.ignoreGlobalPause,this.loop=t.loop===!0?-1:t.loop||0,this.reversed=!!t.reversed,this.bounce=!!t.bounce,this.timeScale=t.timeScale||1,t.onChange&&this.addEventListener("change",t.onChange),t.onComplete&&this.addEventListener("complete",t.onComplete))}get labels(){let t=this._labelList;if(!t){t=this._labelList=[];let e=this._labels;for(let s in e)t.push({label:s,position:e[s]});t.sort((s,r)=>s.position-r.position)}return t}set labels(t){this._labels=t,this._labelList=null}get currentLabel(){let t=this.labels,e=this.position;for(let s=0,r=t.length;s<r&&!(e<t[s].position);s++);return i===0?null:t[i-1].label}get paused(){return this._paused}set paused(t){z._register(this,t),this._paused=t}advance(t,e=!1){this.setPosition(this.rawPosition+t*this.timeScale,e)}setPosition(t,e=!1,s=!1,r){const n=this.duration,o=this.loop,h=this.rawPosition;let a=0,u=0,c=!1;if(t<0&&(t=0),n===0){if(c=!0,h!==-1)return c}else{if(a=t/n|0,u=t-a*n,c=o!==-1&&t>=o*n+n,c&&(t=(u=n)*(a=o)+n),t===h)return c;!this.reversed!=!(this.bounce&&a%2)&&(u=n-u)}this.position=u,this.rawPosition=t,this._updatePosition(s,c),c&&(this.paused=!0),r&&r(this),e||this._runActions(h,t,s,!s&&h===-1),this.dispatchEvent("change"),c&&this.dispatchEvent("complete")}calculatePosition(t){const e=this.duration,s=this.loop;let r=0,n=0;return e===0?0:(s!==-1&&t>=s*e+e?(n=e,r=s):t<0?n=0:(r=t/e|0,n=t-r*e),!this.reversed!=!(this.bounce&&r%2)?e-n:n)}addLabel(t,e){this._labels||(this._labels={}),this._labels[t]=e;const s=this._labelList;if(s){for(let r=0,n=s.length;r<n&&!(e<s[r].position);r++);s.splice(i,0,{label:t,position:e})}}gotoAndPlay(t){this.paused=!1,this._goto(t)}gotoAndStop(t){this.paused=!0,this._goto(t)}resolve(t){const e=Number(t);return isNaN(e)?this._labels&&this._labels[t]:e}toString(){return`[${this.constructor.name}${this.name?` (name=${this.name})`:""}]`}clone(){throw"AbstractTween cannot be cloned."}_init(t){(!t||!t.paused)&&(this.paused=!1),t&&t.position!=null&&this.setPosition(t.position)}_goto(t){const e=this.resolve(t);e!=null&&this.setPosition(e,!1,!0)}_runActions(t,e,s,r){if(!this._actionHead&&!this.tweens)return;const n=this.duration,o=this.loop;let h=this.reversed,a=this.bounce,u,c,f,g;if(n===0?(u=c=f=g=0,h=a=!1):(u=t/n|0,c=e/n|0,f=t-u*n,g=e-c*n),o!==-1&&(c>o&&(g=n,c=o),u>o&&(f=n,u=o)),s)return this._runActionsRange(g,g,s,r);if(u===c&&f===g&&!s&&!r)return;u===-1&&(u=f=0);const w=t<=e;let m=u;do{let p=!h!=!(a&&m%2),b=m===u?f:w?0:n,d=m===c?g:w?n:0;if(p&&(b=n-b,d=n-d),!(a&&m!==u&&b===d)){if(this._runActionsRange(b,d,s,r||m!==u&&!a))return!0}r=!1}while(w&&++m<=c||!w&&--m>=c)}_runActionsRange(t,e,s,r){throw"_runActionsRange is abstract and must be overridden by a subclass."}_updatePosition(t,e){throw"_updatePosition is abstract and must be overridden by a subclass."}}/**
 * @license Ease
 * Visit http://createjs.com/ for documentation, updates and examples.
 *
 * Copyright (c) 2017 gskinner.com, inc.
 *
 * Permission is hereby granted, free of charge, to any person
 * obtaining a copy of this software and associated documentation
 * files (the "Software"), to deal in the Software without
 * restriction, including without limitation the rights to use,
 * copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the
 * Software is furnished to do so, subject to the following
 * conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES
 * OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT
 * HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,
 * WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR
 * OTHER DEALINGS IN THE SOFTWARE.
 */function Ai(l){return l}/**
 * @license Tween
 * Visit http://createjs.com/ for documentation, updates and examples.
 *
 * Copyright (c) 2017 gskinner.com, inc.
 *
 * Permission is hereby granted, free of charge, to any person
 * obtaining a copy of this software and associated documentation
 * files (the "Software"), to deal in the Software without
 * restriction, including without limitation the rights to use,
 * copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the
 * Software is furnished to do so, subject to the following
 * conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES
 * OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT
 * HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,
 * WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR
 * OTHER DEALINGS IN THE SOFTWARE.
 */class z extends ws{constructor(t,e){super(e),this.pluginData=null,this.target=t,this.passive=!1,this._stepHead=new Ke(null,0,0,{},null,!0),this._stepTail=this._stepHead,this._stepPosition=0,this._actionHead=null,this._actionTail=null,this._plugins=null,this._pluginIds=null,this._injected=null,e&&(this.pluginData=e.pluginData,e.override&&z.removeTweens(t)),this.pluginData||(this.pluginData={}),this._init(e)}static get(t,e){return new z(t,e)}static tick(t,e){let s=z._tweenHead;for(;s;){let r=s._next;e&&!s.ignoreGlobalPause||s._paused||s.advance(s.useTicks?1:t),s=r}}static handleEvent(t){t.type==="tick"&&this.tick(t.delta,t.paused)}static removeTweens(t){if(!t.tweenjs_count)return;let e=z._tweenHead;for(;e;){let s=e._next;e.target===t&&(e.paused=!0),e=s}t.tweenjs_count=0}static removeAllTweens(){let t=z._tweenHead;for(;t;){let e=t._next;t._paused=!0,t.target&&(t.target.tweenjs_count=0),t._next=t._prev=null,t=e}z._tweenHead=z._tweenTail=null}static hasActiveTweens(t){return t?!!t.tweenjs_count:!!z._tweenHead}static installPlugin(t,e){t.install(e);const s=t.priority=t.priority||0,r=z._plugins=z._plugins||[];for(let n=0,o=r.length;n<o&&!(s<r[n].priority);n++);r.splice(i,0,t)}static _register(t,e){const s=t.target;if(!e&&t._paused){s&&(s.tweenjs_count=s.tweenjs_count?s.tweenjs_count+1:1);let r=z._tweenTail;r?(z._tweenTail=r._next=t,t._prev=r):z._tweenHead=z._tweenTail=t,z._inited||(gt.addEventListener("tick",z),z._inited=!0)}else if(e&&!t._paused){s&&s.tweenjs_count--;let r=t._next,n=t._prev;r?r._prev=n:z._tweenTail=n,n?n._next=r:z._tweenHead=r,t._next=t._prev=null}}wait(t,e=!1){return t>0&&this._addStep(+t,this._stepTail.props,null,e),this}to(t,e=0,s=Ai){e<0&&(e=0);const r=this._addStep(+e,null,s);return this._appendProps(t,r),this}label(t){return this.addLabel(t,this.duration),this}call(t,e,s){return this._addAction(s||this.target,t,e||[this])}set(t,e){return this._addAction(e||this.target,this._set,[t])}play(t){return this._addAction(t||this,this._set,[{paused:!1}])}pause(t){return this._addAction(t||this,this._set,[{paused:!1}])}clone(){throw"Tween can not be cloned."}_addPlugin(t){let e=this._pluginIds||(this._pluginIds={}),s=t.id;if(!s||e[s])return;e[s]=!0;let r=this._plugins||(this._plugins=[]),n=t.priority||0;for(let o=0,h=r.length;o<h;o++)if(n<r[o].priority){r.splice(o,0,t);return}r.push(t)}_updatePosition(t,e){let s=this._stepHead.next,r=this.position,n=this.duration;if(this.target&&s){let o=s.next;for(;o&&o.t<=r;)s=s.next,o=s.next;let h=e?n===0?1:r/n:(r-s.t)/s.d;this._updateTargetProps(s,h,e)}this._stepPosition=s?r-s.t:0}_updateTargetProps(t,e,s){if(this.passive=!!t.passive)return;let r,n,o,h,a=t.prev.props,u=t.props;(h=t.ease)&&(e=h(e,0,1,1));let c=this._plugins;t:for(let f in a){if(n=a[f],o=u[f],n!==o&&typeof n=="number"?r=n+(o-n)*e:r=e>=1?o:n,c)for(let g=0,w=c.length;g<w;g++){let m=c[g].change(this,t,f,r,e,s);if(m===z.IGNORE)continue t;m!==void 0&&(r=m)}this.target[f]=r}}_runActionsRange(t,e,s,r){let n=t>e,o=n?this._actionTail:this._actionHead,h=e,a=t;n&&(h=t,a=e);let u=this.position;for(;o;){let c=o.t;if((c===e||c>a&&c<h||r&&c===t)&&(o.funct.apply(o.scope,o.params),u!==this.position))return!0;o=n?o.prev:o.next}}_appendProps(t,e,s){let r=this._stepHead.props,n=this.target,o=z._plugins,h,a,u,c,f,g=e.prev,w=g.props,m=e.props||(e.props=this._cloneProps(w)),p={};for(h in t)if(t.hasOwnProperty(h)&&(p[h]=m[h]=t[h],r[h]===void 0)){if(c=void 0,o){for(a=o.length-1;a>=0;a--)if(u=o[a].init(this,h,c),u!==void 0&&(c=u),c===z.IGNORE){(ignored=ignored||{})[h]=!0,delete m[h],delete p[h];break}}c!==z.IGNORE&&(c===void 0&&(c=n[h]),w[h]=c===void 0?null:c)}for(h in p){u=t[h];let b,d=g;for(;(b=d)&&(d=b.prev);)if(d.props!==b.props){if(d.props[h]!==void 0)break;d.props[h]=w[h]}}if(s&&(o=this._plugins))for(a=o.length-1;a>=0;a--)o[a].step(this,e,p);(f=this._injected)&&(this._injected=null,this._appendProps(f,e,!1))}_injectProp(t,e){let s=this._injected||(this._injected={});s[t]=e}_addStep(t,e,s,r=!1){let n=new Ke(this._stepTail,this.duration,t,e,s,r);return this.duration+=t,this._stepTail=this._stepTail.next=n}_addAction(t,e,s){let r=new zi(this._actionTail,this.duration,t,e,s);return this._actionTail?this._actionTail.next=r:this._actionHead=r,this._actionTail=r,this}_set(t){for(let e in t)this[e]=t[e]}_cloneProps(t){let e={};for(let s in t)e[s]=t[s];return e}}{let l=z.prototype;l.w=l.wait,l.t=l.to,l.c=l.call,l.s=l.set}z.IGNORE={};z._tweens=[];z._plugins=null;z._tweenHead=null;z._tweenTail=null;class Ke{constructor(t,e,s,r,n,o){this.next=null,this.prev=t,this.t=e,this.d=s,this.props=r,this.ease=n,this.passive=o,this.index=t?t.index+1:0}}class zi{constructor(t,e,s,r,n){this.next=null,this.d=0,this.prev=t,this.t=e,this.scope=s,this.funct=r,this.params=n}}/**
 * @license Timeline
 * Visit http://createjs.com/ for documentation, updates and examples.
 *
 * Copyright (c) 2010 gskinner.com, inc.
 *
 * Permission is hereby granted, free of charge, to any person
 * obtaining a copy of this software and associated documentation
 * files (the "Software"), to deal in the Software without
 * restriction, including without limitation the rights to use,
 * copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the
 * Software is furnished to do so, subject to the following
 * conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES
 * OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT
 * HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,
 * WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR
 * OTHER DEALINGS IN THE SOFTWARE.
 */class Gi extends ws{constructor(t={}){super(t),this.tweens=[],t.tweens&&this.addTween(...t.tweens),t.labels&&(this.labels=t.labels),this._init(t)}addTween(...t){const e=t.length;if(e===1){const s=t[0];this.tweens.push(s),s._parent=this,s.paused=!0;let r=s.duration;return s.loop>0&&(r*=s.loop+1),r>this.duration&&(this.duration=r),this.rawPosition>=0&&s.setPosition(this.rawPosition),s}if(e>1){for(let s=0;s<e;s++)this.addTween(t[s]);return t[e-1]}return null}removeTween(...t){const e=t.length;if(e===1){const s=this.tweens,r=t[0];let n=s.length;for(;n--;)if(s[n]===r)return s.splice(n,1),r._parent=null,r.duration>=this.duration&&this.updateDuration(),!0;return!1}if(e>1){let s=!0;for(let r=0;r<e;r++)s=s&&this.removeTween(t[r]);return s}return!0}updateDuration(){this.duration=0;for(let t=0,e=this.tweens.length;t<e;t++){let s=this.tweens[t],r=s.duration;s.loop>0&&(r*=s.loop+1),r>this.duration&&(this.duration=r)}}clone(){throw"Timeline can not be cloned."}_updatePosition(t,e){const s=this.position;for(let r=0,n=this.tweens.length;r<n;r++)this.tweens[r].setPosition(s,!0,t)}_runActionsRange(t,e,s,r){const n=this.position;for(let o=0,h=this.tweens.length;o<h;o++)if(this.tweens[o]._runActions(t,e,s,r),n!==this.position)return!0}}/**
 * @license MovieClip
 * Visit http://createjs.com/ for documentation, updates and examples.
 *
 * Copyright (c) 2017 gskinner.com, inc.
 *
 * Permission is hereby granted, free of charge, to any person
 * obtaining a copy of this software and associated documentation
 * files (the "Software"), to deal in the Software without
 * restriction, including without limitation the rights to use,
 * copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the
 * Software is furnished to do so, subject to the following
 * conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES
 * OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT
 * HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,
 * WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR
 * OTHER DEALINGS IN THE SOFTWARE.
 */class Z extends Tt{constructor(t){super(),!Z.inited&&Z.init(),this.mode=t.mode!=null?t.mode:Z.INDEPENDENT,this.startPosition=t.startPosition!=null?t.startPosition:0,typeof t.loop=="number"?this.loop=t.loop:t.loop===!1?this.loop=0:this.loop=-1,this.currentFrame=0,this.timeline=new Gi(Object.assign({useTicks:!0,paused:!0},t)),this.paused=t.paused!=null?t.paused:!1,this.actionsEnabled=!0,this.autoReset=!0,this.frameBounds=this.frameBounds||t.frameBounds,this.framerate=null,this._synchOffset=0,this._rawPosition=-1,this._t=0,this._managed={},this._bound_resolveState=this._resolveState.bind(this)}static init(){Z.inited||(ne.install(),Z.inited=!0)}get labels(){return this.timeline.labels}get currentLabel(){return this.timeline.currentLabel}get duration(){return this.timeline.duration}get totalFrames(){return this.duration}isVisible(){return!!(this.visible&&this.alpha>0&&this.scaleX!=0&&this.scaleY!=0)}draw(t,e){return this.drawCache(t,e)||(this._updateState(),super.draw(t,e)),!0}play(){this.paused=!1}stop(){this.paused=!0}gotoAndPlay(t){this.play(),this._goto(t)}gotoAndStop(t){this.stop(),this._goto(t)}advance(t){if(this.mode!==Z.INDEPENDENT)return;let e=this,s=e.framerate;for(;(e=e.parent)&&s===null;)e.mode===Z.INDEPENDENT&&(s=e._framerate);if(this._framerate=s,this.paused)return;let r=s!==null&&s!==-1&&t!==null?t/(1e3/s)+this._t:1,n=r|0;for(this._t=r-n;n--;)this._updateTimeline(this._rawPosition+1,!1)}clone(){throw"MovieClip cannot be cloned."}_updateState(){(this._rawPosition===-1||this.mode!==Z.INDEPENDENT)&&this._updateTimeline(-1)}_tick(t){this.advance(t&&t.delta),super._tick(t)}_goto(t){let e=this.timeline.resolve(t);e!=null&&(this._t=0,this._updateTimeline(e,!0))}_reset(){this._rawPosition=-1,this._t=this.currentFrame=0,this.paused=!1}_updateTimeline(t,e){let s=this.mode!==Z.INDEPENDENT,r=this.timeline;s&&(t=this.startPosition+(this.mode===Z.SINGLE_FRAME?0:this._synchOffset)),t<1&&(t=0),!(this._rawPosition===t&&!s)&&(this._rawPosition=t,r.loop=this.loop,r.setPosition(t,s||!this.actionsEnabled,e,this._bound_resolveState))}_renderFirstFrame(){const t=this.timeline,e=t.rawPosition;t.setPosition(0,!0,!0,this._bound_resolveState),t.rawPosition=e}_resolveState(){let t=this.timeline;this.currentFrame=t.position;for(let r in this._managed)this._managed[r]=1;let e=t.tweens;for(let r of e){let n=r.target;if(n===this||r.passive)continue;let o=r._stepPosition;n instanceof V?this._addManagedChild(n,o):this._setState(n.state,o)}let s=this.children;for(let r=s.length-1;r>=0;r--){let n=s[r].id;this._managed[n]===1&&(this.removeChildAt(r),delete this._managed[n])}}_setState(t,e){if(t)for(let s=t.length-1;s>=0;s--){let r=t[s],n=r.t,o=r.p;for(let h in o)n[h]=o[h];this._addManagedChild(n,e)}}_addManagedChild(t,e){t._off||(this.addChildAt(t,0),t instanceof Z&&(t._synchOffset=e,t.mode===Z.INDEPENDENT&&t.autoReset&&!this._managed[t.id]&&t._reset()),this._managed[t.id]=2)}_getBounds(t,e){let s=this.getBounds();return!s&&this.frameBounds&&(s=this._rectangle.copy(this.frameBounds[this.currentFrame])),s?this._transformBounds(s,t,e):super._getBounds(t,e)}}Z.INDEPENDENT="independent";Z.SINGLE_FRAME="single";Z.SYNCHED="synched";Z.inited=!1;class ne{constructor(){throw"MovieClipPlugin cannot be instantiated."}static install(){z.installPlugin(ne)}static init(t,e,s){return s}static tween(t,e,s,r,n,o,h,a){return t.target instanceof Z?o===1?n[e]:r[e]:s}}ne.priority=100;/**
 * @license Shape
 * Visit http://createjs.com/ for documentation, updates and examples.
 *
 * Copyright (c) 2017 gskinner.com, inc.
 *
 * Permission is hereby granted, free of charge, to any person
 * obtaining a copy of this software and associated documentation
 * files (the "Software"), to deal in the Software without
 * restriction, including without limitation the rights to use,
 * copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the
 * Software is furnished to do so, subject to the following
 * conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES
 * OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT
 * HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,
 * WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR
 * OTHER DEALINGS IN THE SOFTWARE.
 */class At extends V{constructor(t=new st){super(),this.graphics=t}isVisible(){let t=this.cacheCanvas||this.graphics&&!this.graphics.isEmpty();return!!(this.visible&&this.alpha>0&&this.scaleX!=0&&this.scaleY!=0&&t)}draw(t,e=!1){return super.draw(t,e)||this.graphics.draw(t,this),!0}clone(t=!1){let e=t&&this.graphics?this.graphics.clone():this.graphics;return this._cloneProps(new At(e))}}/**
 * @license SpriteSheet
 * Visit http://createjs.com/ for documentation, updates and examples.
 *
 * Copyright (c) 2017 gskinner.com, inc.
 *
 * Permission is hereby granted, free of charge, to any person
 * obtaining a copy of this software and associated documentation
 * files (the "Software"), to deal in the Software without
 * restriction, including without limitation the rights to use,
 * copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the
 * Software is furnished to do so, subject to the following
 * conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPliED, INCLUDING BUT NOT liMITED TO THE WARRANTIES
 * OF MERCHANTABIliTY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT
 * HolDERS BE liABLE FOR ANY CLAIM, DAMAGES OR OTHER liABIliTY,
 * WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR
 * OTHER DEAliNGS IN THE SOFTWARE.
 */class qi extends vt{constructor(t){super(),this.complete=!0,this.framerate=0,this._animations=null,this._frames=null,this._images=null,this._data=null,this._loadCount=0,this._frameHeight=0,this._frameWidth=0,this._numFrames=0,this._regX=0,this._regY=0,this._spacing=0,this._margin=0,this._parseData(t)}get animations(){return this._animations.slice()}getNumFrames(t){if(t==null)return this._frames?this._frames.length:this._numFrames||0;{let e=this._data[t];return e==null?0:e.frames.length}}getAnimation(t){return this._data[t]}getFrame(t){let e;return this._frames&&(e=this._frames[t])?e:null}getFrameBounds(t,e=new ft){let s=this.getFrame(t);return s?e.setValues(-s.regX,-s.regY,s.rect.width,s.rect.height):null}toString(){return`[${this.constructor.name}]`}clone(){throw"SpriteSheet cannot be cloned."}_parseData(t){if(t!=null){if(this.framerate=t.framerate||0,t.images)for(let e of t.images){let s=this._images=[],r;typeof e=="string"&&(r=e,e=document.createElement("img"),e.src=r),s.push(e),!e.getContext&&!e.naturalWidth&&(this._loadCount++,this.complete=!1,e.onload=()=>this._handleImageLoad(r),e.onerror=()=>this._handleImageError(r))}if(t.frames!=null)if(Array.isArray(t.frames)){this._frames=[];for(let e of t.frames)this._frames.push({image:this._images[e[4]?e[4]:0],rect:new ft(e[0],e[1],e[2],e[3]),regX:e[5]||0,regY:e[6]||0})}else{let e=t.frames;this._frameWidth=e.width,this._frameHeight=e.height,this._regX=e.regX||0,this._regY=e.regY||0,this._spacing=e.spacing||0,this._margin=e.margin||0,this._numFrames=e.count,this._loadCount===0&&this._calculateFrames()}if(this._animations=[],t.animations!=null){this._data={};let e=t.animations;for(let s in e){let r={name:s},n=e[s],o;if(typeof n=="number")o=r.frames=[n];else if(Array.isArray(n))if(n.length===1)r.frames=[n[0]];else{r.speed=n[3],r.next=n[2],o=r.frames=[];for(let h=n[0];h<=n[1];h++)o.push(h)}else{r.speed=n.speed,r.next=n.next;let h=n.frames;o=r.frames=typeof h=="number"?[h]:h.slice(0)}(r.next===!0||r.next===void 0)&&(r.next=s),(r.next===!1||o.length<2&&r.next===s)&&(r.next=null),r.speed||(r.speed=1),this._animations.push(s),this._data[s]=r}}}}_handleImageLoad(t){--this._loadCount===0&&(this._calculateFrames(),this.complete=!0,this.dispatchEvent("complete"))}_handleImageError(t){let e=new yt("error");e.src=t,this.dispatchEvent(e),--this._loadCount===0&&this.dispatchEvent("complete")}_calculateFrames(){if(this._frames||this._frameWidth===0)return;this._frames=[];let t=this._numFrames||1e5,e=0,s=this._frameWidth,r=this._frameHeight,n=this._spacing,o=this._margin;t:for(let h=0,a=this._images,u=a.length;h<u;h++){let c=a[h],f=c.width||c.naturalWidth,g=c.height||c.naturalHeight,w=o;for(;w<=g-o-r;){let m=o;for(;m<=f-o-s;){if(e>=t)break t;e++,this._frames.push({image:c,rect:new ft(m,w,s,r),regX:this._regX,regY:this._regY}),m+=s+n}w+=r+n}}this._numFrames=e}}/**
 * @license Text
 * Visit http://createjs.com/ for documentation, updates and examples.
 *
 * Copyright (c) 2017 gskinner.com, inc.
 *
 * Permission is hereby granted, free of charge, to any person
 * obtaining a copy of this software and associated documentation
 * files (the "Software"), to deal in the Software without
 * restriction, including without limitation the rights to use,
 * copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the
 * Software is furnished to do so, subject to the following
 * conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES
 * OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT
 * HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,
 * WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR
 * OTHER DEALINGS IN THE SOFTWARE.
 */class at extends V{constructor(t,e,s){super(),this.text=t,this.font=e,this.color=s,this.textAlign="left",this.textBaseline="top",this.maxWidth=null,this.outline=0,this.lineHeight=0,this.lineWidth=null}isVisible(){let t=this.cacheCanvas||this.text!=null&&this.text!=="";return!!(this.visible&&this.alpha>0&&this.scaleX!=0&&this.scaleY!=0&&t)}draw(t,e){if(super.draw(t,e))return!0;let s=this.color||"#000";return this.outline?(t.strokeStyle=s,t.lineWidth=this.outline*1):t.fillStyle=s,this._drawText(this._prepContext(t)),!0}getMeasuredWidth(){return this._getMeasuredWidth(this.text)}getMeasuredLineHeight(){return this._getMeasuredWidth("M")*1.2}getMeasuredHeight(){return this._drawText(null,{}).height}getBounds(){let t=super.getBounds();if(t)return t;if(this.text==null||this.text==="")return null;let e=this._drawText(null,{}),s=this.maxWidth&&this.maxWidth<e.width?this.maxWidth:e.width,r=s*at.H_OFFSETS[this.textAlign||"left"],o=(this.lineHeight||this.getMeasuredLineHeight())*at.V_OFFSETS[this.textBaseline||"top"];return this._rectangle.setValues(r,o,s,e.height)}getMetrics(){let t={lines:[]};return t.lineHeight=this.lineHeight||this.getMeasuredLineHeight(),t.vOffset=t.lineHeight*at.V_OFFSETS[this.textBaseline||"top"],this._drawText(null,t,t.lines)}clone(){return this._cloneProps(new at(this.text,this.font,this.color))}toString(){return`[${this.constructor.name} (text=${this.text.length>20?`${this.text.substr(0,17)}...`:this.text})]`}_cloneProps(t){return super._cloneProps(t),t.textAlign=this.textAlign,t.textBaseline=this.textBaseline,t.maxWidth=this.maxWidth,t.outline=this.outline,t.lineHeight=this.lineHeight,t.lineWidth=this.lineWidth,t}_prepContext(t){return t.font=this.font||"10px sans-serif",t.textAlign=this.textAlign||"left",t.textBaseline=this.textBaseline||"top",t.lineJoin="miter",t.miterLimit=2.5,t}_drawText(t,e,s){const r=!!t;r||(t=at._ctx,t.save(),this._prepContext(t));let n=this.lineHeight||this.getMeasuredLineHeight(),o=0,h=0,a=String(this.text).split(/(?:\r\n|\r|\n)/);for(let u of a){let c=null;if(this.lineWidth!=null&&(c=t.measureText(u).width)>this.lineWidth){let f=u.split(/(\s)/);u=f[0],c=t.measureText(u).width;const g=f.length;for(let w=1;w<g;w+=2){let m=t.measureText(f[w]+f[w+1]).width;c+m>this.lineWidth?(r&&this._drawTextLine(t,u,h*n),s&&s.push(u),c>o&&(o=c),u=f[w+1],c=t.measureText(u).width,h++):(u+=f[w]+f[w+1],c+=m)}}r&&this._drawTextLine(t,u,h*n),s&&s.push(u),e&&c==null&&(c=t.measureText(u).width),c>o&&(o=c),h++}return e&&(e.width=o,e.height=h*n),r||t.restore(),e}_drawTextLine(t,e,s){this.outline?t.strokeText(e,0,s,this.maxWidth||65535):t.fillText(e,0,s,this.maxWidth||65535)}_getMeasuredWidth(t){let e=at._ctx;e.save();let s=this._prepContext(e).measureText(t).width;return e.restore(),s}}at.H_OFFSETS={start:0,left:0,center:-.5,end:-1,right:-1};at.V_OFFSETS={top:0,hanging:-.01,middle:-.4,alphabetic:-.8,ideographic:-.85,bottom:-1};at._ctx=ve().getContext("2d");/**
 * @license BlurFilter
 * Visit http://createjs.com/ for documentation, updates and examples.
 *
 * Copyright (c) 2017 gskinner.com, inc.
 *
 * BoxBlur Algorithm by Mario Klingemann, quasimondo.com
 *
 * Permission is hereby granted, free of charge, to any person
 * obtaining a copy of this software and associated documentation
 * files (the "Software"), to deal in the Software without
 * restriction, including without limitation the rights to use,
 * copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the
 * Software is furnished to do so, subject to the following
 * conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES
 * OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT
 * HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,
 * WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR
 * OTHER DEALINGS IN THE SOFTWARE.
 */class bt extends re{constructor(t=0,e=0,s=1){super(),this._blurX=t,this._blurXTable=[],this._lastBlurX=null,this._blurY=e,this._blurYTable=[],this._lastBlurY=null,this._quality=isNaN(s)||s<1?1:s,this._lastQuality=null,this.FRAG_SHADER_TEMPLATE=`
			uniform float xWeight[{{blurX}}];
			uniform float yWeight[{{blurY}}];
			uniform vec2 textureOffset;
			void main (void) {
				vec4 color = vec4(0.0);

				float xAdj = ({{blurX}}.0-1.0)/2.0;
				float yAdj = ({{blurY}}.0-1.0)/2.0;
				vec2 sampleOffset;

				for(int i=0; i<{{blurX}}; i++) {
					for(int j=0; j<{{blurY}}; j++) {
						sampleOffset = vRenderCoord + (textureOffset * vec2(float(i)-xAdj, float(j)-yAdj));
						color += texture2D(uSampler, sampleOffset) * (xWeight[i] * yWeight[j]);
					}
				}

				gl_FragColor = color.rgba;
			}
		`}get blurX(){return this._blurX}set blurX(t){(isNaN(t)||t<0)&&(t=0),this._blurX=t}get blurY(){return this._blurY}set blurY(t){(isNaN(t)||t<0)&&(t=0),this._blurY=t}get quality(){return this._quality|0}set quality(t){(isNaN(t)||t<0)&&(t=0),this._quality=t}get _buildShader(){const t=this._lastBlurX!==this._blurX,e=this._lastBlurY!==this._blurY,s=this._lastQuality!==this._quality;if(t||e||s){(t||s)&&(this._blurXTable=this._getTable(this._blurX*this._quality)),(e||s)&&(this._blurYTable=this._getTable(this._blurY*this._quality)),this._updateShader(),this._lastBlurX=this._blurX,this._lastBlurY=this._blurY,this._lastQuality=this._quality;return}return this._compiledShader}set _builtShader(t){this._compiledShader=t}shaderParamSetup(t,e,s){t.uniform1fv(t.getUniformLocation(s,"xWeight"),this._blurXTable),t.uniform1fv(t.getUniformLocation(s,"yWeight"),this._blurYTable),t.uniform2f(t.getUniformLocation(s,"textureOffset"),2/(e._viewportWidth*this._quality),2/(e._viewportHeight*this._quality))}getBounds(t){let e=this.blurX|0,s=this.blurY|0;if(e<=0&&s<=0)return t;let r=Math.pow(this.quality,.2);return(t||new ft).pad(s*r+1,e*r+1,s*r+1,e*r+1)}clone(){return new bt(this.blurX,this.blurY,this.quality)}_updateShader(){let t=this.FRAG_SHADER_TEMPLATE;t=t.replace(/{{blurX}}/g,this._blurXTable.length.toFixed(0)),t=t.replace(/{{blurY}}/g,this._blurYTable.length.toFixed(0)),this.FRAG_SHADER_BODY=t}_getTable(t){if(t<=1)return[1];let s=[],r=Math.ceil(t*2);r+=r%2?0:1;let n=r/2|0;for(let h=-n;h<=n;h++){let a=h/n*4.2;s.push(1/Math.sqrt(2*Math.PI)*Math.pow(Math.E,-(Math.pow(a,2)/4)))}let o=s.reduce((h,a)=>h+a,0);return s.map(h=>h/o)}_applyFilter(t){let e=this._blurX>>1;if(isNaN(e)||e<0)return!1;let s=this._blurY>>1;if(isNaN(s)||s<0||e===0&&s===0)return!1;let r=this.quality;(isNaN(r)||r<1)&&(r=1),r|=0,r>3&&(r=3),r<1&&(r=1);let n=t.data,o=0,h=0,a=0,u=0,c=0,f=0,g=0,w=0,m=0,p=0,b=0,d=0,v=0,M=0,C=0,P=e+e+1|0,R=s+s+1|0,E=t.width|0,x=t.height|0,D=E-1|0,_=x-1|0,y=e+1|0,T=s+1|0,S={r:0,b:0,g:0,a:0},N=S;for(a=1;a<P;a++)N=N.n={r:0,b:0,g:0,a:0};N.n=S;let O={r:0,b:0,g:0,a:0},j=O;for(a=1;a<R;a++)j=j.n={r:0,b:0,g:0,a:0};j.n=O;let I=null,U=bt.MUL_TABLE[e]|0,$=bt.SHG_TABLE[e]|0,q=bt.MUL_TABLE[s]|0,it=bt.SHG_TABLE[s]|0;for(;r-- >0;){g=f=0;let Y=U,F=$;for(h=x;--h>-1;){for(w=y*(d=n[f|0]),m=y*(v=n[f+1|0]),p=y*(M=n[f+2|0]),b=y*(C=n[f+3|0]),N=S,a=y;--a>-1;)N.r=d,N.g=v,N.b=M,N.a=C,N=N.n;for(a=1;a<y;a++)u=f+((D<a?D:a)<<2)|0,w+=N.r=n[u],m+=N.g=n[u+1],p+=N.b=n[u+2],b+=N.a=n[u+3],N=N.n;for(I=S,o=0;o<E;o++)n[f++]=w*Y>>>F,n[f++]=m*Y>>>F,n[f++]=p*Y>>>F,n[f++]=b*Y>>>F,u=g+((u=o+e+1)<D?u:D)<<2,w-=I.r-(I.r=n[u]),m-=I.g-(I.g=n[u+1]),p-=I.b-(I.b=n[u+2]),b-=I.a-(I.a=n[u+3]),I=I.n;g+=E}for(Y=q,F=it,o=0;o<E;o++){for(f=o<<2|0,w=T*(d=n[f])|0,m=T*(v=n[f+1|0])|0,p=T*(M=n[f+2|0])|0,b=T*(C=n[f+3|0])|0,j=O,a=0;a<T;a++)j.r=d,j.g=v,j.b=M,j.a=C,j=j.n;for(c=E,a=1;a<=s;a++)f=c+o<<2,w+=j.r=n[f],m+=j.g=n[f+1],p+=j.b=n[f+2],b+=j.a=n[f+3],j=j.n,a<_&&(c+=E);if(f=o,I=O,r>0)for(h=0;h<x;h++)u=f<<2,n[u+3]=C=b*Y>>>F,C>0?(n[u]=w*Y>>>F,n[u+1]=m*Y>>>F,n[u+2]=p*Y>>>F):n[u]=n[u+1]=n[u+2]=0,u=o+((u=h+T)<_?u:_)*E<<2,w-=I.r-(I.r=n[u]),m-=I.g-(I.g=n[u+1]),p-=I.b-(I.b=n[u+2]),b-=I.a-(I.a=n[u+3]),I=I.n,f+=E;else for(h=0;h<x;h++)u=f<<2,n[u+3]=C=b*Y>>>F,C>0?(C=255/C,n[u]=(w*Y>>>F)*C,n[u+1]=(m*Y>>>F)*C,n[u+2]=(p*Y>>>F)*C):n[u]=n[u+1]=n[u+2]=0,u=o+((u=h+T)<_?u:_)*E<<2,w-=I.r-(I.r=n[u]),m-=I.g-(I.g=n[u+1]),p-=I.b-(I.b=n[u+2]),b-=I.a-(I.a=n[u+3]),I=I.n,f+=E}}return!0}}bt.MUL_TABLE=[1,171,205,293,57,373,79,137,241,27,391,357,41,19,283,265,497,469,443,421,25,191,365,349,335,161,155,149,9,278,269,261,505,245,475,231,449,437,213,415,405,395,193,377,369,361,353,345,169,331,325,319,313,307,301,37,145,285,281,69,271,267,263,259,509,501,493,243,479,118,465,459,113,446,55,435,429,423,209,413,51,403,199,393,97,3,379,375,371,367,363,359,355,351,347,43,85,337,333,165,327,323,5,317,157,311,77,305,303,75,297,294,73,289,287,71,141,279,277,275,68,135,67,133,33,262,260,129,511,507,503,499,495,491,61,121,481,477,237,235,467,232,115,457,227,451,7,445,221,439,218,433,215,427,425,211,419,417,207,411,409,203,202,401,399,396,197,49,389,387,385,383,95,189,47,187,93,185,23,183,91,181,45,179,89,177,11,175,87,173,345,343,341,339,337,21,167,83,331,329,327,163,81,323,321,319,159,79,315,313,39,155,309,307,153,305,303,151,75,299,149,37,295,147,73,291,145,289,287,143,285,71,141,281,35,279,139,69,275,137,273,17,271,135,269,267,133,265,33,263,131,261,130,259,129,257,1];bt.SHG_TABLE=[0,9,10,11,9,12,10,11,12,9,13,13,10,9,13,13,14,14,14,14,10,13,14,14,14,13,13,13,9,14,14,14,15,14,15,14,15,15,14,15,15,15,14,15,15,15,15,15,14,15,15,15,15,15,15,12,14,15,15,13,15,15,15,15,16,16,16,15,16,14,16,16,14,16,13,16,16,16,15,16,13,16,15,16,14,9,16,16,16,16,16,16,16,16,16,13,14,16,16,15,16,16,10,16,15,16,14,16,16,14,16,16,14,16,16,14,15,16,16,16,14,15,14,15,13,16,16,15,17,17,17,17,17,17,14,15,17,17,16,16,17,16,15,17,16,17,11,17,16,17,16,17,16,17,17,16,17,17,16,17,17,16,16,17,17,17,16,14,17,17,17,17,15,16,14,16,15,16,13,16,15,16,14,16,15,16,12,16,15,16,17,17,17,17,17,13,16,15,17,17,17,16,15,17,17,17,16,15,17,17,14,16,17,17,16,17,17,16,15,17,16,14,17,16,15,17,16,17,17,16,17,15,16,17,14,17,16,15,17,16,17,13,17,16,17,17,16,17,14,17,16,17,16,17,16,17,9];/**
 * @license SpriteSheetBuilder
 * Visit http://createjs.com/ for documentation, updates and examples.
 *
 * Copyright (c) 2017 gskinner.com, inc.
 *
 * Permission is hereby granted, free of charge, to any person
 * obtaining a copy of this software and associated documentation
 * files (the "Software"), to deal in the Software without
 * restriction, including without limitation the rights to use,
 * copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the
 * Software is furnished to do so, subject to the following
 * conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES
 * OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT
 * HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,
 * WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR
 * OTHER DEALINGS IN THE SOFTWARE.
 */class pt extends vt{constructor(t=0){super(),this.maxWidth=2048,this.maxHeight=2048,this.spriteSheet=null,this.scale=1,this.padding=1,this.timeSlice=.3,this.progress=-1,this.framerate=t,this._frames=[],this._animations={},this._data=null,this._nextFrameIndex=0,this._index=0,this._timerID=null,this._scale=1}addFrame(t,e,s=1,r,n){if(this._data)throw pt.ERR_RUNNING;let o=e||t.bounds||t.nominalBounds||t.getBounds&&t.getBounds();return o?this._frames.push({source:t,sourceRect:o,scale:s,funct:r,data:n,index:this._frames.length,height:o.height*s})-1:null}addAnimation(t,e,s,r){if(this._data)throw pt.ERR_RUNNING;this._animations[t]={frames:e,next:s,speed:r}}addMovieClip(t,e,s=1,r,n,o){if(this._data)throw pt.ERR_RUNNING;let h=t.frameBounds,a=e||t.bounds||t.nominalBounds||t.getBounds&&t.getBounds();if(!a&&!h)return;let u=this._frames.length;const c=t.timeline.duration;for(let w=0;w<c;w++){let m=h&&h[w]?h[w]:a;this.addFrame(t,m,s,this._setupMovieClipFrame,{i:w,f:r,d:n})}const f=t.timeline._labels;let g=[];for(let w in f)g.push({index:f[w],label:w});if(g.length){g.sort((w,m)=>w.index-m.index);for(let w=0,m=g.length;w<m;w++){let p=g[w].label,b=u+g[w].index,d=u+(w===m-1?c:g[w+1].index),v=[];for(let M=b;M<d;M++)v.push(M);o&&(p=o(p,t,b,d),!p)||this.addAnimation(p,v,!0)}}}build(){if(this._data)throw pt.ERR_RUNNING;for(this._startBuild();this._drawNext(););return this._endBuild(),this.spriteSheet}buildAsync(t){if(this._data)throw pt.ERR_RUNNING;this.timeSlice=t,this._startBuild(),this._timerID=setTimeout(()=>this._run(),50-Math.max(.01,Math.min(.99,this.timeSlice||.3))*50)}stopAsync(){clearTimeout(this._timerID),this._data=null}toString(){return`[${this.constructor.name}]`}_startBuild(){let t=this.padding||0;this.progress=0,this.spriteSheet=null,this._index=0,this._scale=this.scale;let e=[];this._data={images:[],frames:e,framerate:this.framerate,animations:this._animations};let s=this._frames.slice();if(s.sort((h,a)=>h.height<=a.height?-1:1),s[s.length-1].height+t*2>this.maxHeight)throw pt.ERR_DIMENSIONS;let r=0,n=0,o=0;for(;s.length;){let h=this._fillRow(s,r,o,e,t);if(h.w>n&&(n=h.w),r+=h.h,!h.h||!s.length){let a=window.createjs&&createjs.createCanvas?createjs.createCanvas():document.createElement("canvas");a.width=this._getSize(n,this.maxWidth),a.height=this._getSize(r,this.maxHeight),this._data.images[o]=a,h.h||(n=r=0,o++)}}}_setupMovieClipFrame(t,e){let s=t.actionsEnabled;t.actionsEnabled=!1,t.gotoAndStop(e.i),t.actionsEnabled=s,e.f&&e.f(t,e.d,e.i)}_getSize(t,e){let s=4;for(;Math.pow(2,++s)<t;);return Math.min(e,Math.pow(2,s))}_fillRow(t,e,s,r,n){let o=this.maxWidth,h=this.maxHeight;e+=n;let a=h-e,u=n,c=0;for(let f=t.length-1;f>=0;f--){let g=t[f],w=this._scale*g.scale,m=g.sourceRect,p=g.source,b=Math.floor(w*m.x-n),d=Math.floor(w*m.y-n),v=Math.ceil(w*m.height+n*2),M=Math.ceil(w*m.width+n*2);if(M>o)throw pt.ERR_DIMENSIONS;v>a||u+M>o||(g.img=s,g.rect=new ft(u,e,M,v),c=c||v,t.splice(f,1),r[g.index]=[u,e,M,v,s,Math.round(-b+w*p.regX-n),Math.round(-d+w*p.regY-n)],u+=M)}return{w:u,h:c}}_endBuild(){this.spriteSheet=new qi(this._data),this._data=null,this.progress=1,this.dispatchEvent("complete")}_run(){let t=Math.max(.01,Math.min(.99,this.timeSlice||.3))*50,e=new Date().getTime()+t,s=!1;for(;e>new Date().getTime();)if(!this._drawNext()){s=!0;break}s?this._endBuild():this._timerID=setTimeout(()=>this._run(),50-t);let r=this.progress=this._index/this._frames.length;if(this.hasEventListener("progress")){let n=new yt("progress");n.progress=r,this.dispatchEvent(n)}}_drawNext(){let t=this._frames[this._index],e=t.scale*this._scale,s=t.rect,r=t.sourceRect,o=this._data.images[t.img].getContext("2d");return t.funct&&t.funct(t.source,t.data),o.save(),o.beginPath(),o.rect(s.x,s.y,s.width,s.height),o.clip(),o.translate(Math.ceil(s.x-r.x*e),Math.ceil(s.y-r.y*e)),o.scale(e,e),t.source.draw(o),o.restore(),++this._index<this._frames.length}}pt.ERR_DIMENSIONS="frame dimensions exceed max spritesheet dimensions";pt.ERR_RUNNING="a build is already running";/*
* @license SpriteSheetUtils
* Visit http://createjs.com/ for documentation, updates and examples.
*
* Copyright (c) 2017 gskinner.com, inc.
*
* Permission is hereby granted, free of charge, to any person
* obtaining a copy of this software and associated documentation
* files (the "Software"), to deal in the Software without
* restriction, including without limitation the rights to use,
* copy, modify, merge, publish, distribute, sublicense, and/or sell
* copies of the Software, and to permit persons to whom the
* Software is furnished to do so, subject to the following
* conditions:
*
* The above copyright notice and this permission notice shall be
* included in all copies or substantial portions of the Software.
*
* THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
* EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES
* OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
* NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT
* HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,
* WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
* FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR
* OTHER DEALINGS IN THE SOFTWARE.
*/ve();/**
 * @license WebGLInspector
 * Visit http://createjs.com/ for documentation, updates and examples.
 *
 * Copyright (c) 2017 gskinner.com, inc.
 *
 * Permission is hereby granted, free of charge, to any person
 * obtaining a copy of this software and associated documentation
 * files (the "Software"), to deal in the Software without
 * restriction, including without limitation the rights to use,
 * copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the
 * Software is furnished to do so, subject to the following
 * conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES
 * OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT
 * HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,
 * WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR
 * OTHER DEALINGS IN THE SOFTWARE.
 */class dt extends vt{constructor(t){super(),this._stage=t}static dispProps(t,e=""){let s=`	P: ${t.x.toFixed(2)}x${t.y.toFixed(2)}	`,r=`	R: ${t.regX.toFixed(2)}x${t.regY.toFixed(2)}	`;dt._log(e,`${t.toString()}	`,s,r)}static _log(...t){dt.alternateOutput?dt.alternateOutput.log(...t):console.log(...t)}log(t){t||(t=this._stage),dt._log(`Batches Per Draw: ${(t._batchID/t._drawID).toFixed(4)}`),this.logContextInfo(t._webGLContext),this.logDepth(t.children,""),this.logTextureFill(t)}toggleGPUDraw(t,e){t||(t=this._stage),e===void 0&&(e=!!t._drawBuffers_),e&&t._drawBuffers_?(t._drawBuffers=t._drawBuffers_,t._drawBuffers_=void 0):(t._drawBuffers_=t._drawBuffers,t._drawBuffers=function(r){this.vocalDebug&&dt._log(`BlankDraw[${this._drawID}:${this._batchID}] : ${this.batchReason}`)})}logDepth(t,e="",s=dt._log){t||(t=this._stage.children);const r=t.length;for(let n=0;n<r;n++){let o=t[n];s(`${e}-`,o),o.children&&o.children.length&&this.logDepth(o.children,`|${e}`,s)}}logContextInfo(t){t||(t=this._stage._webGLContext);let e=`
			== LOG:

			Max textures per draw: ${t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS)}

			Max textures active: ${t.getParameter(t.MAX_COMBINED_TEXTURE_IMAGE_UNITS)}

			

			Max texture size: ${t.getParameter(t.MAX_TEXTURE_SIZE)/2}

			Max cache size: ${t.getParameter(t.MAX_RENDERBUFFER_SIZE)/2}

			

			Max attributes per vertex: ${t.getParameter(t.MAX_VERTEX_ATTRIBS)}

			WebGL Version string: ${t.getParameter(t.VERSION)}

			======
		`;dt._log(e)}logTextureFill(t){t||(t=this._stage);let e=t._textureDictionary,s=t._batchTextureCount;dt._log(`${textureMax}: ${s}`);let r=[];for(let o in e){o.replace(window.location.origin,"");let h=e[o],a=h._lastActiveIndex?h._lastActiveIndex===h._activeIndex:!1;r.push({src,element:h,shifted:a}),h._lastActiveIndex=h._activeIndex}r.sort((o,h)=>o.element._drawID===t._drawID?1:o.element._drawID<h.element._drawID?-1:0);const n=r.length;for(let o=0;o<n;o++){let h=r[o],a=h.element._drawID===t._drawID;dt._log(`[${h.src}] ${a?"ACTIVE":"stale"} ${h.shifted?"steady":"DRIFT"}`,h.element)}}}dt.alternateOutput=null;function Yi(l,t,e=1e-5){return Math.abs(l-t)<e}function Vi(l){return l<.5?4*l*l*l:1-Math.pow(-2*l+2,3)/2}function Xi(l){const t=l-1;return t*t*t+1}function Ze(l,{delay:t=0,duration:e=400,easing:s=Is}={}){const r=+getComputedStyle(l).opacity;return{delay:t,duration:e,easing:s,css:n=>`opacity: ${n*r}`}}function $e(l,{delay:t=0,duration:e=400,easing:s=Xi,axis:r="y"}={}){const n=getComputedStyle(l),o=+n.opacity,h=r==="y"?"height":"width",a=parseFloat(n[h]),u=r==="y"?["top","bottom"]:["left","right"],c=u.map(d=>`${d[0].toUpperCase()}${d.slice(1)}`),f=parseFloat(n[`padding${c[0]}`]),g=parseFloat(n[`padding${c[1]}`]),w=parseFloat(n[`margin${c[0]}`]),m=parseFloat(n[`margin${c[1]}`]),p=parseFloat(n[`border${c[0]}Width`]),b=parseFloat(n[`border${c[1]}Width`]);return{delay:t,duration:e,easing:s,css:d=>`overflow: hidden;opacity: ${Math.min(d*20,1)*o};${h}: ${d*a}px;padding-${u[0]}: ${d*f}px;padding-${u[1]}: ${d*g}px;margin-${u[0]}: ${d*w}px;margin-${u[1]}: ${d*m}px;border-${u[0]}-width: ${d*p}px;border-${u[1]}-width: ${d*b}px;`}}function Ui(l,t){t&&t!=="lg"&&t!=="sm"&&t!=="xs"?l.style.fontSize=t.replace("x","em"):l.style.fontSize=""}function Wi(l,t,e,s,r,n=1,o="",h=""){let a=1,u=1;r&&(r=="horizontal"?a=-1:r=="vertical"?u=-1:a=u=-1),typeof l=="string"&&(l=parseFloat(l)),typeof t=="string"&&(t=parseFloat(t)),typeof e=="string"&&(e=parseFloat(e));const c=`${t*n}${o}`,f=`${e*n}${o}`;let g=`translate(${c},${f}) scale(${a*l},${u*l})`;return s&&(g+=` rotate(${s}${h})`),g}function He(l){let t,e,s,r,n,o,h;function a(f,g){return typeof f[16][4]=="string"?Ji:Qi}let u=a(l),c=u(l);return{c(){t=Ft("svg"),e=Ft("g"),s=Ft("g"),c.c(),this.h()},l(f){t=Lt(f,"svg",{id:!0,class:!0,style:!0,viewBox:!0,"aria-hidden":!0,role:!0,xmlns:!0});var g=mt(t);e=Lt(g,"g",{transform:!0,"transform-origin":!0});var w=mt(e);s=Lt(w,"g",{transform:!0});var m=mt(s);c.l(m),m.forEach(X),w.forEach(X),g.forEach(X),this.h()},h(){L(s,"transform",l[15]),L(e,"transform",r="translate("+l[16][0]/2+" "+l[16][1]/2+")"),L(e,"transform-origin",n=l[16][0]/4+" 0"),L(t,"id",l[1]),L(t,"class",o="svelte-fa svelte-fa-base "+l[0]+" svelte-bvo74f"),L(t,"style",l[2]),L(t,"viewBox",h="0 0 "+l[16][0]+" "+l[16][1]),L(t,"aria-hidden","true"),L(t,"role","img"),L(t,"xmlns","http://www.w3.org/2000/svg"),H(t,"pulse",l[8]),H(t,"svelte-fa-size-lg",l[3]==="lg"),H(t,"svelte-fa-size-sm",l[3]==="sm"),H(t,"svelte-fa-size-xs",l[3]==="xs"),H(t,"svelte-fa-fw",l[5]),H(t,"svelte-fa-pull-left",l[6]==="left"),H(t,"svelte-fa-pull-right",l[6]==="right"),H(t,"spin",l[7])},m(f,g){ut(f,t,g),jt(t,e),jt(e,s),c.m(s,null),l[23](t)},p(f,g){u===(u=a(f))&&c?c.p(f,g):(c.d(1),c=u(f),c&&(c.c(),c.m(s,null))),g&32768&&L(s,"transform",f[15]),g&65536&&r!==(r="translate("+f[16][0]/2+" "+f[16][1]/2+")")&&L(e,"transform",r),g&65536&&n!==(n=f[16][0]/4+" 0")&&L(e,"transform-origin",n),g&2&&L(t,"id",f[1]),g&1&&o!==(o="svelte-fa svelte-fa-base "+f[0]+" svelte-bvo74f")&&L(t,"class",o),g&4&&L(t,"style",f[2]),g&65536&&h!==(h="0 0 "+f[16][0]+" "+f[16][1])&&L(t,"viewBox",h),g&257&&H(t,"pulse",f[8]),g&9&&H(t,"svelte-fa-size-lg",f[3]==="lg"),g&9&&H(t,"svelte-fa-size-sm",f[3]==="sm"),g&9&&H(t,"svelte-fa-size-xs",f[3]==="xs"),g&33&&H(t,"svelte-fa-fw",f[5]),g&65&&H(t,"svelte-fa-pull-left",f[6]==="left"),g&65&&H(t,"svelte-fa-pull-right",f[6]==="right"),g&129&&H(t,"spin",f[7])},d(f){f&&X(t),c.d(),l[23](null)}}}function Qi(l){let t,e,s,r,n,o,h,a,u,c;return{c(){t=Ft("path"),o=Ft("path"),this.h()},l(f){t=Lt(f,"path",{d:!0,fill:!0,"fill-opacity":!0,transform:!0}),mt(t).forEach(X),o=Lt(f,"path",{d:!0,fill:!0,"fill-opacity":!0,transform:!0}),mt(o).forEach(X),this.h()},h(){L(t,"d",e=l[16][4][0]),L(t,"fill",s=l[10]||l[4]||"currentColor"),L(t,"fill-opacity",r=l[13]!=!1?l[11]:l[12]),L(t,"transform",n="translate("+l[16][0]/-2+" "+l[16][1]/-2+")"),L(o,"d",h=l[16][4][1]),L(o,"fill",a=l[9]||l[4]||"currentColor"),L(o,"fill-opacity",u=l[13]!=!1?l[12]:l[11]),L(o,"transform",c="translate("+l[16][0]/-2+" "+l[16][1]/-2+")")},m(f,g){ut(f,t,g),ut(f,o,g)},p(f,g){g&65536&&e!==(e=f[16][4][0])&&L(t,"d",e),g&1040&&s!==(s=f[10]||f[4]||"currentColor")&&L(t,"fill",s),g&14336&&r!==(r=f[13]!=!1?f[11]:f[12])&&L(t,"fill-opacity",r),g&65536&&n!==(n="translate("+f[16][0]/-2+" "+f[16][1]/-2+")")&&L(t,"transform",n),g&65536&&h!==(h=f[16][4][1])&&L(o,"d",h),g&528&&a!==(a=f[9]||f[4]||"currentColor")&&L(o,"fill",a),g&14336&&u!==(u=f[13]!=!1?f[12]:f[11])&&L(o,"fill-opacity",u),g&65536&&c!==(c="translate("+f[16][0]/-2+" "+f[16][1]/-2+")")&&L(o,"transform",c)},d(f){f&&(X(t),X(o))}}}function Ji(l){let t,e,s,r;return{c(){t=Ft("path"),this.h()},l(n){t=Lt(n,"path",{d:!0,fill:!0,transform:!0}),mt(t).forEach(X),this.h()},h(){L(t,"d",e=l[16][4]),L(t,"fill",s=l[4]||l[9]||"currentColor"),L(t,"transform",r="translate("+l[16][0]/-2+" "+l[16][1]/-2+")")},m(n,o){ut(n,t,o)},p(n,o){o&65536&&e!==(e=n[16][4])&&L(t,"d",e),o&528&&s!==(s=n[4]||n[9]||"currentColor")&&L(t,"fill",s),o&65536&&r!==(r="translate("+n[16][0]/-2+" "+n[16][1]/-2+")")&&L(t,"transform",r)},d(n){n&&X(t)}}}function Ki(l){let t,e=l[16][4]&&He(l);return{c(){e&&e.c(),t=Me()},l(s){e&&e.l(s),t=Me()},m(s,r){e&&e.m(s,r),ut(s,t,r)},p(s,[r]){s[16][4]?e?e.p(s,r):(e=He(s),e.c(),e.m(t.parentNode,t)):e&&(e.d(1),e=null)},i:ce,o:ce,d(s){s&&X(t),e&&e.d(s)}}}function Zi(l,t,e){let s,r,{class:n=void 0}=t,{id:o=void 0}=t,{style:h=void 0}=t,{icon:a}=t,{size:u=void 0}=t,{color:c=void 0}=t,{fw:f=!1}=t,{pull:g=void 0}=t,{scale:w=1}=t,{translateX:m=0}=t,{translateY:p=0}=t,{rotate:b=void 0}=t,{flip:d=void 0}=t,{spin:v=!1}=t,{pulse:M=!1}=t,{primaryColor:C=""}=t,{secondaryColor:P=""}=t,{primaryOpacity:R=1}=t,{secondaryOpacity:E=.4}=t,{swapOpacity:x=!1}=t,D;function _(y){is[y?"unshift":"push"](()=>{D=y,e(14,D)})}return l.$$set=y=>{"class"in y&&e(0,n=y.class),"id"in y&&e(1,o=y.id),"style"in y&&e(2,h=y.style),"icon"in y&&e(17,a=y.icon),"size"in y&&e(3,u=y.size),"color"in y&&e(4,c=y.color),"fw"in y&&e(5,f=y.fw),"pull"in y&&e(6,g=y.pull),"scale"in y&&e(18,w=y.scale),"translateX"in y&&e(19,m=y.translateX),"translateY"in y&&e(20,p=y.translateY),"rotate"in y&&e(21,b=y.rotate),"flip"in y&&e(22,d=y.flip),"spin"in y&&e(7,v=y.spin),"pulse"in y&&e(8,M=y.pulse),"primaryColor"in y&&e(9,C=y.primaryColor),"secondaryColor"in y&&e(10,P=y.secondaryColor),"primaryOpacity"in y&&e(11,R=y.primaryOpacity),"secondaryOpacity"in y&&e(12,E=y.secondaryOpacity),"swapOpacity"in y&&e(13,x=y.swapOpacity)},l.$$.update=()=>{l.$$.dirty&16392&&D&&u&&Ui(D,u),l.$$.dirty&131072&&e(16,s=a&&a.icon||[0,0,"",[],""]),l.$$.dirty&8126464&&e(15,r=Wi(w,m,p,b,d,512))},[n,o,h,u,c,f,g,v,M,C,P,R,E,x,D,r,s,a,w,m,p,b,d,_]}class ts extends ns{constructor(t){super(),os(this,t,Zi,Ki,me,{class:0,id:1,style:2,icon:17,size:3,color:4,fw:5,pull:6,scale:18,translateX:19,translateY:20,rotate:21,flip:22,spin:7,pulse:8,primaryColor:9,secondaryColor:10,primaryOpacity:11,secondaryOpacity:12,swapOpacity:13})}}var $i={prefix:"fab",iconName:"facebook",icon:[512,512,[62e3],"f09a","M512 256C512 114.6 397.4 0 256 0S0 114.6 0 256C0 376 82.7 476.8 194.2 504.5V334.2H141.4V256h52.8V222.3c0-87.1 39.4-127.5 125-127.5c16.2 0 44.2 3.2 55.7 6.4V172c-6-.6-16.5-1-29.6-1c-42 0-58.2 15.9-58.2 57.2V256h83.6l-14.4 78.2H287V510.1C413.8 494.8 512 386.9 512 256h0z"]},Hi={prefix:"fab",iconName:"github",icon:[496,512,[],"f09b","M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"]};const{window:ue}=Ns;function es(l){let t,e="<h1>Can you draw a perfect circle?</h1>",s,r;return{c(){t=Dt("div"),t.innerHTML=e,this.h()},l(n){t=Pt(n,"DIV",{class:!0,"data-svelte-h":!0}),Ps(t)!=="svelte-1mexbf9"&&(t.innerHTML=e),this.h()},h(){L(t,"class","header svelte-ic3v37")},m(n,o){ut(n,t,o),r=!0},i(n){r||(n&&rs(()=>{r&&(s||(s=$t(t,Ze,{},!0)),s.run(1))}),r=!0)},o(n){n&&(s||(s=$t(t,Ze,{},!1)),s.run(0)),r=!1},d(n){n&&X(t),n&&s&&s.end()}}}function ss(l){let t,e=(l[6]||l[7])+"",s,r,n;return{c(){t=Dt("p"),s=Fs(e),this.h()},l(o){t=Pt(o,"P",{class:!0});var h=mt(t);s=Ls(h,e),h.forEach(X),this.h()},h(){L(t,"class","msg svelte-ic3v37")},m(o,h){ut(o,t,h),jt(t,s),n=!0},p(o,h){(!n||h&192)&&e!==(e=(o[6]||o[7])+"")&&js(s,e)},i(o){n||(o&&rs(()=>{n&&(r||(r=$t(t,$e,{},!0)),r.run(1))}),n=!0)},o(o){o&&(r||(r=$t(t,$e,{},!1)),r.run(0)),n=!1},d(o){o&&X(t),o&&r&&r.end()}}}function tr(l){let t,e,s,r=l[6]+l[7],n,o,h,a,u,c,f,g,w,m,p=!l[2]&&es(),b=ss(l);return a=new ts({props:{icon:Hi,size:"2x",scale:.95}}),f=new ts({props:{icon:$i,size:"2x",scale:.95}}),{c(){t=Dt("canvas"),e=Xt(),p&&p.c(),s=Xt(),b.c(),n=Xt(),o=Dt("div"),h=Dt("a"),Te(a.$$.fragment),u=Xt(),c=Dt("a"),Te(f.$$.fragment),this.h()},l(d){t=Pt(d,"CANVAS",{width:!0,height:!0,class:!0}),mt(t).forEach(X),e=Ut(d),p&&p.l(d),s=Ut(d),b.l(d),n=Ut(d),o=Pt(d,"DIV",{class:!0});var v=mt(o);h=Pt(v,"A",{target:!0,href:!0,class:!0});var M=mt(h);ke(a.$$.fragment,M),M.forEach(X),u=Ut(v),c=Pt(v,"A",{target:!0,href:!0,class:!0});var C=mt(c);ke(f.$$.fragment,C),C.forEach(X),v.forEach(X),this.h()},h(){L(t,"width","1000"),L(t,"height","1000"),L(t,"class","svelte-ic3v37"),L(h,"target","_blank"),L(h,"href","https://github.com/balldk/perfect-circle"),L(h,"class","svelte-ic3v37"),L(c,"target","_blank"),L(c,"href","https://www.facebook.com/code.van.code.vo"),L(c,"class","svelte-ic3v37"),L(o,"class","info svelte-ic3v37")},m(d,v){ut(d,t,v),l[14](t),ut(d,e,v),p&&p.m(d,v),ut(d,s,v),b.m(d,v),ut(d,n,v),ut(d,o,v),jt(o,h),xe(a,h,null),jt(o,u),jt(o,c),xe(f,c,null),g=!0,w||(m=[ae(ue,"mousemove",l[11]),ae(ue,"mousedown",l[13]),ae(ue,"mouseup",l[12])],w=!0)},p(d,[v]){d[2]?p&&(Re(),kt(p,1,1,()=>{p=null}),Ce()):p?v&4&&St(p,1):(p=es(),p.c(),St(p,1),p.m(s.parentNode,s)),v&192&&me(r,r=d[6]+d[7])?(Re(),kt(b,1,1,ce),Ce(),b=ss(d),b.c(),St(b,1),b.m(n.parentNode,n)):b.p(d,v)},i(d){g||(St(p),St(b),St(a.$$.fragment,d),St(f.$$.fragment,d),g=!0)},o(d){kt(p),kt(b),kt(a.$$.fragment,d),kt(f.$$.fragment,d),g=!1},d(d){d&&(X(t),X(e),X(s),X(n),X(o)),l[14](null),p&&p.d(d),b.d(d),Ie(a),Ie(f),w=!1,Rs(m)}}}const fe="#9A3B3B";function er(l,t,e){let s=!1,r=!1,n=!1,o,h,a=new At,u=new At,c=new Tt,f=new at("",'0px "Playpen Sans"',"black"),g=new W([]),w="",m="",p=0;Ds(()=>{e(3,o.width=window.innerWidth*1.4,o),e(3,o.height=window.innerHeight*1.4,o),e(3,o.style.width=`${window.innerWidth}px`,o),e(3,o.style.height=`${window.innerHeight}px`,o),e(4,h=new Oi(o)),e(4,h.scaleX=1.4,h),e(4,h.scaleY=1.4,h),h.addChild(a),h.addChild(u),h.addChild(c),h.addChild(f),gt.interval=5,e(8,p=parseFloat(localStorage.getItem("bestScore")||"0")),e(7,m=p!=0?`Personal record: ${(p*100).toFixed(1)}%`:"Draw any circle on the screen")});function b(R){if(s&&!r){let E=[R.clientX-o.offsetLeft,R.clientY];const x=new At;if(g.size===0)g=new W([[E[0]],[E[1]]]),x.graphics.beginFill(fe).drawCircle(E[0],E[1],5),c.addChild(x),h.update();else{const D=g.getColumnVector(g.columns-1);g.addColumn(E),x.graphics.setStrokeStyle(4,"round","round").beginStroke("black").moveTo(D.get(0,0),D.get(1,0)).lineTo(E[0],E[1]).endStroke(),c.addChild(x),h.update()}}}function d(){let R=g.max();g.div(R);let E=g.subMatrixRow([0]),x=g.subMatrixRow([1]),D=W.columnVector([E.sum()/E.size,x.sum()/x.size]);const _=W.pow(W.subtract(E,D.get(0,0)),2),y=W.pow(W.subtract(x,D.get(1,0)),2);let T=W.add(_,y).sqrt().mean();const S=200,N=[],O=.02;for(let j=0;j<S;j++){const I=W.subtract(E,D.get(0,0)).mul(-1),U=W.subtract(x,D.get(1,0)).mul(-1),$=W.add(W.pow(I,2),W.pow(U,2)),q=W.subtract($,Math.pow(T,2)),it=W.mul(q,I).sum(),Y=W.mul(q,U).sum(),F=-T*q.sum(),Q=W.columnVector([it,Y]);D.subtract(W.mul(Q,O)),T=T-F*O;const et=$.sqrt().subtract(T).abs().mul(R).mean();N.push(et)}return T=T*R,D.mul(R),[D,T,N,R]}function v(R,E,x,D){e(1,r=!0);let _=3/2*Math.PI,y=_,T=0,S=.004;h.setChildIndex(a,h.numChildren-1),h.setChildIndex(u,h.numChildren-1),h.setChildIndex(f,h.numChildren-1),gt.addEventListener("tick",N=>{a.graphics.clear().setStrokeStyle(3,"round","round").beginStroke(fe).arc(R.get(0,0),R.get(1,0),E,_,y,!1),u.graphics.clear().setStrokeStyle(3).beginStroke(fe).moveTo(R.get(0,0),R.get(1,0)).lineTo(E*Math.cos(y)+R.get(0,0),E*Math.sin(y)+R.get(1,0)).endStroke(),Yi(T,1)&&(gt.removeAllEventListeners(),e(1,r=!1),D()),h.update(),y=2*Math.PI*Vi(T)+_,T+=S})}function M(){if(e(0,s=!1),g.size<=2)return;const[R,E,x,D]=d(),_=x[x.length-1];let y=1-2*_/E;console.clear(),console.table({r:E,center:`(${R.get(0,0)}, ${R.get(1,0)})`,perfect_rate:y,initial_error:x[0],error:_});const T=g.getColumnVector(0),S=g.getColumnVector(g.columns-1),N=W.subtract(T,S).norm()*D;E<=20?e(6,w="Too small"):y<=.65?e(6,w="Not a circle at all"):N>=40&&e(6,w="Not a closed loop"),g=new W([]),w.length==0&&v(R,E,y,()=>{let O=E/3.5,j=R.get(1,0);E>220&&(O=45),E<60&&(O=20,j-=E+15),e(5,f=new at(`${(y*100).toFixed(1)}%`,`${O}px "Playpen Sans"`,"black")),e(5,f.x=R.get(0,0),f),e(5,f.y=j,f),e(5,f.textBaseline="alphabetic",f),e(5,f.textAlign="center",f),h.addChild(f),u.graphics.clear(),y>p&&(e(8,p=y),localStorage.setItem("bestScore",p.toString()),y>=.96?e(7,m="You are a beast!"):y>=.97?e(7,m="Impossible!!!"):y>=.98?e(7,m="I think you cheated"):e(7,m="New best score!"))})}const C=()=>{r||(e(2,n=!0),e(0,s=!0),c.removeAllChildren(),a.graphics.clear(),e(6,w=""),e(7,m=p!=0?`Personal record: ${(p*100).toFixed(1)}%`:""),e(5,f.text="",f),h.update())};function P(R){is[R?"unshift":"push"](()=>{o=R,e(3,o)})}return[s,r,n,o,h,f,w,m,p,a,c,b,M,C,P]}class or extends ns{constructor(t){super(),os(this,t,er,tr,me,{})}}export{or as component,nr as universal};
